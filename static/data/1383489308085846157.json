{"thread":{"id":"1383489308085846157","type":11,"last_message_id":"1419924411888439308","flags":0,"guild_id":"1212332642801025064","name":"infrahubctl targeted check parameter","parent_id":"1301914405176475729","rate_limit_per_user":0,"bitrate":64000,"user_limit":0,"rtc_region":null,"owner_id":"811281824768458793","thread_metadata":{"archived":true,"archive_timestamp":"2025-10-23T05:56:16.643000+00:00","auto_archive_duration":4320,"locked":false,"create_timestamp":"2025-06-14T16:52:35.036000+00:00"},"message_count":7,"member_count":4,"total_message_sent":7,"applied_tags":["1301915943663960064","1322475882421555200","1304062537364410420"]},"messages":[{"type":19,"content":"thanks <@227091130561331200> , i will try to figure it out.","mentions":[{"id":"227091130561331200","username":"minitriga.","avatar":"71ac6f8da9c358794381d5d430c53316","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Alex Gittings","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null}],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-09-23T05:52:40.714000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1419924411888439308","channel_id":"1383489308085846157","author":{"id":"1410538819375202415","username":"fiery_monkey_64350","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"hl","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"message_reference":{"type":0,"channel_id":"1383489308085846157","message_id":"1419602831677329438","guild_id":"1212332642801025064"},"position":6,"referenced_message":{"type":0,"content":"I have not tested this fully but doing something like this might work\n\n```\nfrom infrahub_sdk import InfrahubCheck, InfrahubClient\nfrom infrahub_sdk.ctl.utils import execute_graphql_query\n\nclient = InfrahubClient()\ncheck = InfrahubCheck(client=client, params=params, output=\"stdout\", root_directory=\".\", branch=\"main\")\n\ndata = execute_graphql_query(\n    query=check.query,\n    variables_dict=check.params,\n    repository_config=repository_config,\n    branch=\"main\",\n    debug=False,\n)\n\npassed = await check.run(data)\n```\n\nYou can see in the SDK how we run the checks: https://github.com/opsmill/infrahub-sdk-python/blob/stable/infrahub_sdk/ctl/check.py#L131","mentions":[],"mention_roles":[],"attachments":[],"embeds":[{"type":"article","url":"https://github.com/opsmill/infrahub-sdk-python/blob/stable/infrahub_sdk/ctl/check.py","title":"infrahub-sdk-python/infrahub_sdk/ctl/check.py at stable · opsmill/...","description":"Python SDK to interact with Infrahub. Contribute to opsmill/infrahub-sdk-python development by creating an account on GitHub.","color":1975079,"provider":{"name":"GitHub"},"thumbnail":{"url":"https://repository-images.githubusercontent.com/854450553/d45e9de9-759c-4eda-bec9-a16767236566","proxy_url":"https://images-ext-1.discordapp.net/external/UiGUKAkP8BGeQp3VzGqvnUHvyJ3vEjunauFxuMk9EHo/https/repository-images.githubusercontent.com/854450553/d45e9de9-759c-4eda-bec9-a16767236566","width":1280,"height":640,"content_type":"image/png","placeholder":"z6YJHIh4d3h/iIdmiIiGcGUIVw==","placeholder_version":1,"description":"Python SDK to interact with Infrahub. Contribute to opsmill/infrahub-sdk-python development by creating an account on GitHub.","flags":0},"content_scan_version":2}],"timestamp":"2025-09-22T08:34:50.017000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1419602831677329438","channel_id":"1383489308085846157","author":{"id":"227091130561331200","username":"minitriga.","avatar":"71ac6f8da9c358794381d5d430c53316","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Alex Gittings","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":5}},{"type":0,"content":"I have not tested this fully but doing something like this might work\n\n```\nfrom infrahub_sdk import InfrahubCheck, InfrahubClient\nfrom infrahub_sdk.ctl.utils import execute_graphql_query\n\nclient = InfrahubClient()\ncheck = InfrahubCheck(client=client, params=params, output=\"stdout\", root_directory=\".\", branch=\"main\")\n\ndata = execute_graphql_query(\n    query=check.query,\n    variables_dict=check.params,\n    repository_config=repository_config,\n    branch=\"main\",\n    debug=False,\n)\n\npassed = await check.run(data)\n```\n\nYou can see in the SDK how we run the checks: https://github.com/opsmill/infrahub-sdk-python/blob/stable/infrahub_sdk/ctl/check.py#L131","mentions":[],"mention_roles":[],"attachments":[],"embeds":[{"type":"article","url":"https://github.com/opsmill/infrahub-sdk-python/blob/stable/infrahub_sdk/ctl/check.py","title":"infrahub-sdk-python/infrahub_sdk/ctl/check.py at stable · opsmill/...","description":"Python SDK to interact with Infrahub. Contribute to opsmill/infrahub-sdk-python development by creating an account on GitHub.","color":1975079,"provider":{"name":"GitHub"},"thumbnail":{"url":"https://repository-images.githubusercontent.com/854450553/d45e9de9-759c-4eda-bec9-a16767236566","proxy_url":"https://images-ext-1.discordapp.net/external/UiGUKAkP8BGeQp3VzGqvnUHvyJ3vEjunauFxuMk9EHo/https/repository-images.githubusercontent.com/854450553/d45e9de9-759c-4eda-bec9-a16767236566","width":1280,"height":640,"content_type":"image/png","placeholder":"z6YJHIh4d3h/iIdmiIiGcGUIVw==","placeholder_version":1,"description":"Python SDK to interact with Infrahub. Contribute to opsmill/infrahub-sdk-python development by creating an account on GitHub.","flags":0},"content_scan_version":2}],"timestamp":"2025-09-22T08:34:50.017000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1419602831677329438","channel_id":"1383489308085846157","author":{"id":"227091130561331200","username":"minitriga.","avatar":"71ac6f8da9c358794381d5d430c53316","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Alex Gittings","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":5},{"type":0,"content":"i see that check_definitions do have parameters to be pass in for files_path to be use in the python script which the value will be pass into via infrahubctl command line as VARIABLES. is there a way to pass parameters in infrahub-sdk programmatically way? my ideal here is to get VARIABLES from yml file and then i load in dynamic variables to check as what I defined.","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-09-19T05:38:34.767000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1418471312267149325","channel_id":"1383489308085846157","author":{"id":"1410538819375202415","username":"fiery_monkey_64350","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"hl","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":4},{"type":0,"content":"No problem. Here is an issue on the SDK that I created for this: https://github.com/opsmill/infrahub-sdk-python/issues/445","mentions":[],"mention_roles":[],"attachments":[],"embeds":[{"type":"article","url":"https://github.com/opsmill/infrahub-sdk-python/issues/445","title":"bug: Check attempts to use the parameter key, but runs into `Attrib...","description":"Component infrahubctl Infrahub SDK version 1.13.0 Current Behavior A PC check run will properly grab the correct attribute on an InfrahubNode based on the value of the parameter, but infrahubctl at...","color":1975079,"provider":{"name":"GitHub"},"thumbnail":{"url":"https://opengraph.githubassets.com/806b34a974e602bd32115b5f6d7b7ba79c482ac4da0c0093037955d896dcf3ed/opsmill/infrahub-sdk-python/issues/445","proxy_url":"https://images-ext-1.discordapp.net/external/vHh4VkmK2u7T04HiktMNQMxDX-1qJ3iz4f5QoupXifg/https/opengraph.githubassets.com/806b34a974e602bd32115b5f6d7b7ba79c482ac4da0c0093037955d896dcf3ed/opsmill/infrahub-sdk-python/issues/445","width":1200,"height":600,"content_type":"image/png","placeholder":"+vcFDIKGiqeah3iZZn+Hf3D4CA==","placeholder_version":1,"flags":0},"content_scan_version":2}],"timestamp":"2025-06-14T21:03:51.677000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1383552544101367909","channel_id":"1383489308085846157","author":{"id":"370964598284746752","username":"foolproofalibi","avatar":"51c8acd4dcd60cb1cea707612872daf5","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Foolproofalibi","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":3},{"type":0,"content":"Can confirm that changing the variable to just name works for both. Thanks <@370964598284746752>","mentions":[{"id":"370964598284746752","username":"foolproofalibi","avatar":"51c8acd4dcd60cb1cea707612872daf5","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Foolproofalibi","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null}],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-06-14T21:02:41.660000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1383552250429046997","channel_id":"1383489308085846157","author":{"id":"811281824768458793","username":"matej3653","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Matej Lanca","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false,"position":2},{"type":0,"content":"For now, I'd set it to `name: \"name__value\"` and update the variable in the GQL to be `name` as well.\n\nI think it might be an issue between how a check is ran in a PC compared to CTL. I'm exploring that now.","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-06-14T20:47:13.212000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1383548356235890739","channel_id":"1383489308085846157","author":{"id":"370964598284746752","username":"foolproofalibi","avatar":"51c8acd4dcd60cb1cea707612872daf5","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Foolproofalibi","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":1},{"type":0,"content":"If you change it from `application_name` to just `name`, does that work in both a PC and CTL?","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-06-14T20:33:58.731000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1383545023941050409","channel_id":"1383489308085846157","author":{"id":"370964598284746752","username":"foolproofalibi","avatar":"51c8acd4dcd60cb1cea707612872daf5","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Foolproofalibi","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false},{"type":0,"content":"Hello team,\nI have the following check definition\n```\ncheck_definitions:\n  - name: \"netauto_application_check\"\n    class_name: \"NetautoApplicationCheck\"\n    file_path: \"checks/NetautoApplicationCheck.py\"\n    targets: \"F5Applications\"\n    parameters:\n      application_name: \"name__value\"\n```\nWhen running this check via PC it works as expected and each object in F5Applications group passes name__value as application_name parameter to the check query.\nHowever when running it via infrahubctl check it produces the following error\n```\ninfrahubctl check netauto_application_check  \nError: 'InfrahubNode' object has no attribute 'application_name'\n```\nrunning it while specifying the parameter works, but beats the purpose of a targeted check\n```\ninfrahubctl check netauto_application_check application_name=flex-1\n```\nThe [docs check guide](https://docs.infrahub.app/guides/check#11-test-the-new-check) gave me the impression that the targeted check should not need the query parameters passed on CLI.\n\ninfrahubctl version\nPython: 3.10.18\nPython SDK: v1.13.0","mentions":[],"mention_roles":[],"attachments":[],"embeds":[{"type":"article","url":"https://docs.infrahub.app/guides/check","title":"Creating a Check | Infrahub Documentation","description":"Creating a Check","content_scan_version":2}],"timestamp":"2025-06-14T16:52:35.036000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1383489308085846157","channel_id":"1383489308085846157","author":{"id":"811281824768458793","username":"matej3653","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Matej Lanca","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false}]}