{"thread":{"id":"1402920858498105424","type":11,"last_message_id":"1419262369619513377","flags":0,"guild_id":"1212332642801025064","name":"Achieving Idempotence with NumberPools When Identifier Setting is Not Available","parent_id":"1301914405176475729","rate_limit_per_user":0,"bitrate":64000,"user_limit":0,"rtc_region":null,"owner_id":"1254387763982106755","thread_metadata":{"archived":true,"archive_timestamp":"2025-10-21T10:04:54.646000+00:00","auto_archive_duration":4320,"locked":false,"create_timestamp":"2025-08-07T07:46:37.675000+00:00"},"message_count":33,"member_count":5,"total_message_sent":35,"applied_tags":["1301914968001744937","1304062537364410420","1304062588858007572"]},"messages":[{"type":0,"content":"<@655596743605485570> we've flagged some of these issues as high priority, and there's some related issues, and they all need a bit of investigation, so it'll take a bit of time. I'll keep you posted.","mentions":[{"id":"655596743605485570","username":"overloadbit","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"overloadbit","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null}],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-09-21T10:01:57.537000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1419262369619513377","channel_id":"1402920858498105424","author":{"id":"1212726983944052798","username":"pete_crocker","avatar":"2ce15ce78115631a666e77b58952f91e","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Pete Crocker","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false,"position":34,"reactions":[{"emoji":{"id":null,"name":""},"count":2,"count_details":{"burst":0,"normal":2},"burst_colors":[],"me_burst":false,"burst_me":false,"me":false,"burst_count":0}]},{"type":0,"content":"thanks Alex","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-08-14T12:07:51.973000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1405523316327841813","channel_id":"1402920858498105424","author":{"id":"655596743605485570","username":"overloadbit","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"overloadbit","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":33},{"type":0,"content":"ahh <@655596743605485570> my appologies it looks like using\n\n```\n    \"primary_address\": {\"from_pool\": {\"id\": pool.id}},\n```\n\nFor both number pool and prefixes is not supported in the SDK. What you would need to do for prefix is use https://docs.infrahub.app/python-sdk/guides/resource-manager#direct-allocation-of-a-resource for prefixes and we dont have an equivilent for numberpools yet but we do have a feature request for it. https://github.com/opsmill/infrahub-sdk-python/issues/396","mentions":[{"id":"655596743605485570","username":"overloadbit","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"overloadbit","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null}],"mention_roles":[],"attachments":[],"embeds":[{"type":"article","url":"https://github.com/opsmill/infrahub-sdk-python/issues/396","title":"feature: Add identifier support for number pools in SDK 路 Issue #3...","description":"Component Python SDK Describe the Feature Request Add support for using an identifier when allocating numbers from a number pool in the Python SDK, similar to how it works with IP addresses and IP ...","color":1975079,"provider":{"name":"GitHub"},"content_scan_version":2},{"type":"article","url":"https://docs.infrahub.app/python-sdk/guides/resource-manager","title":"Using Resource Managers | Infrahub Documentation","description":"The goal of this guide is to show you how to create a resource pool using the Python SDK, and how you can allocated resources with them.","content_scan_version":2}],"timestamp":"2025-08-14T11:09:22.263000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1405508595537416337","channel_id":"1402920858498105424","author":{"id":"227091130561331200","username":"minitriga.","avatar":"71ac6f8da9c358794381d5d430c53316","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Alex Gittings","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":32},{"type":0,"content":"So we have a few issues here: \n\n- backend not storing identifier when using manual graphql https://github.com/opsmill/infrahub/issues/7036\n- SDK generating incorrect Graphql when using \"from_pool\" (we would expect that the previous issue is also resolved) https://github.com/opsmill/infrahub-sdk-python/issues/497\n- SDK upserts using numberpools causing error: https://github.com/opsmill/infrahub-sdk-python/issues/339","mentions":[],"mention_roles":[],"attachments":[],"embeds":[{"type":"article","url":"https://github.com/opsmill/infrahub/issues/7036","title":"bug: Identifier is not stored when using Number Pools 路 Issue #703...","description":"Component API Server / GraphQL Infrahub version v1.3.4 Current Behavior Currently on demo.infrahub.app If I have a number pool and want to assign a number pool using an identifier so that new numbe...","color":1975079,"provider":{"name":"GitHub"},"thumbnail":{"url":"https://opengraph.githubassets.com/bb88057dd03601eea6bca2a41a25823ee1fa74d2b619fc99a8f84ba7cbed2021/opsmill/infrahub/issues/7036","proxy_url":"https://images-ext-1.discordapp.net/external/L1xbeLMFDsNkZvB2QO__eBmRc0stEjtktR-qOBMsmXw/https/opengraph.githubassets.com/bb88057dd03601eea6bca2a41a25823ee1fa74d2b619fc99a8f84ba7cbed2021/opsmill/infrahub/issues/7036","width":1200,"height":600,"description":"Component API Server / GraphQL Infrahub version v1.3.4 Current Behavior Currently on demo.infrahub.app If I have a number pool and want to assign a number pool using an identifier so that new numbe...","flags":0},"content_scan_version":2},{"type":"article","url":"https://github.com/opsmill/infrahub-sdk-python/issues/497","title":"bug: Client does not support from_pool on number fields 路 Issue #4...","description":"Component No response Infrahub SDK version 1.13.5 Current Behavior When using the SDK I would like to specify a number pool identifier to be idempotent when assigning number pools. However using th...","color":1975079,"provider":{"name":"GitHub"},"thumbnail":{"url":"https://opengraph.githubassets.com/27cabd15df2df53d62ad1ede85221558213494ff84930354fabbfa483b095b1e/opsmill/infrahub-sdk-python/issues/497","proxy_url":"https://images-ext-1.discordapp.net/external/CdUGIlVqxiOpgBWxCz8t1OX0tSgehQp_75lOlkDUkiU/https/opengraph.githubassets.com/27cabd15df2df53d62ad1ede85221558213494ff84930354fabbfa483b095b1e/opsmill/infrahub-sdk-python/issues/497","width":1200,"height":600,"description":"Component No response Infrahub SDK version 1.13.5 Current Behavior When using the SDK I would like to specify a number pool identifier to be idempotent when assigning number pools. However using th...","flags":0},"content_scan_version":2},{"type":"article","url":"https://github.com/opsmill/infrahub-sdk-python/issues/339","title":"bug: Upsert not working for nodes that are assigning an attribute v...","description":"Component Python SDK Infrahub SDK version 1.10.0 Current Behavior Whenever we attempt to create an object such as a VLAN in an idempotent way when an attribute can use a CoreNumberPool such as vlan...","color":1975079,"provider":{"name":"GitHub"},"thumbnail":{"url":"https://opengraph.githubassets.com/538200b32348bd9cf549a8d2017191c3d95245b78e5856927f0b6108cafc1b5c/opsmill/infrahub-sdk-python/issues/339","proxy_url":"https://images-ext-1.discordapp.net/external/ncyibLp-FXe2GK85LKdvlbomioHclGKIFTTd3lI1WAM/https/opengraph.githubassets.com/538200b32348bd9cf549a8d2017191c3d95245b78e5856927f0b6108cafc1b5c/opsmill/infrahub-sdk-python/issues/339","width":1200,"height":600,"content_type":"image/png","placeholder":"+vcJDIKHiqeJh3iIZn+Hf3D4CA==","placeholder_version":1,"flags":0},"content_scan_version":2}],"timestamp":"2025-08-14T10:50:32.023000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1405503854967132191","channel_id":"1402920858498105424","author":{"id":"227091130561331200","username":"minitriga.","avatar":"71ac6f8da9c358794381d5d430c53316","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Alex Gittings","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":31},{"type":0,"content":"Bug created for the incorrect graphql in the SDK: https://github.com/opsmill/infrahub-sdk-python/issues/497","mentions":[],"mention_roles":[],"attachments":[],"embeds":[{"type":"article","url":"https://github.com/opsmill/infrahub-sdk-python/issues/497","title":"bug: Client does not support from_pool on number fields 路 Issue #4...","description":"Component No response Infrahub SDK version 1.13.5 Current Behavior When using the SDK I would like to specify a number pool identifier to be idempotent when assigning number pools. However using th...","color":1975079,"provider":{"name":"GitHub"},"thumbnail":{"url":"https://opengraph.githubassets.com/27cabd15df2df53d62ad1ede85221558213494ff84930354fabbfa483b095b1e/opsmill/infrahub-sdk-python/issues/497","proxy_url":"https://images-ext-1.discordapp.net/external/CdUGIlVqxiOpgBWxCz8t1OX0tSgehQp_75lOlkDUkiU/https/opengraph.githubassets.com/27cabd15df2df53d62ad1ede85221558213494ff84930354fabbfa483b095b1e/opsmill/infrahub-sdk-python/issues/497","width":1200,"height":600,"description":"Component No response Infrahub SDK version 1.13.5 Current Behavior When using the SDK I would like to specify a number pool identifier to be idempotent when assigning number pools. However using th...","flags":0},"content_scan_version":2}],"timestamp":"2025-08-14T10:46:59.813000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1405502964893876315","channel_id":"1402920858498105424","author":{"id":"227091130561331200","username":"minitriga.","avatar":"71ac6f8da9c358794381d5d430c53316","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Alex Gittings","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":30},{"type":0,"content":"i am guessing issue 339 will also address the sdk limitation of not able to specify any additional metadata like identifier","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-08-14T10:44:49.676000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1405502419059609621","channel_id":"1402920858498105424","author":{"id":"655596743605485570","username":"overloadbit","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"overloadbit","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":29},{"type":0,"content":"Two things. \n\nLooks like number pools are not supported with specifying the \"from_pool\" like they are with IP and Prefix resource managers. \n\nAnd if you use a number pool using just the pool without identifier using upserts we have another bug: https://github.com/opsmill/infrahub-sdk-python/issues/339","mentions":[],"mention_roles":[],"attachments":[],"embeds":[{"type":"article","url":"https://github.com/opsmill/infrahub-sdk-python/issues/339","title":"bug: Upsert not working for nodes that are assigning an attribute v...","description":"Component Python SDK Infrahub SDK version 1.10.0 Current Behavior Whenever we attempt to create an object such as a VLAN in an idempotent way when an attribute can use a CoreNumberPool such as vlan...","color":1975079,"provider":{"name":"GitHub"},"thumbnail":{"url":"https://opengraph.githubassets.com/538200b32348bd9cf549a8d2017191c3d95245b78e5856927f0b6108cafc1b5c/opsmill/infrahub-sdk-python/issues/339","proxy_url":"https://images-ext-1.discordapp.net/external/ncyibLp-FXe2GK85LKdvlbomioHclGKIFTTd3lI1WAM/https/opengraph.githubassets.com/538200b32348bd9cf549a8d2017191c3d95245b78e5856927f0b6108cafc1b5c/opsmill/infrahub-sdk-python/issues/339","width":1200,"height":600,"content_type":"image/png","placeholder":"+vcJDIKHiqeJh3iIZn+Hf3D4CA==","placeholder_version":1,"flags":0},"content_scan_version":2}],"timestamp":"2025-08-14T10:38:29.137000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1405500822963359857","channel_id":"1402920858498105424","author":{"id":"227091130561331200","username":"minitriga.","avatar":"71ac6f8da9c358794381d5d430c53316","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Alex Gittings","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":28},{"type":0,"content":"its a pydantic model which gets serialized into a dict before passing onto the client's create method","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-08-14T10:07:08.813000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1405492936313143306","channel_id":"1402920858498105424","author":{"id":"655596743605485570","username":"overloadbit","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"overloadbit","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":27},{"type":0,"content":"Is Interface a protocol?","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-08-14T10:06:10.535000+00:00","edited_timestamp":"2025-08-14T10:06:16.588000+00:00","flags":0,"components":[],"id":"1405492691877367870","channel_id":"1402920858498105424","author":{"id":"227091130561331200","username":"minitriga.","avatar":"71ac6f8da9c358794381d5d430c53316","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Alex Gittings","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":26},{"type":0,"content":"let me know if you need more information","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-08-14T10:05:55.136000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1405492627289149452","channel_id":"1402920858498105424","author":{"id":"655596743605485570","username":"overloadbit","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"overloadbit","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":25},{"type":0,"content":"```interfaces[\"foobar\"] = (\n    Interface(\n        <snipped>\n        port_channel_identifier={\n            \"from_pool\": {\n                \"id\": pool.id,\n                \"identifier\": \"foobar\",  # noqa: E501\n            }\n        },\n        <snipped>\n    )\n)```","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-08-14T10:05:19.285000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1405492476919156766","channel_id":"1402920858498105424","author":{"id":"655596743605485570","username":"overloadbit","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"overloadbit","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":24},{"type":0,"content":"so there is a bug with the sdk itself, you can see it has added a `value` key before `from_pool`","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-08-14T10:02:49.380000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1405491848172273796","channel_id":"1402920858498105424","author":{"id":"655596743605485570","username":"overloadbit","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"overloadbit","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":23},{"type":0,"content":"Yeah thats not right. And the python snippet?","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-08-14T10:02:41.502000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1405491815129284711","channel_id":"1402920858498105424","author":{"id":"227091130561331200","username":"minitriga.","avatar":"71ac6f8da9c358794381d5d430c53316","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Alex Gittings","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":22},{"type":0,"content":"```\n An error occurred while executing the GraphQL Query\nmutation ($value_185b62236aad9b8063362d69d1f3badb: String!) {\n    InfraInterfaceUpsert(\n        data: {\n            ipv6_nd_ra: {\n                value: false\n            }\n            ipv6_enabled: {\n                value: false\n            }\n            enabled: {\n                value: true\n            }\n            mtu: {\n                value: 1500\n            }\n            load_interval: {\n                value: 10\n            }\n            flowspec: {\n                value: false\n            }\n            switchport: {\n                value: false\n            }\n            port_channel_identifier: {\n                value: {\n                    from_pool: {\n                        id: \"185b4b7f-9a41-59bb-106f-10659cc8fdb7\"\n                        identifier: \"foobar\"\n                    }\n                }\n            }\n            lacp: {\n                value: \"active\"\n            }\n            name: {\n                value: \"Port-ChannelX0\"\n            }\n            description: {\n                value: $value_185b62236aad9b8063362d69d1f3badb\n            }\n            interface_type: {\n                value: \"logical\"\n            }\n            status: {\n                value: \"active\"\n            }\n            role: {\n                value: \"ipt\"\n            }\n            device: {\n                id: \"foobar\"\n            }\n            ip_addresses: [\n                {\n                    id: \"x.x.147.18/30\"\n                },\n                {\n                    id: \"2001:xxx:2000:5000::37e/126\"\n                },\n            ]\n            provider: {\n                id: \"foo\"\n            }\n        }\n    ){\n        ok\n        object {\n            id\n        }\n    }\n}\n, [{'message': 'Expected value of type \\'BigInt\\', found {from_pool: {id: \"185b4b7f-9a41-59bb-106f-10659cc8fdb7\", identifier: \"nrt5.ecore1-0-0-NTT-ipt\"}}.', 'locations': [{'line': 27, 'column': 24}]}]```","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-08-14T10:02:01.029000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1405491645373222942","channel_id":"1402920858498105424","author":{"id":"655596743605485570","username":"overloadbit","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"overloadbit","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":21},{"type":0,"content":"Here's the generated mutation query from sdk","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-08-14T10:01:42.720000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1405491568579842098","channel_id":"1402920858498105424","author":{"id":"655596743605485570","username":"overloadbit","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"overloadbit","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":19},{"type":0,"content":"I have created an issue for this: https://github.com/opsmill/infrahub/issues/7036","mentions":[],"mention_roles":[],"attachments":[],"embeds":[{"type":"article","url":"https://github.com/opsmill/infrahub/issues/7036","title":"bug: Identifier is not stored when using Number Pools 路 Issue #703...","description":"Component API Server / GraphQL Infrahub version v1.3.4 Current Behavior Currently on demo.infrahub.app If I have a number pool and want to assign a number pool using an identifier so that new numbe...","color":1975079,"provider":{"name":"GitHub"},"thumbnail":{"url":"https://opengraph.githubassets.com/bb88057dd03601eea6bca2a41a25823ee1fa74d2b619fc99a8f84ba7cbed2021/opsmill/infrahub/issues/7036","proxy_url":"https://images-ext-1.discordapp.net/external/L1xbeLMFDsNkZvB2QO__eBmRc0stEjtktR-qOBMsmXw/https/opengraph.githubassets.com/bb88057dd03601eea6bca2a41a25823ee1fa74d2b619fc99a8f84ba7cbed2021/opsmill/infrahub/issues/7036","width":1200,"height":600,"description":"Component API Server / GraphQL Infrahub version v1.3.4 Current Behavior Currently on demo.infrahub.app If I have a number pool and want to assign a number pool using an identifier so that new numbe...","flags":0},"content_scan_version":2}],"timestamp":"2025-08-14T09:16:17.160000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1405480136752496650","channel_id":"1402920858498105424","author":{"id":"227091130561331200","username":"minitriga.","avatar":"71ac6f8da9c358794381d5d430c53316","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Alex Gittings","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":18},{"type":19,"content":"I'll share it in the morning but its basically a numberpool attached to an attribute","mentions":[{"id":"1254387763982106755","username":"tomek_79993","avatar":"ee65e170c3ce092e2492985d62ee298d","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Tomek","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null}],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-08-13T22:13:09.445000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1405313254980456531","channel_id":"1402920858498105424","author":{"id":"655596743605485570","username":"overloadbit","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"overloadbit","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"message_reference":{"type":0,"channel_id":"1402920858498105424","message_id":"1405285549656244345","guild_id":"1212332642801025064"},"position":17,"referenced_message":{"type":0,"content":"<@227091130561331200> I was also not succesfull using API when I had more elements in HFID , <@655596743605485570>  how your schema looks like ?","mentions":[{"id":"227091130561331200","username":"minitriga.","avatar":"71ac6f8da9c358794381d5d430c53316","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Alex Gittings","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},{"id":"655596743605485570","username":"overloadbit","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"overloadbit","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null}],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-08-13T20:23:03.981000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1405285549656244345","channel_id":"1402920858498105424","author":{"id":"1254387763982106755","username":"tomek_79993","avatar":"ee65e170c3ce092e2492985d62ee298d","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Tomek","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":13}},{"type":0,"content":"While setting it via the sdk, there is an extra key `value` before  `from_pool`","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-08-13T22:11:49.304000+00:00","edited_timestamp":"2025-08-13T22:12:10.245000+00:00","flags":0,"components":[],"id":"1405312918844608612","channel_id":"1402920858498105424","author":{"id":"655596743605485570","username":"overloadbit","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"overloadbit","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":16},{"type":0,"content":"Just tested out \n\n```\nmutation MyMutation {\n  InfraVLANCreate(\n    data: {name: {value: \"test\"}, vlan_id: {from_pool: {id: \"185b570c-0c28-3fcc-d139-106577ce51c6\", identifier: \"test-identifier\"}}, role: {value: \"user\"}, status: {value: \"active\"}}\n  ) {\n    ok\n    object {\n      id\n    }\n  }\n}\n```\non demo.infrahub.app and can indeed see that identifier is not set. I will create a bug report in the morning for the backend team I believe this should work.","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-08-13T20:46:26.072000+00:00","edited_timestamp":"2025-08-13T20:46:39.018000+00:00","flags":0,"components":[],"id":"1405291430452396072","channel_id":"1402920858498105424","author":{"id":"227091130561331200","username":"minitriga.","avatar":"71ac6f8da9c358794381d5d430c53316","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Alex Gittings","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":14,"reactions":[{"emoji":{"id":null,"name":""},"count":1,"count_details":{"burst":0,"normal":1},"burst_colors":[],"me_burst":false,"burst_me":false,"me":false,"burst_count":0}]},{"type":0,"content":"<@227091130561331200> I was also not succesfull using API when I had more elements in HFID , <@655596743605485570>  how your schema looks like ?","mentions":[{"id":"227091130561331200","username":"minitriga.","avatar":"71ac6f8da9c358794381d5d430c53316","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Alex Gittings","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},{"id":"655596743605485570","username":"overloadbit","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"overloadbit","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null}],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-08-13T20:23:03.981000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1405285549656244345","channel_id":"1402920858498105424","author":{"id":"1254387763982106755","username":"tomek_79993","avatar":"ee65e170c3ce092e2492985d62ee298d","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Tomek","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":13},{"type":0,"content":"have you got the snippet of code for me?","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-08-13T18:15:22.114000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1405253413456969791","channel_id":"1402920858498105424","author":{"id":"227091130561331200","username":"minitriga.","avatar":"71ac6f8da9c358794381d5d430c53316","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Alex Gittings","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":12},{"type":0,"content":"<@227091130561331200> are you sure this works as I am getting the below error\n\n```[{'message': 'Expected value of type \\'BigInt\\', found {from_pool: {id: \"185b4b7f-9a41-59bb-106f-10659cc8fdb7\", identifier: \"foobar}}.', 'locations': [{'line': 27, 'column': 24}]}]```","mentions":[{"id":"227091130561331200","username":"minitriga.","avatar":"71ac6f8da9c358794381d5d430c53316","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Alex Gittings","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null}],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-08-13T17:05:52.610000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1405235925289799747","channel_id":"1402920858498105424","author":{"id":"655596743605485570","username":"overloadbit","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"overloadbit","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":11},{"type":0,"content":"thanks alex, let me try this","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-08-13T14:19:35.188000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1405194076948533319","channel_id":"1402920858498105424","author":{"id":"655596743605485570","username":"overloadbit","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"overloadbit","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":10},{"type":0,"content":"For the SDK \n\nYou could do something like this:\n\n```\nclient = InfrahubClient()\ndata = {\n  \"kind\": \"IpamVLAN\",\n  \"vlan_id\": {\"from_pool\": {\"id\": <pool_id>, \"identifier\": \"unique_id\"}\n}\nvlan = client.create(**data)\nvlan.save()\n```","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-08-13T13:42:33.504000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1405184758530445525","channel_id":"1402920858498105424","author":{"id":"227091130561331200","username":"minitriga.","avatar":"71ac6f8da9c358794381d5d430c53316","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Alex Gittings","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":9},{"type":0,"content":"Testing out AI Generated response based on our docs btw which is accurate.","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-08-13T13:39:41.029000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1405184035117858940","channel_id":"1402920858498105424","author":{"id":"227091130561331200","username":"minitriga.","avatar":"71ac6f8da9c358794381d5d430c53316","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Alex Gittings","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":8,"reactions":[{"emoji":{"id":null,"name":""},"count":1,"count_details":{"burst":0,"normal":1},"burst_colors":[],"me_burst":false,"burst_me":false,"me":false,"burst_count":0}]},{"type":0,"content":"For CoreNumberPool specifically, the documentation shows the same idempotent allocation pattern using the identifier field1.\n\nWhen allocating from a number pool during object creation, you can include an identifier in the from_pool structure:\n```\ngraphql\n  mutation {  \n    IpamVLANCreate(  \n      data: {  \n        name: {value: \"My vlan\"}  \n        vlan_id: {from_pool: {id: \"<POOL-ID>\", identifier: \"my-lag-id\"}}  \n      }  \n    ) {  \n      ok  \n      object {  \n        name {  \n        value  \n      }  \n      vlan_id {  \n        value  \n      }  \n      id  \n    }  \n  }  \n}  \n```\nThe documentation explains that \"when you allocated to a relationship of a node, the resource allocation happens in an idempotent way. An identifier is automatically assigned to the resource allocation in this case\"2. However, for explicit control over the identifier, you can specify it manually as shown above.\n\nThe identifier parameter ensures that \"the same resource will be returned on repeated calls\"3, which is exactly what you need for idempotent allocation of lag-ids or other numeric attributes from a CoreNumberPool.","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-08-13T13:38:12.795000+00:00","edited_timestamp":"2025-08-13T13:39:17.964000+00:00","flags":0,"components":[],"id":"1405183665037774968","channel_id":"1402920858498105424","author":{"id":"227091130561331200","username":"minitriga.","avatar":"71ac6f8da9c358794381d5d430c53316","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Alex Gittings","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":7},{"type":0,"content":"<@1259824777879752785> sorry for bringing up this topic from the dead but how can i do idempotent allocation for a CoreNumberPool for something like a simple lag-id (just an attribute and not a relationship)\n\nCurrently when a number is allocated from the pool, it does not get any identifier by default and remains empty so there is no easy way to make sure we get the same number if i run it again.","mentions":[{"id":"1259824777879752785","username":"baptiste_pro_38742","avatar":"6270c0e83569e285aefb7d8f0535f392","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Baptiste","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}}],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-08-13T12:37:58.594000+00:00","edited_timestamp":"2025-08-13T12:38:15.167000+00:00","flags":0,"components":[],"id":"1405168505980190760","channel_id":"1402920858498105424","author":{"id":"655596743605485570","username":"overloadbit","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"overloadbit","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":6},{"type":0,"content":"that make sense ... works as expected, thanks!","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-08-07T09:25:05.671000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1402945638429233202","channel_id":"1402920858498105424","author":{"id":"1254387763982106755","username":"tomek_79993","avatar":"ee65e170c3ce092e2492985d62ee298d","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Tomek","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":5,"reactions":[{"emoji":{"id":null,"name":""},"count":1,"count_details":{"burst":0,"normal":1},"burst_colors":[],"me_burst":false,"burst_me":false,"me":false,"burst_count":0},{"emoji":{"id":null,"name":""},"count":1,"count_details":{"burst":0,"normal":1},"burst_colors":[],"me_burst":false,"burst_me":false,"me":false,"burst_count":0}]},{"type":0,"content":"For example:\n\n```\n# yaml-language-server: $schema=https://schema.infrahub.app/infrahub/schema/latest.json\n---\nversion: \"1.0\"\n\nnodes:\n  - name: AutonomousSystem\n    namespace: Service\n    description: An Autonomous System (AS) is a set of Internet routable IP prefixes belonging to a network.\n    label: Autonomous System\n    icon: mdi:bank-circle-outline\n    display_labels:\n      - name__value\n    include_in_menu: true\n    menu_placement: ComputeBridgeNetwork\n    human_friendly_id:\n      - name__value\n      # - asn__value\n    # uniqueness_constraints:\n    #   - [name__value, asn__value]\n    attributes:\n      - name: asn\n        kind: Number\n        optional: false\n      - name: name\n        kind: Text\n        optional: false\n        unique: true\n```","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-08-07T09:00:30.745000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1402939452141211670","channel_id":"1402920858498105424","author":{"id":"1259824777879752785","username":"baptiste_pro_38742","avatar":"6270c0e83569e285aefb7d8f0535f392","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Baptiste","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false,"position":4,"reactions":[{"emoji":{"id":null,"name":""},"count":1,"count_details":{"burst":0,"normal":1},"burst_colors":[],"me_burst":false,"burst_me":false,"me":false,"burst_count":0}]},{"type":0,"content":"Looks like youre running into this limitation: https://github.com/opsmill/infrahub-sdk-python/issues/339\n\nInfrahub uses the HFID to identify records, and if part of that HFID is \"dynamic\", it ends up treating each one as a new object.\n\nOne way around this is to make the `name` field the unique identifier instead. That should let Infrahub handle each `AutonomousSystem` record properly.\n\nLet me know if that works for your setup.","mentions":[],"mention_roles":[],"attachments":[],"embeds":[{"type":"article","url":"https://github.com/opsmill/infrahub-sdk-python/issues/339","title":"bug: Upsert not working for nodes that are assigning an attribute v...","description":"Component Python SDK Infrahub SDK version 1.10.0 Current Behavior Whenever we attempt to create an object such as a VLAN in an idempotent way when an attribute can use a CoreNumberPool such as vlan...","color":1975079,"provider":{"name":"GitHub"},"thumbnail":{"url":"https://opengraph.githubassets.com/9e6be41908a679ee0123a751720aa4a71f8ba07b2be90b28335b2449fdf052fb/opsmill/infrahub-sdk-python/issues/339","proxy_url":"https://images-ext-1.discordapp.net/external/B-R7JeKx2jHzcOVvmiukcudcaD-23vjYT7rU8rLyVu0/https/opengraph.githubassets.com/9e6be41908a679ee0123a751720aa4a71f8ba07b2be90b28335b2449fdf052fb/opsmill/infrahub-sdk-python/issues/339","width":1200,"height":600,"description":"Component Python SDK Infrahub SDK version 1.10.0 Current Behavior Whenever we attempt to create an object such as a VLAN in an idempotent way when an attribute can use a CoreNumberPool such as vlan...","flags":0},"content_scan_version":2}],"timestamp":"2025-08-07T09:00:01.311000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1402939328685936732","channel_id":"1402920858498105424","author":{"id":"1259824777879752785","username":"baptiste_pro_38742","avatar":"6270c0e83569e285aefb7d8f0535f392","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Baptiste","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false,"position":3},{"type":0,"content":"Ok, I'm looking into it I'll keep you updated ","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-08-07T08:20:58.448000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1402929502006411264","channel_id":"1402920858498105424","author":{"id":"1259824777879752785","username":"baptiste_pro_38742","avatar":"6270c0e83569e285aefb7d8f0535f392","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Baptiste","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false,"position":2,"reactions":[{"emoji":{"id":null,"name":""},"count":1,"count_details":{"burst":0,"normal":1},"burst_colors":[],"me_burst":false,"burst_me":false,"me":false,"burst_count":0}]},{"type":0,"content":"nodes:\n  - name: AutonomousSystem\n    namespace: Service\n    description: An Autonomous System (AS) is a set of Internet routable IP prefixes belonging to a network\n    label: Autonomous System\n    icon: mdi:bank-circle-outline\n    menu_placement: ServiceBGPSession\n    inherit_from:\n      - ServiceGeneric    \n    uniqueness_constraints:\n**      - [\"asn__value\", \"name__value\"]**","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-08-07T08:13:03.892000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1402927511574413313","channel_id":"1402920858498105424","author":{"id":"1254387763982106755","username":"tomek_79993","avatar":"ee65e170c3ce092e2492985d62ee298d","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Tomek","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":1,"reactions":[{"emoji":{"id":null,"name":""},"count":1,"count_details":{"burst":0,"normal":1},"burst_colors":[],"me_burst":false,"burst_me":false,"me":false,"burst_count":0}]},{"type":0,"content":"Hey Tomek, what's the uniqueness contraint / hfid on you `ServiceAutonomousSystem` node?","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-08-07T08:05:59.361000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1402925730962215015","channel_id":"1402920858498105424","author":{"id":"1259824777879752785","username":"baptiste_pro_38742","avatar":"6270c0e83569e285aefb7d8f0535f392","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Baptiste","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false},{"type":0,"content":"I'm working with InfrahubSDK's NumberPools in my network automation project and facing a challenge with idempotence. In most allocation scenarios, we can achieve idempotence by providing an identifier:\n\n\n`      router_id = await self.client.allocate_next_ip_address(\n       resource_pool=self.client.store.get(key=\"loopback_ip_pool\", kind=CoreIPAddressPool),\n       identifier=f\"{device.name.value}-loopback0\"  # This ensures idempotence\n       )\n`\n\nHowever, I'm encountering situations where I need to allocate resources from a NumberPool (like ASN allocations) where:\n\nThe identifier parameter isn't applicable or meaningful\nI still need the allocations to be idempotent across multiple runs\nThe allocation needs to be deterministic based on other parameters\nFor example, when allocating ASNs for a topology:\n\n\n`      asn_pool = await self.client.get(\n       kind=\"CoreNumberPool\",\n       name__value=\"PRIVATE-ASN4\",\n       raise_when_missing=False,\n       branch=self.branch,\n     )\n      # How to make this allocation idempotent without  function like ?\n       asn = await self.client.allocate_from_number_pool(resource_pool=asn_pool, identifier=\"my-identifier\")`\n\n\n\n\nWhat are the recommended approaches to ensure idempotence in these scenarios? Are there alternative parameters or techniques to achieve consistent allocations when identifiers aren't available?\nAre we able to set the identifier parameters in the payload?\n\n`        await self._create(\n            kind=\"ServiceAutonomousSystem\",\n            data={\n                \"payload\": {\n                    \"name\": f\"{topology_name}-OVERLAY\",\n                    \"description\": f\"{topology_name} iBGP Overlay service\",\n                    \"asn\": asn_pool, # some extended payload ??\n                    \"status\": \"active\",\n                },\n                \"store_key\": f\"underlay-{topology_name}\",\n            },\n        )`\n\nThank you for any insights!","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-08-07T07:46:37.675000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1402920858498105424","channel_id":"1402920858498105424","author":{"id":"1254387763982106755","username":"tomek_79993","avatar":"ee65e170c3ce092e2492985d62ee298d","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Tomek","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"reactions":[{"emoji":{"id":null,"name":""},"count":1,"count_details":{"burst":0,"normal":1},"burst_colors":[],"me_burst":false,"burst_me":false,"me":false,"burst_count":0},{"emoji":{"id":null,"name":""},"count":1,"count_details":{"burst":0,"normal":1},"burst_colors":[],"me_burst":false,"burst_me":false,"me":false,"burst_count":0}]}]}