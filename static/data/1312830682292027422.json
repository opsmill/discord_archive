[{"thread":{"id":"1312830682292027422","type":11,"last_message_id":"1317177660404797500","flags":0,"guild_id":"1212332642801025064","name":"Synicing with a Git Repo crashed the prefect worker","parent_id":"1301914405176475729","rate_limit_per_user":0,"bitrate":64000,"user_limit":0,"rtc_region":null,"owner_id":"1300537046833692725","thread_metadata":{"archived":true,"archive_timestamp":"2025-01-12T17:18:47.367000+00:00","auto_archive_duration":4320,"locked":false,"create_timestamp":"2024-12-01T17:20:25.873000+00:00"},"message_count":5,"member_count":4,"total_message_sent":5,"applied_tags":["1301915235380363266","1304062716125773886","1305932861442097223"]},"messages":[{"type":0,"content":"FYI <@1300537046833692725> this has been fixed thanks to <@370964598284746752> and will be in a next release! https://github.com/opsmill/infrahub-sdk-python/issues/167","mentions":[{"id":"370964598284746752","username":"foolproofalibi","avatar":"51c8acd4dcd60cb1cea707612872daf5","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Foolproofalibi","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},{"id":"1300537046833692725","username":"simli133","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Simon linder","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null}],"mention_roles":[],"attachments":[],"embeds":[{"type":"article","url":"https://github.com/opsmill/infrahub-sdk-python/issues/167","title":"bug: Allow `infrahubctl repository add` without username to support...","description":"Component infrahubctl CLI Infrahub version 1.0.8 Current Behavior infrahubctl repository add GitlabInfrahub https://<private.gitlab.repo>/testinfrahubintegration.git --username \"\" -...","color":1975079,"provider":{"name":"GitHub"},"content_scan_version":2}],"timestamp":"2024-12-13T17:13:46.218000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1317177660404797500","channel_id":"1312830682292027422","author":{"id":"1212726983944052798","username":"pete_crocker","avatar":"2ce15ce78115631a666e77b58952f91e","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Pete Crocker","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false,"position":4},{"type":0,"content":"As it's for `infrahubctl`, I moved it to the python SDK repository https://github.com/opsmill/infrahub-sdk-python/issues/167","mentions":[],"mention_roles":[],"attachments":[],"embeds":[{"type":"article","url":"https://github.com/opsmill/infrahub-sdk-python/issues/167","title":"bug: Allow `infrahubctl repository add` without username to support...","description":"Component infrahubctl CLI Infrahub version 1.0.8 Current Behavior infrahubctl repository add GitlabInfrahub https://<private.gitlab.repo>/testinfrahubintegration.git --username \"\" -...","color":1975079,"provider":{"name":"GitHub"},"thumbnail":{"url":"https://opengraph.githubassets.com/84f16616c98c466e8bfd7fde33a689f60fad284900a7ec702e0d75ca3187274e/opsmill/infrahub-sdk-python/issues/167","proxy_url":"https://images-ext-1.discordapp.net/external/bAeVwyBPqVoF0ng52d8QQ5Knr5qsTvAM2JofvDHS3KE/https/opengraph.githubassets.com/84f16616c98c466e8bfd7fde33a689f60fad284900a7ec702e0d75ca3187274e/opsmill/infrahub-sdk-python/issues/167","width":1200,"height":600,"content_type":"image/png","placeholder":"+vcJDIJ2mqaZl2iYZ3+Hf2H4Fw==","placeholder_version":1,"flags":0},"content_scan_version":2}],"timestamp":"2024-12-09T21:38:42.213000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1315794781577674762","channel_id":"1312830682292027422","author":{"id":"1133022375051542558","username":"shabear_dis","avatar":"e5046d674427373d76e2dde9dc74feb5","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Benito","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":3,"reactions":[{"emoji":{"id":null,"name":"üôè"},"count":1,"count_details":{"burst":0,"normal":1},"burst_colors":[],"me_burst":false,"burst_me":false,"me":false,"burst_count":0}]},{"type":0,"content":"Hi <@1300537046833692725> apologies for the delay, I was OOO last week, and finally testing this. In my testing with GitHub, I verified that you do need to specify the correct username, or github can't figure out if the token is correct. With a GitLab private instance, I'm aware you don't need to specify username, and infrahubctl doesn't handle that gracefully. I've filed an issue for this, feel free to add anything to the ticket: https://github.com/opsmill/infrahub/issues/5165\nAnd thanks for submitting this!","mentions":[{"id":"1300537046833692725","username":"simli133","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Simon linder","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null}],"mention_roles":[],"attachments":[],"embeds":[{"type":"article","url":"https://github.com/opsmill/infrahub/issues/5165","title":"bug: Allow `infrahubctl repository add` without username to support...","description":"Component infrahubctl CLI Infrahub version 1.0.8 Current Behavior infrahubctl repository add GitlabInfrahub https://<private.gitlab.repo>/testinfrahubintegration.git --username \"\" -...","color":1975079,"provider":{"name":"GitHub"},"content_scan_version":2}],"timestamp":"2024-12-09T13:05:29.548000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1315665627779694645","channel_id":"1312830682292027422","author":{"id":"1212726983944052798","username":"pete_crocker","avatar":"2ce15ce78115631a666e77b58952f91e","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Pete Crocker","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false,"position":2,"reactions":[{"emoji":{"id":null,"name":"üëç"},"count":1,"count_details":{"burst":0,"normal":1},"burst_colors":[],"me_burst":false,"burst_me":false,"me":false,"burst_count":0}]},{"type":0,"content":"hi <@1212726983944052798> , in the newest version of infrahub the command `infrahubctl repository add GitlabInfrahub https://<private.gitlab.repo>/testinfrahubintegration.git --username \"something\" --password \"<accessTocken>\"` works just fine and leaving --user empty like before results in a GraphQLError error [{'message': 'Unable to correctly lookup credentials for repository GitlabInfrahub (https://gitlab.ost.ch/ins-stud/sa-ba/sa-hs24-iac/testinfrahubintegration.git).', \n'locations': [{'line': 3, 'column': 5}], 'path': ['CoreRepositoryCreate']}] -> so I guess dont leafe the user empy üôÇ","mentions":[{"id":"1212726983944052798","username":"pete_crocker","avatar":"2ce15ce78115631a666e77b58952f91e","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Pete Crocker","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}}],"mention_roles":[],"attachments":[],"embeds":[{"type":"link","url":"https://gitlab.ost.ch/ins-stud/sa-ba/sa-hs24-iac/testinfrahubintegration.git).',","title":"Sign in ¬∑ GitLab","description":"GitLab OST","color":730688,"provider":{"name":"GitLab"},"thumbnail":{"url":"https://gitlab.ost.ch/assets/twitter_card-570ddb06edf56a2312253c5872489847a0f385112ddbcd71ccfa1570febab5d2.jpg","proxy_url":"https://images-ext-1.discordapp.net/external/DLkbuP6_D5o9PbkkPVtNMQTCsoXJ9udOzY-0GQKDSdc/https/gitlab.ost.ch/assets/twitter_card-570ddb06edf56a2312253c5872489847a0f385112ddbcd71ccfa1570febab5d2.jpg","width":1024,"height":1024,"content_type":"image/jpeg","placeholder":"9VgKNwrWl1d7dnl/gpaXN5h4eJQJOIYA","placeholder_version":1,"flags":0},"content_scan_version":2}],"timestamp":"2024-12-04T22:16:57.634000+00:00","edited_timestamp":"2024-12-04T22:37:10.201000+00:00","flags":0,"components":[],"id":"1313992469943160892","channel_id":"1312830682292027422","author":{"id":"1300537046833692725","username":"simli133","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Simon linder","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":1},{"type":0,"content":"Hi <@1300537046833692725> thanks for reporting this. Would you be willing to share the `testinfrahubintegration` repo with us to see if there's something specific there that caused this issue? Or would you be able to get docker logs from the `task-worker` containers so we can try and identify what specifically happened in your case?","mentions":[{"id":"1300537046833692725","username":"simli133","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Simon linder","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null}],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-02T10:02:20.227000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1313082820167467029","channel_id":"1312830682292027422","author":{"id":"1212726983944052798","username":"pete_crocker","avatar":"2ce15ce78115631a666e77b58952f91e","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Pete Crocker","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false},{"type":0,"content":"--Bug-report-- Using the command 'infrahubctl repository add GitlabInfrahub https://<private.gitlab.repo>/testinfrahubintegration.git --username \"\" --password \"<accessTocken>\"' it did create the link to the repo but stayed offline and inactive + the Tasks did not show up - invetigating further I saw that the prefect worker stoped responding rebooting them just coused them to error saying the folder GitlabInfrahub is not a valid git folder. Reecreating the k8 pod solved the problem. Or working in the docker compose I had to make sure to create the repo sync in the UI, which did work ok.","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-01T17:20:25.873000+00:00","edited_timestamp":"2024-12-01T17:23:20.124000+00:00","flags":4,"components":[],"id":"1312830682292027422","channel_id":"1312830682292027422","author":{"id":"1300537046833692725","username":"simli133","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Simon linder","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false}]}]