{"thread":{"id":"1413540734870491217","type":11,"last_message_id":"1414546062705692693","flags":0,"guild_id":"1212332642801025064","name":"Understand what artifact updates are triggered by merge of a PC","parent_id":"1301914405176475729","rate_limit_per_user":0,"bitrate":64000,"user_limit":0,"rtc_region":null,"owner_id":"918504524610695168","thread_metadata":{"archived":true,"archive_timestamp":"2025-10-08T09:44:07.516000+00:00","auto_archive_duration":4320,"locked":false,"create_timestamp":"2025-09-05T15:06:13.510000+00:00"},"message_count":11,"member_count":19,"total_message_sent":11,"applied_tags":["1305808046747816046"]},"messages":[{"type":0,"content":"<@227091130561331200> my bad, turns out I queried `storage_id.id` instead of `storage_id.value`, now I get the expected output (that storage ID is different between branches for some artifacts)\n```\nMAIN BRANCH\nchecksum: dc33126c6b2b413c75f45b2dbefb2a16, storage_id: 1862bf50-cb2d-2f70-352d-c513389b06d7\nchecksum: 5fee7dc2b6711672c57e252141e3eab1, storage_id: 1862bf50-cac2-f2fd-3527-c5150ecbe42d\nchecksum: 9efc314b65237d5d646e1b817372afc6, storage_id: 1862bdf2-f6e9-ebeb-352f-c51f85cd554f\nchecksum: 8bcf34949f6deeb62aada90d5b30151f, storage_id: 1862bf50-cb38-ad02-352b-c511ca7a3753\nchecksum: 50d33889a3f54c9f60102473a999290e, storage_id: 1862bf50-ca98-6bc8-3520-c5175d89cac0\nchecksum: 9efc314b65237d5d646e1b817372afc6, storage_id: 1862bdf3-1389-3514-352d-c51a9d419b54\nBLA2 BRANCH\nchecksum: dc33126c6b2b413c75f45b2dbefb2a16, storage_id: 1862bef1-c4f5-ec6e-3529-c511a6b7ee8d\nchecksum: 5fee7dc2b6711672c57e252141e3eab1, storage_id: 1862bef1-b70f-4521-3526-c518051bd136\nchecksum: 9efc314b65237d5d646e1b817372afc6, storage_id: 1862bdf2-f6e9-ebeb-352f-c51f85cd554f\nchecksum: 8bcf34949f6deeb62aada90d5b30151f, storage_id: 1862bef1-b6fb-6e07-352e-c51f40ecd56b\nchecksum: 50d33889a3f54c9f60102473a999290e, storage_id: 1862bef1-cf31-db3b-3525-c51c0ea58cdd\nchecksum: 9efc314b65237d5d646e1b817372afc6, storage_id: 1862bdf3-1389-3514-352d-c51a9d419b54\n```\n<@1259824777879752785> it doesn't really work for me since I would get a webhook per artifact update, whereas I want to consider all artifacts updated as a result of a PC as input to a single atomic configuration workflow where if one device deployment fails then it would rollback all of them. However I think I can make it work by doing comparisons of checksum and storage ID between the branch and main.","mentions":[{"id":"227091130561331200","username":"minitriga.","avatar":"71ac6f8da9c358794381d5d430c53316","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Alex Gittings","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},{"id":"1259824777879752785","username":"baptiste_pro_38742","avatar":"6270c0e83569e285aefb7d8f0535f392","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Baptiste","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}}],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-09-08T09:41:02.344000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1414546062705692693","channel_id":"1413540734870491217","author":{"id":"918504524610695168","username":"dpeach44","avatar":"91d80b360d48938482b8a7e23147d057","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"dpeach","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":10,"reactions":[{"emoji":{"id":null,"name":"üëç"},"count":2,"count_details":{"burst":0,"normal":2},"burst_colors":[],"me_burst":false,"burst_me":false,"me":false,"burst_count":0}]},{"type":0,"content":"Don't know if it's applicable to your use case but you could also hook your deployment to `artifact.updated` event.","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-09-08T08:26:27.248000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1414527292792770682","channel_id":"1413540734870491217","author":{"id":"1259824777879752785","username":"baptiste_pro_38742","avatar":"6270c0e83569e285aefb7d8f0535f392","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Baptiste","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false,"position":9},{"type":0,"content":"When you merged the change from the branch was there updates to the artifacts? From what I can see we only update Checksum and storage ID if there has been a change to the file. \n\n<@&1212464709949726830> Anyone else got any ideas?","mentions":[],"mention_roles":["1212464709949726830"],"attachments":[],"embeds":[],"timestamp":"2025-09-08T08:22:43.063000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1414526352492859483","channel_id":"1413540734870491217","author":{"id":"227091130561331200","username":"minitriga.","avatar":"71ac6f8da9c358794381d5d430c53316","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Alex Gittings","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":8},{"type":0,"content":"and from the SDK (all the same)\n```\nMAIN BRANCH\nchecksum: dc33126c6b2b413c75f45b2dbefb2a16, storage_id: 185f5da5-1b06-6688-2f56-c51e89423763\nchecksum: 5fee7dc2b6711672c57e252141e3eab1, storage_id: 185f5da5-1c77-5e43-2f52-c513e3ea63ec\nchecksum: 9efc314b65237d5d646e1b817372afc6, storage_id: 185f5da5-299e-53d5-2f52-c51974348aa4\nchecksum: 8bcf34949f6deeb62aada90d5b30151f, storage_id: 185f5da5-29ae-0592-2f55-c518e0678b94\nchecksum: 50d33889a3f54c9f60102473a999290e, storage_id: 185f5da5-3c36-4cbb-2f57-c51db6a235a3\nchecksum: 9efc314b65237d5d646e1b817372afc6, storage_id: 185f5da5-3e90-9ee7-2f51-c5137257e01e\nBLA2 BRANCH\nchecksum: dc33126c6b2b413c75f45b2dbefb2a16, storage_id: 185f5da5-1b06-6688-2f56-c51e89423763\nchecksum: 5fee7dc2b6711672c57e252141e3eab1, storage_id: 185f5da5-1c77-5e43-2f52-c513e3ea63ec\nchecksum: 9efc314b65237d5d646e1b817372afc6, storage_id: 185f5da5-299e-53d5-2f52-c51974348aa4\nchecksum: 8bcf34949f6deeb62aada90d5b30151f, storage_id: 185f5da5-29ae-0592-2f55-c518e0678b94\nchecksum: 50d33889a3f54c9f60102473a999290e, storage_id: 185f5da5-3c36-4cbb-2f57-c51db6a235a3\nchecksum: 9efc314b65237d5d646e1b817372afc6, storage_id: 185f5da5-3e90-9ee7-2f51-c5137257e01e\n```","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-09-08T07:34:05.303000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1414514114520420443","channel_id":"1413540734870491217","author":{"id":"918504524610695168","username":"dpeach44","avatar":"91d80b360d48938482b8a7e23147d057","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"dpeach","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":7},{"type":0,"content":"so here is what I see in the UI (differences for the leaf switches, spines are the same)","mentions":[],"mention_roles":[],"attachments":[{"id":"1414514066256564255","filename":"Screenshot_2025-09-08_at_09.28.11.png","size":442083,"url":"https://cdn.discordapp.com/attachments/1413540734870491217/1414514066256564255/Screenshot_2025-09-08_at_09.28.11.png?ex=6933dc61&is=69328ae1&hm=4058b884d3cbd1974b536e75ffd216b77e7caf59b0ccb6a4cad887ee142300b8&","proxy_url":"https://media.discordapp.net/attachments/1413540734870491217/1414514066256564255/Screenshot_2025-09-08_at_09.28.11.png?ex=6933dc61&is=69328ae1&hm=4058b884d3cbd1974b536e75ffd216b77e7caf59b0ccb6a4cad887ee142300b8&","width":3002,"height":936,"content_type":"image/png","original_content_type":"image/png","content_scan_version":2,"placeholder":"/fcFAoCod4l/doiIVH9H9Ik=","placeholder_version":1,"title":"Screenshot 2025-09-08 at 09.28.11"},{"id":"1414514066579390484","filename":"Screenshot_2025-09-08_at_09.28.19.png","size":441897,"url":"https://cdn.discordapp.com/attachments/1413540734870491217/1414514066579390484/Screenshot_2025-09-08_at_09.28.19.png?ex=6933dc61&is=69328ae1&hm=092f96437260c2d9210d9eaf8e95aaa4e7a80b535c30fe80f887ed222c74cabe&","proxy_url":"https://media.discordapp.net/attachments/1413540734870491217/1414514066579390484/Screenshot_2025-09-08_at_09.28.19.png?ex=6933dc61&is=69328ae1&hm=092f96437260c2d9210d9eaf8e95aaa4e7a80b535c30fe80f887ed222c74cabe&","width":2996,"height":946,"content_type":"image/png","original_content_type":"image/png","content_scan_version":2,"placeholder":"/PcBAoCYhohvdrZmMG9E85k=","placeholder_version":1,"title":"Screenshot 2025-09-08 at 09.28.19"}],"embeds":[],"timestamp":"2025-09-08T07:33:53.923000+00:00","edited_timestamp":"2025-09-08T07:35:25.329000+00:00","flags":0,"components":[],"id":"1414514066788974592","channel_id":"1413540734870491217","author":{"id":"918504524610695168","username":"dpeach44","avatar":"91d80b360d48938482b8a7e23147d057","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"dpeach","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":6},{"type":0,"content":"This kind of works, when a PC is merged I send a webhook and from that I take the `occured_at` and use it to find all artifacts updated after that date/time. This might not work very well with more concurrency as there is still no way to constrain the artifacts to those that were updated by the webhooked PC/branch.\n\nI had an idea that I can compare the checksum and storage IDs of the artifacts in the PC source branch against those in the main branch and figure out which were updated by the PC. So I tried with the SDK to get the artifacts using the branch name like so\n```\ndata = client.execute_graphql(query=artifact_query, branch_name=\"bla2\")\n```\n...however I see that the artifacts have the same checksums and storage IDs whether I specify branch or not, I was expecting to see differences with those artifacts in the main branch vs. my PC source branch as that is what I see in the UI when I look at the artifacts and flip between branches. \n\nMight this be a bug with the SDK or am I missing something?","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-09-08T07:20:44.656000+00:00","edited_timestamp":"2025-09-08T07:59:41.528000+00:00","flags":0,"components":[],"id":"1414510756363370609","channel_id":"1413540734870491217","author":{"id":"918504524610695168","username":"dpeach44","avatar":"91d80b360d48938482b8a7e23147d057","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"dpeach","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":5},{"type":0,"content":"looks like you need to use `updated_at` under `storage_id`\n```\n        {\n          \"node\": {\n            \"id\": \"185f5da5-1a89-c9a7-2f5b-c5136a061b32\",\n            \"_updated_at\": \"2025-08-26T16:22:23.402034+00:00\",\n            \"storage_id\": {\n              \"value\": \"18627a95-867b-390d-3523-c51a62ee93fc\",\n              \"updated_at\": \"2025-09-05T19:46:27.282027+00:00\"\n            }\n          }\n        },\n```","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-09-05T19:52:13.299000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1413612708242260029","channel_id":"1413540734870491217","author":{"id":"918504524610695168","username":"dpeach44","avatar":"91d80b360d48938482b8a7e23147d057","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"dpeach","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":4,"reactions":[{"emoji":{"id":null,"name":"üëç"},"count":1,"count_details":{"burst":0,"normal":1},"burst_colors":[],"me_burst":false,"burst_me":false,"me":false,"burst_count":0}]},{"type":0,"content":"Thanks I'll take a look at that","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-09-05T15:39:35.631000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1413549132374605915","channel_id":"1413540734870491217","author":{"id":"918504524610695168","username":"dpeach44","avatar":"91d80b360d48938482b8a7e23147d057","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"dpeach","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":3},{"type":0,"content":"As when a proposed change is merged the artifacts are rendered again.","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-09-05T15:24:14.865000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1413545270402224299","channel_id":"1413540734870491217","author":{"id":"227091130561331200","username":"minitriga.","avatar":"71ac6f8da9c358794381d5d430c53316","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Alex Gittings","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":2},{"type":0,"content":"Hey <@918504524610695168>\n\nThere is the option to query for the updated artifacts and specifically looking at the `_updated_at` attribute. \n\n```\nquery artifacts {\n  CoreArtifact {\n    edges {\n      node {\n        id\n        _updated_at\n      }\n    }\n  }\n}\n```\n\nHowever we currently dont store which PC triggered the artifact change.","mentions":[{"id":"918504524610695168","username":"dpeach44","avatar":"91d80b360d48938482b8a7e23147d057","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"dpeach","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null}],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-09-05T15:23:48.204000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1413545158577881118","channel_id":"1413540734870491217","author":{"id":"227091130561331200","username":"minitriga.","avatar":"71ac6f8da9c358794381d5d430c53316","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Alex Gittings","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":1,"reactions":[{"emoji":{"id":null,"name":"üëç"},"count":1,"count_details":{"burst":0,"normal":1},"burst_colors":[],"me_burst":false,"burst_me":false,"me":false,"burst_count":0}]},{"type":4,"content":"Understand what artifact updates are triggered by merge of a PC","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-09-05T15:06:36.932000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1413540833109610516","channel_id":"1413540734870491217","author":{"id":"918504524610695168","username":"dpeach44","avatar":"91d80b360d48938482b8a7e23147d057","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"dpeach","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false},{"type":0,"content":"Hi guys,\n\nIs there any way to understand what artifacts were updated as the result of a proposed change merge to the main branch?\n\nThe idea is that a webhook would fire when the proposed change is merged, which would call a transform to customise the payload with a list of artifacts that were updated by the proposed change.\n\nI am looking for a way to notify downstream deployment workflow that a set of artifact updates should be considered to be deployed together by a single workflow.\n\nThanks.","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-09-05T15:06:13.510000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1413540734870491217","channel_id":"1413540734870491217","author":{"id":"918504524610695168","username":"dpeach44","avatar":"91d80b360d48938482b8a7e23147d057","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"dpeach","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false}]}