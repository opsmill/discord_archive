[{"thread":{"id":"1318663141789401161","type":11,"last_message_id":"1318716101567447130","flags":0,"guild_id":"1212332642801025064","name":"Ansible Inventory","parent_id":"1301914405176475729","rate_limit_per_user":0,"bitrate":64000,"user_limit":0,"rtc_region":null,"owner_id":"1303043080634630154","thread_metadata":{"archived":true,"archive_timestamp":"2025-01-16T23:11:36.239000+00:00","auto_archive_duration":4320,"locked":false,"create_timestamp":"2024-12-17T19:36:32.579000+00:00"},"message_count":20,"member_count":2,"total_message_sent":20,"applied_tags":["1322475882421555200","1301915235380363266"]},"messages":[{"type":0,"content":"Glad you got it sorted! Good win to end the day with!","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-17T23:06:59.174000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1318716101567447130","channel_id":"1318663141789401161","author":{"id":"370964598284746752","username":"foolproofalibi","avatar":"51c8acd4dcd60cb1cea707612872daf5","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Foolproofalibi","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":19,"reactions":[{"emoji":{"id":null,"name":"üëç"},"count":1,"count_details":{"burst":0,"normal":1},"burst_colors":[],"me_burst":false,"burst_me":false,"me":false,"burst_count":0}]},{"type":0,"content":"Thanks for pointing me in the right direction","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-17T22:47:57.461000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1318711312875786331","channel_id":"1318663141789401161","author":{"id":"1303043080634630154","username":"roger_59670","avatar":"339b471b2381d72ed3fc7392ed5b701d","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Roger","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":18},{"type":0,"content":"I've fixed it - installed the opsmill collection in myvenv with ```ansible-galaxy collection install opsmill.infrahub -p /home/roger/infrahub/.venv/lib/python3.12/site-packages/ansible_collections --force```","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-17T22:46:41.397000+00:00","edited_timestamp":"2024-12-17T22:48:10.202000+00:00","flags":0,"components":[],"id":"1318710993840504988","channel_id":"1318663141789401161","author":{"id":"1303043080634630154","username":"roger_59670","avatar":"339b471b2381d72ed3fc7392ed5b701d","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Roger","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":17},{"type":0,"content":"I will try another Ansible host tmw, opsmill.infrahub only exists in main collections folder. Will see if I can force the install into the venv aswell","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-17T22:39:58.367000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1318709303409905694","channel_id":"1318663141789401161","author":{"id":"1303043080634630154","username":"roger_59670","avatar":"339b471b2381d72ed3fc7392ed5b701d","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Roger","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":16,"reactions":[{"emoji":{"id":null,"name":"üëç"},"count":1,"count_details":{"burst":0,"normal":1},"burst_colors":[],"me_burst":false,"burst_me":false,"me":false,"burst_count":0}]},{"type":0,"content":"Does opsmill.infrahub exist in both collections folder and venv? I am using ansible-core.","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-17T22:36:35.574000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1318708452834672654","channel_id":"1318663141789401161","author":{"id":"370964598284746752","username":"foolproofalibi","avatar":"51c8acd4dcd60cb1cea707612872daf5","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Foolproofalibi","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":15},{"type":0,"content":"```\n‚ùØ cat inventory.yml\n# Inventory can be test with : ansible-inventory -i playbooks/inventory.yml  -y --list\n\nplugin: opsmill.infrahub.inventory\napi_endpoint: \"http://localhost:8000\"\ntimeout: 30\n\nstrict: false\n# branch: \"main\"\n\nnodes:\n  InfraDevice:\n    include:\n      - name\n      - location.name\n      - role\n      - device_type.name\n      - device_type.platform.ansible_network_os\n      - primary_address.address\n\ncompose:\n  hostname: name\n  ansible_host: primary_address.address | ansible.utils.ipaddr('address')\n  device_type : device_type.name\n  platform : device_type.platform.ansible_network_os\n  location: location.name\n\nkeyed_groups:\n  - prefix: role\n    key: role\n  - prefix: location\n    key: location | lower\n  - prefix: device_type\n    key: device_type | lower\n  - prefix: platform\n    key: platform\n```\n\nand. my ansible.cfg, I dumbed it down, but also tried with the other plugins enabled.\n\n```\n‚ùØ cat ansible.cfg\n[inventory]\nenable_plugins = host_list, yaml, ini, auto, opsmill.infrahub.inventory\n```","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-17T22:35:58.265000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1318708296349384724","channel_id":"1318663141789401161","author":{"id":"370964598284746752","username":"foolproofalibi","avatar":"51c8acd4dcd60cb1cea707612872daf5","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Foolproofalibi","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":14},{"type":0,"content":"No, it should be fine as Ansible will add the collections path to $PATH.","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-17T22:34:14.161000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1318707859705303110","channel_id":"1318663141789401161","author":{"id":"370964598284746752","username":"foolproofalibi","avatar":"51c8acd4dcd60cb1cea707612872daf5","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Foolproofalibi","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":13},{"type":0,"content":"```\n‚ùØ ansible-galaxy collection list\n\n# /Users/Mikhail/.ansible/collections/ansible_collections\nCollection       Version\n---------------- -------\nopsmill.infrahub 1.2.2\n```","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-17T22:33:43.550000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1318707731313463377","channel_id":"1318663141789401161","author":{"id":"370964598284746752","username":"foolproofalibi","avatar":"51c8acd4dcd60cb1cea707612872daf5","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Foolproofalibi","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":12},{"type":0,"content":"Should the opsmill.infrahub collection be in my venv?","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-17T22:33:26.364000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1318707659230281790","channel_id":"1318663141789401161","author":{"id":"1303043080634630154","username":"roger_59670","avatar":"339b471b2381d72ed3fc7392ed5b701d","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Roger","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":11},{"type":0,"content":"I'm actually just off to bed! Just a quick question, what does your ansible-galaxy collection list look like?","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-17T22:32:59.888000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1318707548181893122","channel_id":"1318663141789401161","author":{"id":"1303043080634630154","username":"roger_59670","avatar":"339b471b2381d72ed3fc7392ed5b701d","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Roger","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":10},{"type":0,"content":"I just used the same files you against `demo.start` and it works. Do you want to jump on a call?","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-17T22:30:43.288000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1318706975239835729","channel_id":"1318663141789401161","author":{"id":"370964598284746752","username":"foolproofalibi","avatar":"51c8acd4dcd60cb1cea707612872daf5","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Foolproofalibi","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":9},{"type":0,"content":"It does appear the opsmill collection is not in my venv but in the global location","mentions":[],"mention_roles":[],"attachments":[{"id":"1318704656133783672","filename":"image.png","size":103072,"url":"https://cdn.discordapp.com/attachments/1318663141789401161/1318704656133783672/image.png?ex=693403aa&is=6932b22a&hm=5e0f1b1cd024ae07fd5fe71c603359066c8d25e9f7a1ffd9111931d07ec34820&","proxy_url":"https://media.discordapp.net/attachments/1318663141789401161/1318704656133783672/image.png?ex=693403aa&is=6932b22a&hm=5e0f1b1cd024ae07fd5fe71c603359066c8d25e9f7a1ffd9111931d07ec34820&","width":1328,"height":552,"content_type":"image/png","content_scan_version":1,"placeholder":"iOcFA4Cfy4t5ZnaI/kJwGAI=","placeholder_version":1}],"embeds":[],"timestamp":"2024-12-17T22:21:30.420000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1318704656343502869","channel_id":"1318663141789401161","author":{"id":"1303043080634630154","username":"roger_59670","avatar":"339b471b2381d72ed3fc7392ed5b701d","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Roger","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":8},{"type":0,"content":"","mentions":[],"mention_roles":[],"attachments":[{"id":"1318704151282061393","filename":"message.txt","size":7150,"url":"https://cdn.discordapp.com/attachments/1318663141789401161/1318704151282061393/message.txt?ex=69340332&is=6932b1b2&hm=00b1e5dd75e46b4e4be63a9df8973cb35fb13c78f72fb6ef4474fc00b0555173&","proxy_url":"https://media.discordapp.net/attachments/1318663141789401161/1318704151282061393/message.txt?ex=69340332&is=6932b1b2&hm=00b1e5dd75e46b4e4be63a9df8973cb35fb13c78f72fb6ef4474fc00b0555173&","content_type":"text/plain; charset=utf-8","content_scan_version":0}],"embeds":[],"timestamp":"2024-12-17T22:19:30.080000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1318704151600824382","channel_id":"1318663141789401161","author":{"id":"1303043080634630154","username":"roger_59670","avatar":"339b471b2381d72ed3fc7392ed5b701d","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Roger","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":7},{"type":0,"content":"You're correct. Sorry, I was expecting different output. It says it has declined parsing.\n\nCan you show me `ansible-galaxy collection list` output?","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-17T22:18:27.511000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1318703889167548529","channel_id":"1318663141789401161","author":{"id":"370964598284746752","username":"foolproofalibi","avatar":"51c8acd4dcd60cb1cea707612872daf5","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Foolproofalibi","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":6},{"type":0,"content":"? I though -vvv was the most verbose?","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-17T22:17:09.593000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1318703562355642379","channel_id":"1318663141789401161","author":{"id":"1303043080634630154","username":"roger_59670","avatar":"339b471b2381d72ed3fc7392ed5b701d","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Roger","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":5},{"type":0,"content":"Do you mind adding some `-v`s?","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-17T22:15:55.755000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1318703252656754878","channel_id":"1318663141789401161","author":{"id":"370964598284746752","username":"foolproofalibi","avatar":"51c8acd4dcd60cb1cea707612872daf5","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Foolproofalibi","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":4},{"type":0,"content":"However","mentions":[],"mention_roles":[],"attachments":[{"id":"1318700417651310624","filename":"image.png","size":282921,"url":"https://cdn.discordapp.com/attachments/1318663141789401161/1318700417651310624/image.png?ex=6933ffb7&is=6932ae37&hm=f126707bb5a4252118b1f6df4188ff2f6ec04edf981ef4039b9c78530f6a303f&","proxy_url":"https://media.discordapp.net/attachments/1318663141789401161/1318700417651310624/image.png?ex=6933ffb7&is=6932ae37&hm=f126707bb5a4252118b1f6df4188ff2f6ec04edf981ef4039b9c78530f6a303f&","width":1668,"height":800,"content_type":"image/png","content_scan_version":1,"placeholder":"SecBC4JPiXd1eGd5oopfN/U=","placeholder_version":1}],"embeds":[],"timestamp":"2024-12-17T22:04:39.889000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1318700417869156382","channel_id":"1318663141789401161","author":{"id":"1303043080634630154","username":"roger_59670","avatar":"339b471b2381d72ed3fc7392ed5b701d","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Roger","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":3},{"type":0,"content":"Now updated to \n\n[inventory]\nenable_plugins = host_list, script, auto, yaml, ini, toml, opsmill.infrahub.inventory","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-17T22:04:11.575000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1318700299111632927","channel_id":"1318663141789401161","author":{"id":"1303043080634630154","username":"roger_59670","avatar":"339b471b2381d72ed3fc7392ed5b701d","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Roger","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":2},{"type":0,"content":"This is what I have","mentions":[],"mention_roles":[],"attachments":[{"id":"1318697701814304819","filename":"image.png","size":23573,"url":"https://cdn.discordapp.com/attachments/1318663141789401161/1318697701814304819/image.png?ex=6933fd30&is=6932abb0&hm=e4c57fa67d2eae0878f078fd03bdd0db3d872c9399315e04164c13b71b15254b&","proxy_url":"https://media.discordapp.net/attachments/1318663141789401161/1318697701814304819/image.png?ex=6933fd30&is=6932abb0&hm=e4c57fa67d2eae0878f078fd03bdd0db3d872c9399315e04164c13b71b15254b&","width":1002,"height":218,"content_type":"image/png","content_scan_version":1,"placeholder":"hvcBAYBqaYmchwen38303Vw=","placeholder_version":1}],"embeds":[],"timestamp":"2024-12-17T21:53:52.351000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1318697701898059797","channel_id":"1318663141789401161","author":{"id":"1303043080634630154","username":"roger_59670","avatar":"339b471b2381d72ed3fc7392ed5b701d","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Roger","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":1},{"type":0,"content":"Hi <@1303043080634630154> , do you have the inventory plugin enabled in your `ansible.cfg`?\n\n```\n[inventory]\nenable_plugins = host_list, script, auto, yaml, ini, toml, opsmill.infrahub.inventory\n```\n\nI'm only seeing it attempt to use `host_list`, `script`, `auto` and `yaml` plugins.","mentions":[{"id":"1303043080634630154","username":"roger_59670","avatar":"339b471b2381d72ed3fc7392ed5b701d","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Roger","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null}],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-17T21:18:10.648000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1318688718944731246","channel_id":"1318663141789401161","author":{"id":"370964598284746752","username":"foolproofalibi","avatar":"51c8acd4dcd60cb1cea707612872daf5","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Foolproofalibi","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false},{"type":0,"content":"I am looking at the Ansible Inventory and using this config in /playbooks/inventory.yml \n\n```---\n# Inventory can be test with : ansible-inventory -i playbooks/inventory.yml  -y --list\n\nplugin: opsmill.infrahub.inventory\napi_endpoint: \"http://192.168.1.182:8000\" \ntimeout: 30\n\nstrict: false\n# branch: \"main\"\n\nnodes:\n  InfraDevice:\n    include:\n      - name\n      - location.name\n      - role\n      - device_type.name\n      - device_type.platform.ansible_network_os\n      - primary_address.address\n\ncompose:\n  hostname: name\n  ansible_host: primary_address.address | ansible.utils.ipaddr('address')\n  device_type : device_type.name\n  platform : device_type.platform.ansible_network_os\n  location: location.name\n\nkeyed_groups:\n  - prefix: role\n    key: role\n  - prefix: location\n    key: location | lower\n  - prefix: device_type\n    key: device_type | lower\n  - prefix: platform\n    key: platform```\n\nI have installed the Ansible Opsmill collection \nansible-galaxy collection install opsmill.infrahub\n\nHowever when running the test I get this? \n\nAny ideas what I am doing wrong? \n\nhost_list declined parsing /home/roger/infrahub/playbooks/inventory.yml as it did not pass its verify_file() method\nSkipping due to inventory source not existing or not being readable by the current user\nscript declined parsing /home/roger/infrahub/playbooks/inventory.yml as it did not pass its verify_file() method\nSkipping due to inventory source not existing or not being readable by the current user\nauto declined parsing /home/roger/infrahub/playbooks/inventory.yml as it did not pass its verify_file() method\nSkipping due to inventory source not existing or not being readable by the current user\nyaml declined parsing /home/roger/infrahub/playbooks/inventory.yml as it did not pass its verify_file() method\nSkipping due to inventory source not existing or not being readable by the current user\n\nThanks","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-17T19:36:32.579000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1318663141789401161","channel_id":"1318663141789401161","author":{"id":"1303043080634630154","username":"roger_59670","avatar":"339b471b2381d72ed3fc7392ed5b701d","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Roger","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false}]}]