[{"thread":{"id":"1312826976905723905","type":11,"last_message_id":"1314277736520487043","flags":0,"guild_id":"1212332642801025064","name":"Deploying infrahub 1.1 to kubernetes","parent_id":"1301914405176475729","rate_limit_per_user":0,"bitrate":64000,"user_limit":0,"rtc_region":null,"owner_id":"1300537046833692725","thread_metadata":{"archived":true,"archive_timestamp":"2025-01-04T17:20:09.198000+00:00","auto_archive_duration":4320,"locked":false,"create_timestamp":"2024-12-01T17:05:42.440000+00:00"},"message_count":7,"member_count":2,"total_message_sent":8,"applied_tags":["1301915235380363266","1304062716125773886"]},"messages":[{"type":0,"content":"Thanks for the help, yes setting the resources: limit to unlimited in the values.yaml worked.","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-05T17:10:30.486000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1314277736520487043","channel_id":"1312826976905723905","author":{"id":"1300537046833692725","username":"simli133","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Simon linder","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":7},{"type":19,"content":"this is the resources requirements for running Infrahub on a single machine if you did not see them yet: https://docs.infrahub.app/topics/hardware-requirements","mentions":[],"mention_roles":[],"attachments":[],"embeds":[{"type":"article","url":"https://docs.infrahub.app/topics/hardware-requirements","title":"Hardware requirements | Infrahub Documentation","description":"The system on which you want to run Infrahub, has to meet the following hardware requirements:","reference_id":"1314220763703676980","content_scan_version":0}],"timestamp":"2024-12-05T13:24:07.108000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1314220763703676980","channel_id":"1312826976905723905","author":{"id":"1220422159676084304","username":"fatih_10382_62805","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"fatih","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false,"message_reference":{"type":0,"channel_id":"1312826976905723905","message_id":"1314220088370663526","guild_id":"1212332642801025064"},"position":6,"referenced_message":{"type":19,"content":"yes there's a liveness, readiness, and startup probe shipped with the default rabbitmq helm chart\nstarting rabbitmq in 100 seconds is also weird, did you allocate enough resources to the rabbitmq deployment? we are using the bitnami chart, so you have to use the following helm values to do that (this is an example):\n```\nrabbitmq:\n  enabled: true\n  resources:\n    limits:\n      cpu: 1024 # unlimited\n      memory: \"1Ti\" # unlimited\n    requests:\n      cpu: 100m\n      memory: 512Mi\n```","mentions":[{"id":"1300537046833692725","username":"simli133","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Simon linder","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null}],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-05T13:21:26.096000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1314220088370663526","channel_id":"1312826976905723905","author":{"id":"1220422159676084304","username":"fatih_10382_62805","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"fatih","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false,"message_reference":{"type":0,"channel_id":"1312826976905723905","message_id":"1314212950860632105","guild_id":"1212332642801025064"},"position":5}},{"type":19,"content":"yes there's a liveness, readiness, and startup probe shipped with the default rabbitmq helm chart\nstarting rabbitmq in 100 seconds is also weird, did you allocate enough resources to the rabbitmq deployment? we are using the bitnami chart, so you have to use the following helm values to do that (this is an example):\n```\nrabbitmq:\n  enabled: true\n  resources:\n    limits:\n      cpu: 1024 # unlimited\n      memory: \"1Ti\" # unlimited\n    requests:\n      cpu: 100m\n      memory: 512Mi\n```","mentions":[{"id":"1300537046833692725","username":"simli133","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Simon linder","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null}],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-05T13:21:26.096000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1314220088370663526","channel_id":"1312826976905723905","author":{"id":"1220422159676084304","username":"fatih_10382_62805","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"fatih","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false,"message_reference":{"type":0,"channel_id":"1312826976905723905","message_id":"1314212950860632105","guild_id":"1212332642801025064"},"position":5,"referenced_message":{"type":0,"content":"hi <@1220422159676084304>, it coulb be that rabbitMQ is in a boot loop; but I dont see why; I just see 2024-12-05 12:43:22.474455+00:00 [info] <0.9.0> Time to start RabbitMQ: 100862 ms\n2024-12-05 12:44:30.367556+00:00 [info] <0.955.0> RabbitMQ is asked to stop... -> are there liveliness probes shuting it down?","mentions":[{"id":"1220422159676084304","username":"fatih_10382_62805","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"fatih","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}}],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-05T12:53:04.381000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1314212950860632105","channel_id":"1312826976905723905","author":{"id":"1300537046833692725","username":"simli133","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Simon linder","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":3}},{"type":19,"content":"hi Simon, this is weird, what kind of kubernetes distribution are you using? this looks like some kind of security policy that would deny access to rabbitmq","mentions":[{"id":"1300537046833692725","username":"simli133","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Simon linder","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null}],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-05T13:17:52.787000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1314219193687609395","channel_id":"1312826976905723905","author":{"id":"1220422159676084304","username":"fatih_10382_62805","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"fatih","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false,"message_reference":{"type":0,"channel_id":"1312826976905723905","message_id":"1313999586741715136","guild_id":"1212332642801025064"},"position":4,"referenced_message":{"type":0,"content":"hi <@1220422159676084304>, nice that's good news. I downloaded the repo and instelled it from the newest chart. -> now it starts well with just a `PersistentVolume (ReadWriteOnce)`. Apparently now my infrahub-server crashes after creation with \n`aiormq.exceptions.AMQPConnectionError: [Errno 1] Operation not permitted`-> what do i need to permitt to get it working?","mentions":[{"id":"1220422159676084304","username":"fatih_10382_62805","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"fatih","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}}],"mention_roles":[],"attachments":[{"id":"1313999586280476672","filename":"infrahub_server_log.txt","size":9366,"url":"https://cdn.discordapp.com/attachments/1312826976905723905/1313999586280476672/infrahub_server_log.txt?ex=6934093a&is=6932b7ba&hm=e14bea04bb5fc47c8a710be87db5623e9bb5a0a0ca5bca3af9c6a481ed210510&","proxy_url":"https://media.discordapp.net/attachments/1312826976905723905/1313999586280476672/infrahub_server_log.txt?ex=6934093a&is=6932b7ba&hm=e14bea04bb5fc47c8a710be87db5623e9bb5a0a0ca5bca3af9c6a481ed210510&","content_type":"text/plain; charset=utf-8","content_scan_version":0,"title":"infrahub server log"}],"embeds":[],"timestamp":"2024-12-04T22:45:14.411000+00:00","edited_timestamp":"2024-12-04T23:15:55.158000+00:00","flags":0,"components":[],"id":"1313999586741715136","channel_id":"1312826976905723905","author":{"id":"1300537046833692725","username":"simli133","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Simon linder","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":2}},{"type":0,"content":"hi <@1220422159676084304>, it coulb be that rabbitMQ is in a boot loop; but I dont see why; I just see 2024-12-05 12:43:22.474455+00:00 [info] <0.9.0> Time to start RabbitMQ: 100862 ms\n2024-12-05 12:44:30.367556+00:00 [info] <0.955.0> RabbitMQ is asked to stop... -> are there liveliness probes shuting it down?","mentions":[{"id":"1220422159676084304","username":"fatih_10382_62805","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"fatih","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}}],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-05T12:53:04.381000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1314212950860632105","channel_id":"1312826976905723905","author":{"id":"1300537046833692725","username":"simli133","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Simon linder","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":3},{"type":0,"content":"hi <@1220422159676084304>, nice that's good news. I downloaded the repo and instelled it from the newest chart. -> now it starts well with just a `PersistentVolume (ReadWriteOnce)`. Apparently now my infrahub-server crashes after creation with \n`aiormq.exceptions.AMQPConnectionError: [Errno 1] Operation not permitted`-> what do i need to permitt to get it working?","mentions":[{"id":"1220422159676084304","username":"fatih_10382_62805","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"fatih","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}}],"mention_roles":[],"attachments":[{"id":"1313999586280476672","filename":"infrahub_server_log.txt","size":9366,"url":"https://cdn.discordapp.com/attachments/1312826976905723905/1313999586280476672/infrahub_server_log.txt?ex=6934093a&is=6932b7ba&hm=e14bea04bb5fc47c8a710be87db5623e9bb5a0a0ca5bca3af9c6a481ed210510&","proxy_url":"https://media.discordapp.net/attachments/1312826976905723905/1313999586280476672/infrahub_server_log.txt?ex=6934093a&is=6932b7ba&hm=e14bea04bb5fc47c8a710be87db5623e9bb5a0a0ca5bca3af9c6a481ed210510&","content_type":"text/plain; charset=utf-8","content_scan_version":0,"title":"infrahub server log"}],"embeds":[],"timestamp":"2024-12-04T22:45:14.411000+00:00","edited_timestamp":"2024-12-04T23:15:55.158000+00:00","flags":0,"components":[],"id":"1313999586741715136","channel_id":"1312826976905723905","author":{"id":"1300537046833692725","username":"simli133","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Simon linder","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":2},{"type":0,"content":"Hello <@1300537046833692725> thanks for the bug report\nNFS/shared storage is actually not required anymore for Infrahub 1.1.\nWe have just pushed related changes to the development branch, you can make use of the latest helm chart here: https://github.com/opsmill/infrahub/tree/release-1.1/helm (we did not push the chart to our repository yet since 1.1 is still in pre-release).\nWe also fixed the documentation around the Helm chart (it will be effective on docs.infrahub.app when 1.1 is released)","mentions":[{"id":"1300537046833692725","username":"simli133","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Simon linder","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null}],"mention_roles":[],"attachments":[],"embeds":[{"type":"article","url":"https://github.com/opsmill/infrahub/tree/release-1.1/helm","title":"infrahub/helm at release-1.1 ¬∑ opsmill/infrahub","description":"Infrahub - A new approach to Infrastructure Management - opsmill/infrahub","color":1975079,"provider":{"name":"GitHub"},"thumbnail":{"url":"https://repository-images.githubusercontent.com/528799794/9923fd8f-9f0e-44a4-97ad-1ec81a3e0046","proxy_url":"https://images-ext-1.discordapp.net/external/yif4JFNe61IUdbm075SVddIANj1I2Tj6Qu7wclLSL0g/https/repository-images.githubusercontent.com/528799794/9923fd8f-9f0e-44a4-97ad-1ec81a3e0046","width":1280,"height":640,"content_type":"image/png","placeholder":"z6YJHIp3eHh/iId2iIeGcGUIVw==","placeholder_version":1,"flags":0},"content_scan_version":1}],"timestamp":"2024-12-02T11:56:18.549000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1313111502168916039","channel_id":"1312826976905723905","author":{"id":"1220422159676084304","username":"fatih_10382_62805","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"fatih","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false,"reactions":[{"emoji":{"id":null,"name":"üëè"},"count":1,"count_details":{"burst":0,"normal":1},"burst_colors":[],"me_burst":false,"burst_me":false,"me":false,"burst_count":0}]},{"type":0,"content":"--Bug-report-- While deploying a infrahub to my kubernetis cluster using the helm chart from https://github.com/opsmill/infrahub/tree/stable/helm I had to replace the nfs server with my own one to get it working. - I looked at the logs if was something about it not finding a folder. Apparently I did not save the error. But solution was to replace it with the nfs server https://github.com/kubernetes-sigs/nfs-ganesha-server-and-external-provisioner/tree/HEAD/charts/nfs-server-provisioner and the command \"helm install my-nfs nfs-ganesha-server-and-external-provisioner/nfs-server-provisioner -n infrahub\" (By the way the Documentation is not up to date with the helm chart anymore.)","mentions":[],"mention_roles":[],"attachments":[],"embeds":[{"type":"article","url":"https://github.com/opsmill/infrahub/tree/stable/helm","title":"infrahub/helm at stable ¬∑ opsmill/infrahub","description":"Infrahub - A new approach to Infrastructure Management - opsmill/infrahub","color":1975079,"provider":{"name":"GitHub"},"thumbnail":{"url":"https://repository-images.githubusercontent.com/528799794/9923fd8f-9f0e-44a4-97ad-1ec81a3e0046","proxy_url":"https://images-ext-1.discordapp.net/external/yif4JFNe61IUdbm075SVddIANj1I2Tj6Qu7wclLSL0g/https/repository-images.githubusercontent.com/528799794/9923fd8f-9f0e-44a4-97ad-1ec81a3e0046","width":1280,"height":640,"content_type":"image/png","placeholder":"z6YJHIp3eHh/iId2iIeGcGUIVw==","placeholder_version":1,"flags":0},"content_scan_version":2},{"type":"article","url":"https://github.com/kubernetes-sigs/nfs-ganesha-server-and-external-provisioner/tree/HEAD/charts/nfs-server-provisioner","title":"nfs-ganesha-server-and-external-provisioner/charts/nfs-server-provi...","description":"NFS Ganesha Server and Volume Provisioner. Contribute to kubernetes-sigs/nfs-ganesha-server-and-external-provisioner development by creating an account on GitHub.","color":1975079,"provider":{"name":"GitHub"},"thumbnail":{"url":"https://opengraph.githubassets.com/8ff39fd438c7e4072bf86f90f1717a749420bb102a208bd37c87a4dcf4212696/kubernetes-sigs/nfs-ganesha-server-and-external-provisioner","proxy_url":"https://images-ext-1.discordapp.net/external/hLY9Sjc1KM4VwfH1Tp0oOApdKnLRuGuU50gc7my5P3I/https/opengraph.githubassets.com/8ff39fd438c7e4072bf86f90f1717a749420bb102a208bd37c87a4dcf4212696/kubernetes-sigs/nfs-ganesha-server-and-external-provisioner","width":1200,"height":600,"content_type":"image/png","placeholder":"/PcFDIJ4iad5h3iFeH9vdbn3CA==","placeholder_version":1,"flags":0},"content_scan_version":2}],"timestamp":"2024-12-01T17:05:42.440000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1312826976905723905","channel_id":"1312826976905723905","author":{"id":"1300537046833692725","username":"simli133","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Simon linder","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false}]}]