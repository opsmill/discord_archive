[{"thread":{"id":"1380852112199520266","type":11,"last_message_id":"1382813071625425038","flags":0,"guild_id":"1212332642801025064","name":"Default Attribute Values & Dynamic Filtering for Relationship Fields in Schema Forms","parent_id":"1301914405176475729","rate_limit_per_user":0,"bitrate":64000,"user_limit":0,"rtc_region":null,"owner_id":"811281824768458793","thread_metadata":{"archived":true,"archive_timestamp":"2025-07-12T20:08:55.035000+00:00","auto_archive_duration":4320,"locked":false,"create_timestamp":"2025-06-07T10:13:18.540000+00:00"},"message_count":13,"member_count":3,"total_message_sent":13,"applied_tags":["1301914864339648552","1304062588858007572"]},"messages":[{"type":0,"content":"created a [feature request](https://github.com/opsmill/infrahub/issues/6693) for use-case 2. described above","mentions":[],"mention_roles":[],"attachments":[],"embeds":[{"type":"article","url":"https://github.com/opsmill/infrahub/issues/6693","title":"feature: Context-Aware Relationship Filtering in Forms ¬∑ Issue #66...","description":"Component No response Describe the Feature Request This feature enables dynamic filtering of relationship options in UI forms based on: Other field values within the same form (current_node source)...","color":1975079,"provider":{"name":"GitHub"},"thumbnail":{"url":"https://opengraph.githubassets.com/dc6292c375b183bfecced86ccac1729e9daac5ec86367f779deea83c7a2fded8/opsmill/infrahub/issues/6693","proxy_url":"https://images-ext-1.discordapp.net/external/hp--GGFGDw3ZindaN8_EShBfDS4b3OAdTGWjWies9nw/https/opengraph.githubassets.com/dc6292c375b183bfecced86ccac1729e9daac5ec86367f779deea83c7a2fded8/opsmill/infrahub/issues/6693","width":1200,"height":600,"content_type":"image/png","placeholder":"+vcFDIKVipeKiHeoZo+WX5L2CA==","placeholder_version":1,"flags":0},"content_scan_version":2}],"timestamp":"2025-06-12T20:05:27.700000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1382813071625425038","channel_id":"1380852112199520266","author":{"id":"811281824768458793","username":"matej3653","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Matej Lanca","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false,"position":12},{"type":0,"content":"[issue](https://github.com/opsmill/infrahub/issues/6671)","mentions":[],"mention_roles":[],"attachments":[],"embeds":[{"type":"article","url":"https://github.com/opsmill/infrahub/issues/6671","title":"bug: Object Templates Enforce Mandatory Fields ¬∑ Issue #6671 ¬∑ op...","description":"Component Not Sure Infrahub version 1.2.12 Current Behavior When using Object Templates, all fields marked as mandatory in the schema are enforced as required when instantiating objects from the te...","color":1975079,"provider":{"name":"GitHub"},"thumbnail":{"url":"https://opengraph.githubassets.com/9dae9c462ea1a99c2cfb3c202c2cbb9d2cd0a0d4643b0a783d3938b021bde8b0/opsmill/infrahub/issues/6671","proxy_url":"https://images-ext-1.discordapp.net/external/yn87sPIoue9j3OSuB5W4r0wRg9GZjZb3Kxn7ZrbpzUE/https/opengraph.githubassets.com/9dae9c462ea1a99c2cfb3c202c2cbb9d2cd0a0d4643b0a783d3938b021bde8b0/opsmill/infrahub/issues/6671","width":1200,"height":600,"description":"Component Not Sure Infrahub version 1.2.12 Current Behavior When using Object Templates, all fields marked as mandatory in the schema are enforced as required when instantiating objects from the te...","flags":0},"content_scan_version":2}],"timestamp":"2025-06-11T10:01:40.186000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1382298734552940554","channel_id":"1380852112199520266","author":{"id":"811281824768458793","username":"matej3653","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Matej Lanca","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false,"position":11},{"type":0,"content":"Yes please!","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-06-11T09:43:15.203000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1382294099918327930","channel_id":"1380852112199520266","author":{"id":"227091130561331200","username":"minitriga.","avatar":"71ac6f8da9c358794381d5d430c53316","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Alex Gittings","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":10},{"type":0,"content":"<@227091130561331200> is this worth creating a Github issue? Would be great if it got fixed in 1.3.","mentions":[{"id":"227091130561331200","username":"minitriga.","avatar":"71ac6f8da9c358794381d5d430c53316","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Alex Gittings","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null}],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-06-11T09:39:26.103000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1382293139003408437","channel_id":"1380852112199520266","author":{"id":"811281824768458793","username":"matej3653","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Matej Lanca","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false,"position":9},{"type":0,"content":"Infrahub - v1.2.12","mentions":[],"mention_roles":[],"attachments":[{"id":"1381705266223124670","filename":"Screen_Recording_2025-06-09_at_20.42.20.mov","size":12524971,"url":"https://cdn.discordapp.com/attachments/1380852112199520266/1381705266223124670/Screen_Recording_2025-06-09_at_20.42.20.mov?ex=6933d08e&is=69327f0e&hm=a7997e1fda9e4ce5a5448977350a707b3de6c74cea44dfa7577967464000a7b2&","proxy_url":"https://media.discordapp.net/attachments/1380852112199520266/1381705266223124670/Screen_Recording_2025-06-09_at_20.42.20.mov?ex=6933d08e&is=69327f0e&hm=a7997e1fda9e4ce5a5448977350a707b3de6c74cea44dfa7577967464000a7b2&","width":2880,"height":1800,"content_type":"video/quicktime","content_scan_version":2,"placeholder":"+PcJDIBneHeMiIhwh4tJkKIgCQ==","placeholder_version":1,"title":"Screen Recording 2025-06-09 at 20.42.20"}],"embeds":[],"timestamp":"2025-06-09T18:43:26.494000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1381705266994614443","channel_id":"1380852112199520266","author":{"id":"811281824768458793","username":"matej3653","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Matej Lanca","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false,"position":8},{"type":0,"content":"Object templates shouldn't enforce mandatory fields ü§î as far as I know,\nplease could you share an example ?","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-06-09T17:24:29.028000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1381685396622147585","channel_id":"1380852112199520266","author":{"id":"695690467056025690","username":"dgarros","avatar":"67171294847dca2ce3ac938f5bca0443","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Damien","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false,"position":7},{"type":0,"content":"Followup to question 1.\nObject templates were what I was looking for, but their behaviour seems a bit strange. I did not expect Object Templates to enforce mandatory fields, and I think they shouldn't.\nIs this the intended behaviour? If so, is there a way to use object templates without enforcing mandatory fields? (noticed that name attribute while being mandatory was not part of the object template as it has the unique flag set)","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-06-09T13:04:21.361000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1381619933322150051","channel_id":"1380852112199520266","author":{"id":"811281824768458793","username":"matej3653","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Matej Lanca","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false,"position":6},{"type":0,"content":"The issue is solved when the relationship is renamed\nprofiles seems to collide with something internaly\nonce i renamed the relationship all works as expected","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-06-09T11:15:22.927000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1381592509142274221","channel_id":"1380852112199520266","author":{"id":"811281824768458793","username":"matej3653","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Matej Lanca","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false,"position":5,"reactions":[{"emoji":{"id":null,"name":"üëçüèª"},"count":1,"count_details":{"burst":0,"normal":1},"burst_colors":[],"me_burst":false,"burst_me":false,"me":false,"burst_count":0}]},{"type":0,"content":"At first glance, this schema looks good to me\nI'll try to load it locally to see if I can spot the issue","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-06-09T10:07:17.020000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1381575371606065182","channel_id":"1380852112199520266","author":{"id":"695690467056025690","username":"dgarros","avatar":"67171294847dca2ce3ac938f5bca0443","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Damien","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false,"position":4,"reactions":[{"emoji":{"id":null,"name":"üôå"},"count":1,"count_details":{"burst":0,"normal":1},"burst_colors":[],"me_burst":false,"burst_me":false,"me":false,"burst_count":0}]},{"type":0,"content":"Decided to test out a slightly different approach, but hit the wall with the simplest case. \nI am unable to get the component-parent relationship on profile-cluster registered correctly. (the schema loads fine, but the relationship does not show up)\nTesting it out on completely clean branch. \nCould you please have a quick look.","mentions":[],"mention_roles":[],"attachments":[{"id":"1381549759579295844","filename":"test.yml","size":1720,"url":"https://cdn.discordapp.com/attachments/1380852112199520266/1381549759579295844/test.yml?ex=6933e87a&is=693296fa&hm=87744366f50be0718c8549ce9b16f5f68e9ec5947d191ca8ead73cf8ce25400e&","proxy_url":"https://media.discordapp.net/attachments/1380852112199520266/1381549759579295844/test.yml?ex=6933e87a&is=693296fa&hm=87744366f50be0718c8549ce9b16f5f68e9ec5947d191ca8ead73cf8ce25400e&","content_type":"text/plain; charset=utf-8","content_scan_version":2}],"embeds":[],"timestamp":"2025-06-09T08:25:30.706000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1381549759868698634","channel_id":"1380852112199520266","author":{"id":"811281824768458793","username":"matej3653","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Matej Lanca","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false,"position":3},{"type":0,"content":"1. ofcourse, how did I miss that ...\n2. My use-case is a bit more complex than that. Added you to the [Github repo](https://github.com/lancamat1/poc-infrahub-csob/blob/main/schemas/extensions/netauto/application.yml) with my schemas for more context.\n\nI need to filter on multiple fields, environment as well as cluster.\n\nJust to summarise:\n- Cluster has profiles as component\n- Application has Cluster and Environment as attribute relationships\n- Application has multiple attribute relationships to different types of profiles (inherited from base Profile)\n- There are multiple Application nodes representing different types of Applications with different Profile nodes.\n\n I noticed that similar functionality is present if i have the Profiles relationship to Cluster modeled as Parent. But that means having to select the same cluster for each of the profiles separately.","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-06-07T20:23:49.204000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1381005752340320256","channel_id":"1380852112199520266","author":{"id":"811281824768458793","username":"matej3653","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Matej Lanca","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false,"position":2},{"type":0,"content":"You could probably achieve what you are doing with generics and using polymorphism where you can \n\nFor example you may have GenericDevice and off that you may inhert that generic in a node called `SSLF5Cluster` \n\nOn the form in question if you set the relationship peer to GenericDevice it will show two dropdowns the first one being a nodekind selector and the second will allow you to select the device you want. If you put the relationship peer as `SSLF5Cluster` it will just allow you to select nodes that match that kind.","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-06-07T19:14:44.639000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1380988368774758521","channel_id":"1380852112199520266","author":{"id":"227091130561331200","username":"minitriga.","avatar":"71ac6f8da9c358794381d5d430c53316","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Alex Gittings","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":1},{"type":0,"content":"1. Of course you can set a default value! its sometimes needed when doing schema migrations for example migrating from an optional to a required field: https://docs.infrahub.app/reference/schema/attribute#default_value","mentions":[],"mention_roles":[],"attachments":[],"embeds":[{"type":"article","url":"https://docs.infrahub.app/reference/schema/attribute","title":"Attribute | Infrahub Documentation","description":"In a schema file, an attribute can be defined inside a node, a generic or a node extension.","content_scan_version":2}],"timestamp":"2025-06-07T19:07:25.838000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1380986528309706893","channel_id":"1380852112199520266","author":{"id":"227091130561331200","username":"minitriga.","avatar":"71ac6f8da9c358794381d5d430c53316","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Alex Gittings","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false},{"type":0,"content":"Hi team,\n\nI‚Äôd like to propose two enhancements to InfraHub schemas to improve form usability:\n\n1. **Default Values for Node Attributes**  \n   Can we specify a default value for a node attribute in the schema, so it‚Äôs pre-populated in the generated form? This would streamline data entry and reduce errors.\n\n2. **Dynamic Filtering of Relationship Attributes**  \n   Is it possible to filter available choices for a relationship attribute based on other fields in the same form?  \n   **Example:**  \n   - `profile` is a component of `F5cluster`\n   - `environment` is a relationship attribute on `F5cluster`\n   - All three (`F5cluster`, `profile`, `environment`) are relationship attributes on `F5application`\n   \n   The goal: pre-filter `profile` options so only those belonging to the selected `F5cluster` and matching the environment (e.g., prod, tda) are shown‚Äîsimilar to Netbox‚Äôs dynamic form filtering.\n\n   **Sample code:**\n   ```\n   client_ssl_profile = DynamicModelChoiceField(\n       queryset=models.Profile.objects.all(),\n       query_params={\n           'type': choices.ProfileTypeChoices.CLIENT_SSL, # Solved via Generics\n           'cluster': '$cluster', # F5cluster\n           'tags': '$tags' # Environment\n       },\n       label=\"Client SSL Profile\",\n   )\n   ```\n\n**Questions:**\n- Can either or both of these be achieved in the current InfraHub schema system?\n- If not, could these features be considered for future releases?\n\nI know about libraries like Streamlit for custom UIs, but I‚Äôd prefer this functionality natively in InfraHub. The UI is already excellent, and reimplementing it elsewhere (especially with schema changes) would be challenging. These features could make InfraHub a single interface for network operators.\n\nWould others find this useful too?\n\nThank you!","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-06-07T10:13:18.540000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1380852112199520266","channel_id":"1380852112199520266","author":{"id":"811281824768458793","username":"matej3653","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Matej Lanca","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false}]}]