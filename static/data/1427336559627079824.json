{"thread":{"id":"1427336559627079824","type":11,"last_message_id":"1427945031804915805","flags":0,"guild_id":"1212332642801025064","name":"infrahubctl via reverse proxy with private cert and IPv6","parent_id":"1301914405176475729","rate_limit_per_user":0,"bitrate":64000,"user_limit":0,"rtc_region":null,"owner_id":"1426927551384780800","thread_metadata":{"archived":true,"archive_timestamp":"2025-11-14T09:11:29.939000+00:00","auto_archive_duration":4320,"locked":false,"create_timestamp":"2025-10-13T16:45:54.446000+00:00"},"message_count":33,"member_count":3,"total_message_sent":33,"applied_tags":["1301915235380363266"]},"messages":[{"type":0,"content":"<@1221732604806692884> I'm still thinking about real value of this config file ... for me it's making confusion .. .you can set it in env or file , then you have to decide what is taking priority (env variable or config file)... maybe having anly env variables will make it easier (for deployment and potential troubleshooting)","mentions":[{"id":"1221732604806692884","username":"w_vandeun","avatar":"e9ac2093c5e49a4a05a41b375db9ac69","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Wim","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}}],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-10-15T09:03:45.518000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1427945031804915805","channel_id":"1427336559627079824","author":{"id":"1254387763982106755","username":"tomek_79993","avatar":"ee65e170c3ce092e2492985d62ee298d","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Tomek","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":32},{"type":0,"content":"Yeah, sorry for the confusion, but the infrahubctl configuration file does not allow you to configure these settings. Not sure how I came to that conclusion initially ðŸ˜³\nI submitted a PR that fixes that.","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-10-15T06:22:16.060000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1427904391272464496","channel_id":"1427336559627079824","author":{"id":"1221732604806692884","username":"w_vandeun","avatar":"e9ac2093c5e49a4a05a41b375db9ac69","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Wim","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false,"position":31},{"type":0,"content":"looks like is not reading the info","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-10-14T12:51:01.429000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1427639837095104572","channel_id":"1427336559627079824","author":{"id":"1254387763982106755","username":"tomek_79993","avatar":"ee65e170c3ce092e2492985d62ee298d","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Tomek","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":30},{"type":0,"content":"maybe here is the problem ...","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-10-14T12:48:38.222000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1427639236441673779","channel_id":"1427336559627079824","author":{"id":"1254387763982106755","username":"tomek_79993","avatar":"ee65e170c3ce092e2492985d62ee298d","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Tomek","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":29},{"type":0,"content":"setting \"tls_insecure=true\" in config file shows \"'tls_insecure': False,\" in detail output","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-10-14T12:26:35.765000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1427633689654726656","channel_id":"1427336559627079824","author":{"id":"1426927551384780800","username":"polyard_25990_55103","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"polyard","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":28},{"type":0,"content":"sure:\n- unset all env variables regarding the CA file\n- added \"tls_ca_file=\"/home/xxx/tmp/ca.crt\"\" to ~/.config/infrahubctl.toml\n- env var for infrahubctl.toml is set\n- running infrahubctl info --detail fails, but shows:\n'tls_ca_file': None,","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-10-14T12:25:13.086000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1427633342874124328","channel_id":"1427336559627079824","author":{"id":"1426927551384780800","username":"polyard_25990_55103","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"polyard","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":27},{"type":0,"content":"<@1426927551384780800> can you also check output of infrahubctl info --detail ?","mentions":[{"id":"1426927551384780800","username":"polyard_25990_55103","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"polyard","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null}],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-10-14T12:09:45.694000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1427629453109891203","channel_id":"1427336559627079824","author":{"id":"1254387763982106755","username":"tomek_79993","avatar":"ee65e170c3ce092e2492985d62ee298d","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Tomek","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":26},{"type":0,"content":"thanks for your support <@1221732604806692884> and <@1254387763982106755>","mentions":[{"id":"1254387763982106755","username":"tomek_79993","avatar":"ee65e170c3ce092e2492985d62ee298d","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Tomek","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},{"id":"1221732604806692884","username":"w_vandeun","avatar":"e9ac2093c5e49a4a05a41b375db9ac69","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Wim","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}}],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-10-14T12:08:30.603000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1427629138155405376","channel_id":"1427336559627079824","author":{"id":"1426927551384780800","username":"polyard_25990_55103","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"polyard","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":25},{"type":0,"content":"$ echo $INFRAHUBCTL_CONFIG\n/home/xxx/.config/infrahub","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-10-14T12:02:02.715000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1427627511235219487","channel_id":"1427336559627079824","author":{"id":"1426927551384780800","username":"polyard_25990_55103","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"polyard","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":24},{"type":19,"content":"I did, s. a.","mentions":[{"id":"1221732604806692884","username":"w_vandeun","avatar":"e9ac2093c5e49a4a05a41b375db9ac69","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Wim","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}}],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-10-14T12:01:45.552000+00:00","edited_timestamp":"2025-10-14T12:01:52.233000+00:00","flags":0,"components":[],"id":"1427627439248638043","channel_id":"1427336559627079824","author":{"id":"1426927551384780800","username":"polyard_25990_55103","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"polyard","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"message_reference":{"type":0,"channel_id":"1427336559627079824","message_id":"1427627370038427669","guild_id":"1212332642801025064"},"position":23,"referenced_message":{"type":19,"content":"Or you can set the `INFRAHUBCTL_CONFIG` env var to `~/.config/infrahubctl.toml`","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-10-14T12:01:29.051000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1427627370038427669","channel_id":"1427336559627079824","author":{"id":"1221732604806692884","username":"w_vandeun","avatar":"e9ac2093c5e49a4a05a41b375db9ac69","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Wim","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false,"message_reference":{"type":0,"channel_id":"1427336559627079824","message_id":"1427626865518186679","guild_id":"1212332642801025064"},"position":22}},{"type":19,"content":"Or you can set the `INFRAHUBCTL_CONFIG` env var to `~/.config/infrahubctl.toml`","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-10-14T12:01:29.051000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1427627370038427669","channel_id":"1427336559627079824","author":{"id":"1221732604806692884","username":"w_vandeun","avatar":"e9ac2093c5e49a4a05a41b375db9ac69","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Wim","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false,"message_reference":{"type":0,"channel_id":"1427336559627079824","message_id":"1427626865518186679","guild_id":"1212332642801025064"},"position":22,"referenced_message":{"type":0,"content":"You should run the command like this `infrahubctl info --config-file ~/.config/infrahubctl.toml`","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-10-14T11:59:28.764000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1427626865518186679","channel_id":"1427336559627079824","author":{"id":"1221732604806692884","username":"w_vandeun","avatar":"e9ac2093c5e49a4a05a41b375db9ac69","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Wim","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false,"position":18}},{"type":19,"content":"but the toml config file is read by infrahubctl, otherwise it would not be able to talk to infrahub with the env vars and would not know which server to talk to...","mentions":[{"id":"1221732604806692884","username":"w_vandeun","avatar":"e9ac2093c5e49a4a05a41b375db9ac69","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Wim","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}}],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-10-14T12:01:02.775000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1427627259828633640","channel_id":"1427336559627079824","author":{"id":"1426927551384780800","username":"polyard_25990_55103","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"polyard","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"message_reference":{"type":0,"channel_id":"1427336559627079824","message_id":"1427626865518186679","guild_id":"1212332642801025064"},"position":21,"referenced_message":{"type":0,"content":"You should run the command like this `infrahubctl info --config-file ~/.config/infrahubctl.toml`","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-10-14T11:59:28.764000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1427626865518186679","channel_id":"1427336559627079824","author":{"id":"1221732604806692884","username":"w_vandeun","avatar":"e9ac2093c5e49a4a05a41b375db9ac69","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Wim","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false,"position":18}},{"type":0,"content":"I never had this use case ... Either I'm using private CA and I'm adding it to the each deployed machines or I'm using public CA ...","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-10-14T11:59:49.460000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1427626952323367064","channel_id":"1427336559627079824","author":{"id":"1254387763982106755","username":"tomek_79993","avatar":"ee65e170c3ce092e2492985d62ee298d","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Tomek","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":20},{"type":0,"content":"further on, maybe consider expanding the nginx example config for ipv6. \nit does not hurt for v4 only setups and I think quite some people are doing PoCs together (-> not only on one laptop) and feed some prod data (from netbox etc) in infrahub and therefore wanna use TLS with a proxy.","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-10-14T11:59:35.975000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1427626895763181649","channel_id":"1427336559627079824","author":{"id":"1426927551384780800","username":"polyard_25990_55103","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"polyard","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":19},{"type":0,"content":"You should run the command like this `infrahubctl info --config-file ~/.config/infrahubctl.toml`","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-10-14T11:59:28.764000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1427626865518186679","channel_id":"1427336559627079824","author":{"id":"1221732604806692884","username":"w_vandeun","avatar":"e9ac2093c5e49a4a05a41b375db9ac69","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Wim","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false,"position":18},{"type":0,"content":"the laptop is arch, adding the CA file to /etc/ca-certificates/trust-source/anchors/ and updating the ca certs works, but I do not want to trust the CA system wide.\nThe \"problem\" is solved for me as setting env vars INFRAHUB_TLS_CA_FILE and/or SSL_CERT_FILE solve my connectivity problem. But maybe you'd like to have a look if \"tls_ca_file\" in infrahubctl.toml is working for you and if it is only mewho has problems ðŸ™‚","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-10-14T11:55:48.269000+00:00","edited_timestamp":"2025-10-14T11:56:11.733000+00:00","flags":0,"components":[],"id":"1427625940694990962","channel_id":"1427336559627079824","author":{"id":"1426927551384780800","username":"polyard_25990_55103","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"polyard","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":17},{"type":0,"content":"OK ... try to add your CA to the machine where you've infrahubctl installed ... if it's debian as I remember copy your ca to /usr/local/share/ca-certificates/ then run sudo update-ca-certificates ... IMHO it has nothing to do with Infrahub","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-10-14T11:51:56.503000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1427624968597934151","channel_id":"1427336559627079824","author":{"id":"1254387763982106755","username":"tomek_79993","avatar":"ee65e170c3ce092e2492985d62ee298d","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Tomek","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":16},{"type":0,"content":"echo $INFRAHUB_TLS_CA_FILE\n/home/xxx/tmp/ca.crt\n\n-> works","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-10-14T11:48:49.896000+00:00","edited_timestamp":"2025-10-14T11:51:33.028000+00:00","flags":0,"components":[],"id":"1427624185911443558","channel_id":"1427336559627079824","author":{"id":"1426927551384780800","username":"polyard_25990_55103","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"polyard","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":15},{"type":0,"content":"cat ~/.config/infrahubctl.toml\nserver_address=\"https://example.org\"\napi_token=\"xxxx\"\n#tls_insecure=true\n#TLS_CA_FILE=\"/home/xxx/tmp/ca.crt\"\n#tls_ca_file=\"/home/xxx/tmp/ca.crt\"\n\n$ echo $INFRAHUBCTL_CONFIG\n/home/xxx/.config/infrahubctl.toml","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-10-14T11:46:47.874000+00:00","edited_timestamp":"2025-10-14T11:47:14.039000+00:00","flags":0,"components":[],"id":"1427623674114084904","channel_id":"1427336559627079824","author":{"id":"1426927551384780800","username":"polyard_25990_55103","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"polyard","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":14},{"type":0,"content":"INFRAHUB_TLS_CA_FILE as env var works","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-10-14T11:45:23.803000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1427623321494622290","channel_id":"1427336559627079824","author":{"id":"1426927551384780800","username":"polyard_25990_55103","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"polyard","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":13},{"type":0,"content":"Can you post the contents of your `infrahubctl.toml` file? And where is the file located on the filesystem?","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-10-14T11:45:23.085000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1427623318483374272","channel_id":"1427336559627079824","author":{"id":"1221732604806692884","username":"w_vandeun","avatar":"e9ac2093c5e49a4a05a41b375db9ac69","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Wim","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false,"position":12},{"type":0,"content":"Just tried again and it does not work","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-10-14T11:44:24.281000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1427623071841390622","channel_id":"1427336559627079824","author":{"id":"1426927551384780800","username":"polyard_25990_55103","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"polyard","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":11},{"type":0,"content":"I tried to use \"tls_ca_file=\"/home/test/tmp/ca.file\"  in the infrahubctl.toml before, it does not work","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-10-14T11:43:41.196000+00:00","edited_timestamp":"2025-10-14T11:43:56.722000+00:00","flags":0,"components":[],"id":"1427622891129667675","channel_id":"1427336559627079824","author":{"id":"1426927551384780800","username":"polyard_25990_55103","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"polyard","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":10},{"type":0,"content":"I solved this with \"export SSL_CERT_FILE=CA.file\"","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-10-14T11:37:59.681000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1427621458712199252","channel_id":"1427336559627079824","author":{"id":"1426927551384780800","username":"polyard_25990_55103","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"polyard","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":9},{"type":0,"content":"The SDK has a configuration setting `TLS_CA_FILE` \nhttps://docs.infrahub.app/python-sdk/reference/config#tls_ca_file\nYou can configure that in the configuration file `infrahubctl.toml` by default, or use the `INFRAHUB_TLS_CA_FILE` environment variable.","mentions":[],"mention_roles":[],"attachments":[],"embeds":[{"type":"article","url":"https://docs.infrahub.app/python-sdk/reference/config","title":"Python SDK Configuration | Infrahub Documentation","description":"The Python SDK (Async or Sync) client can be configured using an instance of the Config class.","content_scan_version":2}],"timestamp":"2025-10-14T11:37:56.851000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1427621446842318949","channel_id":"1427336559627079824","author":{"id":"1221732604806692884","username":"w_vandeun","avatar":"e9ac2093c5e49a4a05a41b375db9ac69","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Wim","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false,"position":8,"reactions":[{"emoji":{"id":null,"name":"ðŸ‘€"},"count":1,"count_details":{"burst":0,"normal":1},"burst_colors":[],"me_burst":false,"burst_me":false,"me":false,"burst_count":0}]},{"type":0,"content":"So I have to pass the private CA file to infrahubctl so is is accepting the private cert from the reverse proxy","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-10-14T11:37:26.610000+00:00","edited_timestamp":"2025-10-14T11:37:33.720000+00:00","flags":0,"components":[],"id":"1427621320002109550","channel_id":"1427336559627079824","author":{"id":"1426927551384780800","username":"polyard_25990_55103","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"polyard","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":7},{"type":0,"content":"my problem was two folded: \n1. IPv6 -> solved via nginx config\n2. infrahubctl: httpx module does not like unknown/invalidated certs","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-10-14T11:36:51.042000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1427621170819366993","channel_id":"1427336559627079824","author":{"id":"1426927551384780800","username":"polyard_25990_55103","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"polyard","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":6},{"type":0,"content":"<@1426927551384780800> OK ...you mean .infrahub.yml (mentioned as .toml). I think we have to separate here server deployment (docker or in case of production I would rather go with k8s - with respective docker-compose.yml or helm charts ) from .infrahub.yml (it's configuration for infrahub, containing definition of checks, generators, schemas etc.).\nIf you would like to update/intsall private CA you have to do it on the virtualization layer during server build process as well as service exposure (using LB - then you need to take care about certificates by yourself)\n\nLooking on your case - the traffic goes like this (correct me if I'm wrong):\nyour PC with infrahub-sdk ---> nginx as loadbalancer --->  Infrahub \nCan you share the logs from nginx and infrahub-server ?\nAlso nginx configuration may be helpful .. as we don't see all picture","mentions":[{"id":"1426927551384780800","username":"polyard_25990_55103","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"polyard","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null}],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-10-14T11:32:21.564000+00:00","edited_timestamp":"2025-10-14T11:33:06.674000+00:00","flags":0,"components":[],"id":"1427620040546455686","channel_id":"1427336559627079824","author":{"id":"1254387763982106755","username":"tomek_79993","avatar":"ee65e170c3ce092e2492985d62ee298d","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Tomek","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":5},{"type":19,"content":"had to make nginx listen for v6 as well:\n\n```\nserver {\n    listen 443 ssl;\n    listen [::]:443 ssl;\n    http2 on;\n```\nthat did the trick","mentions":[{"id":"1254387763982106755","username":"tomek_79993","avatar":"ee65e170c3ce092e2492985d62ee298d","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Tomek","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null}],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-10-14T11:31:57.687000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1427619940399317072","channel_id":"1427336559627079824","author":{"id":"1426927551384780800","username":"polyard_25990_55103","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"polyard","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"message_reference":{"type":0,"channel_id":"1427336559627079824","message_id":"1427360318597632000","guild_id":"1212332642801025064"},"position":4,"referenced_message":{"type":0,"content":"It's worth to review deployment settings https://docs.infrahub.app/reference/configuration. Also I would check the communication from your nginx (you have single backend server configured ?) to the VM where infrahub is deployed.","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-10-13T18:20:19.026000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1427360318597632000","channel_id":"1427336559627079824","author":{"id":"1254387763982106755","username":"tomek_79993","avatar":"ee65e170c3ce092e2492985d62ee298d","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Tomek","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":2}},{"type":19,"content":"Sorry, but I am not sure I understand you <@1254387763982106755>. I was referring to the configuration file read by infrahubctl  (INFRAHUBCTL_CONFIG) and that an option for the the custom CA might be helpful.","mentions":[{"id":"1254387763982106755","username":"tomek_79993","avatar":"ee65e170c3ce092e2492985d62ee298d","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Tomek","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null}],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-10-14T11:07:26.027000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1427613767809630208","channel_id":"1427336559627079824","author":{"id":"1426927551384780800","username":"polyard_25990_55103","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"polyard","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"message_reference":{"type":0,"channel_id":"1427336559627079824","message_id":"1427354214128025700","guild_id":"1212332642801025064"},"position":3,"referenced_message":{"type":0,"content":"<@1426927551384780800> I'm trying to understand what pyproject.toml should have in common with you private CA ?","mentions":[{"id":"1426927551384780800","username":"polyard_25990_55103","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"polyard","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null}],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-10-13T17:56:03.607000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1427354214128025700","channel_id":"1427336559627079824","author":{"id":"1254387763982106755","username":"tomek_79993","avatar":"ee65e170c3ce092e2492985d62ee298d","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Tomek","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":1}},{"type":0,"content":"It's worth to review deployment settings https://docs.infrahub.app/reference/configuration. Also I would check the communication from your nginx (you have single backend server configured ?) to the VM where infrahub is deployed.","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-10-13T18:20:19.026000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1427360318597632000","channel_id":"1427336559627079824","author":{"id":"1254387763982106755","username":"tomek_79993","avatar":"ee65e170c3ce092e2492985d62ee298d","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Tomek","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":2},{"type":0,"content":"<@1426927551384780800> I'm trying to understand what pyproject.toml should have in common with you private CA ?","mentions":[{"id":"1426927551384780800","username":"polyard_25990_55103","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"polyard","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null}],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-10-13T17:56:03.607000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1427354214128025700","channel_id":"1427336559627079824","author":{"id":"1254387763982106755","username":"tomek_79993","avatar":"ee65e170c3ce092e2492985d62ee298d","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Tomek","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":1},{"type":0,"content":"```\n$ time uv run ~/tmp/infrahub-sdk/bin/infrahubctl info\n Address:            https://infrahub.exmaple.com\n Connection Status:  :white_check_mark:\n Python Version:     3.13.7\n SDK Version:        1.14.0\n Infrahub Version:   1.4.10\n User:               Admin\n\nreal    3m1,554s\nuser    0m0,884s\nsys     0m0,119s\n```\n\n`curl -k https://infrahubexmaple.com/metrics`works fine, as well as the webgui from browser (no lag or delay out of the ordinary).\n\nturns out: using the IPv4 address in the config files works great, but the fqdn with AAAA records need 3min to fall back to IPv4.\n\nSuggestions:\n- a more verbose error message for infrahubctl due to private cA/Cert would be great\n- a infrahub.toml config option for CA file would help\n- not a docker expert but doesn't docker support v6 since some time? maybe adding according config to the config file might be an idea?","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-10-13T16:46:21.688000+00:00","edited_timestamp":"2025-10-13T16:51:04.066000+00:00","flags":0,"components":[],"id":"1427336673888440422","channel_id":"1427336559627079824","author":{"id":"1426927551384780800","username":"polyard_25990_55103","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"polyard","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false},{"type":0,"content":"hello, doing my first steps with infrahub (docker compose on debian trixie).\nRunning infrahubctl on the VM directly querying via port 8000 works fine:\n\n```\nVM$ time uv run ~/infrahub-sdk/bin/infrahubctl info\n Address:            http://localhost:8000\n Connection Status:  :white_check_mark:\n Python Version:     3.13.5\n SDK Version:        1.14.0\n Infrahub Version:   1.4.10\n User:               Admin\n\nreal    0m0.828s\nuser    0m0.661s\nsys     0m0.078s\n```\n\ntrying to do this from my laptop is taking a long time.\n\nI installed nginx (1.26.3) on the VM and used the config from https://docs.infrahub.app/guides/production-deployment  with\n\n```\nupstream infrahub_backend {\n    server localhost:8000 max_fails=3 fail_timeout=30s;\n}\n```\n(and the custom cert)\n```\nlaptop$ time uv run ~/tmp/infrahub-sdk/bin/infrahubctl info\nUnable to connect to https://ih.in.dfn.de ..\n Address:            https://ih.in.dfn.de\n Connection Status:  :x:\n Connection Error:   Unable to connect to 'https://ih.in.dfn.de'. (ServerNotReachableError)\n Python Version:     3.13.7\n SDK Version:        1.14.0\n Infrahub Version:   N/A\n\nreal    1m1,355s\nuser    0m0,838s\nsys     0m0,193s\n```\n\nabove times out, took me a while to get that it is due to the private TLS cert. So I helped myself with \"export SSL_CERT_FILE=ca.crt\" to let httpx know where the custom CA is to be found (adding this to the laptops ca store works as well, but I do not want to trust this CA for everything). Now I can connect successfully, BUT it takes ~ages~ 3min:","mentions":[],"mention_roles":[],"attachments":[],"embeds":[{"type":"article","url":"https://docs.infrahub.app/guides/production-deployment","title":"How to deploy Infrahub in production | Infrahub Documentation","description":"This guide walks you through deploying Infrahub in a production environment with enhanced security, reliability, and maintainability. By following these steps, you'll set up a production-ready Infrahub instance that follows industry best practices.","content_scan_version":2}],"timestamp":"2025-10-13T16:45:54.446000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1427336559627079824","channel_id":"1427336559627079824","author":{"id":"1426927551384780800","username":"polyard_25990_55103","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"polyard","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false}]}