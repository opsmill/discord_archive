[{"thread":{"id":"1438877030174425149","type":11,"last_message_id":"1440744054785835078","flags":0,"guild_id":"1212332642801025064","name":"deleted branches","parent_id":"1301914405176475729","rate_limit_per_user":0,"bitrate":64000,"user_limit":0,"rtc_region":null,"owner_id":"655596743605485570","thread_metadata":{"archived":false,"archive_timestamp":"2025-11-14T13:03:37.036000+00:00","auto_archive_duration":4320,"locked":false,"create_timestamp":"2025-11-14T13:03:37.036000+00:00"},"message_count":18,"member_count":5,"total_message_sent":19,"applied_tags":["1304062716125773886"]},"messages":[{"type":0,"content":"will report back","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-11-19T16:42:30.391000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1440744054785835078","channel_id":"1438877030174425149","author":{"id":"655596743605485570","username":"overloadbit","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"overloadbit","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":18},{"type":0,"content":"cool, i just upgraded to 1.5.2","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-11-19T16:42:10.158000+00:00","edited_timestamp":"2025-11-20T16:40:09.787000+00:00","flags":0,"components":[],"id":"1440743969922224249","channel_id":"1438877030174425149","author":{"id":"655596743605485570","username":"overloadbit","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"overloadbit","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":17},{"type":0,"content":"fix is in the latest release: 1.5.2","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-11-19T16:40:59.843000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1440743674999996438","channel_id":"1438877030174425149","author":{"id":"1219339234947760279","username":"nermut_bundaloy","avatar":"727b45a591264174342d3251901069eb","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"nermut","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":16},{"type":0,"content":"thanks, that is very helpful\nI believe I see the issue\nworking on test to reproduce now","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-11-17T18:16:14.091000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1440042866561912976","channel_id":"1438877030174425149","author":{"id":"1219339234947760279","username":"nermut_bundaloy","avatar":"727b45a591264174342d3251901069eb","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"nermut","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":14,"reactions":[{"emoji":{"id":null,"name":"üëç"},"count":1,"count_details":{"burst":0,"normal":1},"burst_colors":[],"me_burst":false,"burst_me":false,"me":false,"burst_count":0}]},{"type":19,"content":"I think i see them whenever a branch is merged","mentions":[{"id":"947196486624624671","username":"ogenstad","avatar":"e70a46e717089dbdb89d232d636b761a","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Patrick Ogenstad","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null}],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-11-17T18:09:20.252000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1440041130795470971","channel_id":"1438877030174425149","author":{"id":"655596743605485570","username":"overloadbit","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"overloadbit","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"message_reference":{"type":0,"channel_id":"1438877030174425149","message_id":"1439977766761136128","guild_id":"1212332642801025064"},"position":13,"referenced_message":{"type":0,"content":"Are these branches that have been deleted recently? I'd expect to see something like this if a branch is deleted at the same time as a diff is requested, but the error should not be repeated after the fact. There's an issue in that task in the sense that it should log a warning if a requested branch isn't found in this situation. But I'm not yet sure why you'd see the same time over and over. Is there any specific frequency?","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-11-17T13:57:33.089000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1439977766761136128","channel_id":"1438877030174425149","author":{"id":"947196486624624671","username":"ogenstad","avatar":"e70a46e717089dbdb89d232d636b761a","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Patrick Ogenstad","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":7}},{"type":0,"content":"some of these branches were created and then simply deleted while some were merged and then deleted.","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-11-17T14:45:59.887000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1439989958755618876","channel_id":"1438877030174425149","author":{"id":"655596743605485570","username":"overloadbit","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"overloadbit","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":12},{"type":0,"content":"hi all\nI suspect this might come from how we handle recalculating diffs after a branch is merged or rebased\ndo either of you remember if you merged or rebased a branch before seeing these errors?","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-11-17T14:43:54.220000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1439989431669882970","channel_id":"1438877030174425149","author":{"id":"1219339234947760279","username":"nermut_bundaloy","avatar":"727b45a591264174342d3251901069eb","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"nermut","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":11},{"type":0,"content":"how does the task manager to know for which branches it needs to calculate diff ? may be i can run that query to see which branches are still available","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-11-17T14:37:32.053000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1439987828745306223","channel_id":"1438877030174425149","author":{"id":"655596743605485570","username":"overloadbit","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"overloadbit","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":10},{"type":0,"content":"some of those branches have been deleted for months","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-11-17T14:30:37.223000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1439986088822181930","channel_id":"1438877030174425149","author":{"id":"655596743605485570","username":"overloadbit","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"overloadbit","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":9},{"type":0,"content":"I opened this bug (https://github.com/opsmill/infrahub/issues/7666), though this one is mainly to ensure that the error / warning is more user-friendly than today.","mentions":[],"mention_roles":[],"attachments":[],"embeds":[{"type":"article","url":"https://github.com/opsmill/infrahub/issues/7666),","title":"opsmill/infrahub","description":"Infrahub is a graph-based data management platform with built-in version control, CI workflows, peer review, and API access. It‚Äôs purpose-built to power reliable infrastructure automation at scale....","color":1975079,"provider":{"name":"GitHub"},"thumbnail":{"url":"https://repository-images.githubusercontent.com/528799794/9923fd8f-9f0e-44a4-97ad-1ec81a3e0046","proxy_url":"https://images-ext-1.discordapp.net/external/yif4JFNe61IUdbm075SVddIANj1I2Tj6Qu7wclLSL0g/https/repository-images.githubusercontent.com/528799794/9923fd8f-9f0e-44a4-97ad-1ec81a3e0046","width":1280,"height":640,"content_type":"image/png","placeholder":"z6YJHIp3eHh/iId2iIeGcGUIVw==","placeholder_version":1,"description":"Infrahub is a graph-based data management platform with built-in version control, CI workflows, peer review, and API access. It‚Äôs purpose-built to power reliable infrastructure automation at scale....","flags":0},"content_scan_version":2}],"timestamp":"2025-11-17T14:12:54.426000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1439981631128604712","channel_id":"1438877030174425149","author":{"id":"947196486624624671","username":"ogenstad","avatar":"e70a46e717089dbdb89d232d636b761a","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Patrick Ogenstad","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":8},{"type":0,"content":"Are these branches that have been deleted recently? I'd expect to see something like this if a branch is deleted at the same time as a diff is requested, but the error should not be repeated after the fact. There's an issue in that task in the sense that it should log a warning if a requested branch isn't found in this situation. But I'm not yet sure why you'd see the same time over and over. Is there any specific frequency?","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-11-17T13:57:33.089000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1439977766761136128","channel_id":"1438877030174425149","author":{"id":"947196486624624671","username":"ogenstad","avatar":"e70a46e717089dbdb89d232d636b761a","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Patrick Ogenstad","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":7},{"type":0,"content":"here's the log from one of the failed task","mentions":[],"mention_roles":[],"attachments":[{"id":"1439920610292793386","filename":"image.png","size":171983,"url":"https://cdn.discordapp.com/attachments/1438877030174425149/1439920610292793386/image.png?ex=69340111&is=6932af91&hm=077996cf9674a4c1c108b1e1e1f3b832d6cf7c9da490dfb8e752580e144e67a5&","proxy_url":"https://media.discordapp.net/attachments/1438877030174425149/1439920610292793386/image.png?ex=69340111&is=6932af91&hm=077996cf9674a4c1c108b1e1e1f3b832d6cf7c9da490dfb8e752580e144e67a5&","width":3422,"height":604,"content_type":"image/png","original_content_type":"image/png","content_scan_version":2,"placeholder":"/vcBAYABRnm6jClUQOURhG8=","placeholder_version":1}],"embeds":[],"timestamp":"2025-11-17T10:10:26.022000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1439920610699509891","channel_id":"1438877030174425149","author":{"id":"655596743605485570","username":"overloadbit","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"overloadbit","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":6},{"type":0,"content":"I have approximately ~6k failed task and increasing where infrahub tries to do a diff for a deleted branch","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-11-17T10:09:45.315000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1439920439961845772","channel_id":"1438877030174425149","author":{"id":"655596743605485570","username":"overloadbit","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"overloadbit","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":5},{"type":0,"content":"I had similar situation. I'm on 1.4.12 too.","mentions":[],"mention_roles":[],"attachments":[{"id":"1439838686140305523","filename":"Screenshot_2025-11-17_at_12.43.54_PM.png","size":244245,"url":"https://cdn.discordapp.com/attachments/1438877030174425149/1439838686140305523/Screenshot_2025-11-17_at_12.43.54_PM.png?ex=6933b4c5&is=69326345&hm=b8b19ad9e70508291efc1327a5d4648009b8211a3e6f0798dd897d1e9178c652&","proxy_url":"https://media.discordapp.net/attachments/1438877030174425149/1439838686140305523/Screenshot_2025-11-17_at_12.43.54_PM.png?ex=6933b4c5&is=69326345&hm=b8b19ad9e70508291efc1327a5d4648009b8211a3e6f0798dd897d1e9178c652&","width":2466,"height":1036,"content_type":"image/png","original_content_type":"image/png","content_scan_version":2,"placeholder":"/gcCA4A1BqFTZ4lHClWjcDY=","placeholder_version":1,"title":"Screenshot 2025-11-17 at 12.43.54‚ÄØPM"},{"id":"1439838686488301638","filename":"Screenshot_2025-11-17_at_12.44.04_PM.png","size":358238,"url":"https://cdn.discordapp.com/attachments/1438877030174425149/1439838686488301638/Screenshot_2025-11-17_at_12.44.04_PM.png?ex=6933b4c5&is=69326345&hm=435a046d1b7576123cee4d507086a5354d4e2f43ee3d5cbfa257d0b015203644&","proxy_url":"https://media.discordapp.net/attachments/1438877030174425149/1439838686488301638/Screenshot_2025-11-17_at_12.44.04_PM.png?ex=6933b4c5&is=69326345&hm=435a046d1b7576123cee4d507086a5354d4e2f43ee3d5cbfa257d0b015203644&","width":2484,"height":1172,"content_type":"image/png","original_content_type":"image/png","content_scan_version":2,"placeholder":"/fcBA4BimHifiFeVoN8n6N8=","placeholder_version":1,"title":"Screenshot 2025-11-17 at 12.44.04‚ÄØPM"}],"embeds":[],"timestamp":"2025-11-17T04:44:53.816000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1439838686689759353","channel_id":"1438877030174425149","author":{"id":"846244078575943680","username":"jinh0e","avatar":"64dabc243532002393161796f39770a0","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Jin","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":4},{"type":0,"content":"I'll send you tomorrow","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-11-16T21:44:26.167000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1439732874260779108","channel_id":"1438877030174425149","author":{"id":"655596743605485570","username":"overloadbit","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"overloadbit","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":3},{"type":0,"content":"Can you show us such a task? It would not really expect this. AFAIK there is nothing really in the system that would trigger a recomputation of a diff for a branch that doesn't exist. Could it be that there are still proposed changes for these branches?","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-11-14T23:23:41.071000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1439033075206979735","channel_id":"1438877030174425149","author":{"id":"1221732604806692884","username":"w_vandeun","avatar":"e9ac2093c5e49a4a05a41b375db9ac69","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Wim","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false,"position":2},{"type":0,"content":"Yeah in the task manager","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-11-14T20:18:49.141000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1438986552280612904","channel_id":"1438877030174425149","author":{"id":"655596743605485570","username":"overloadbit","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"overloadbit","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":1},{"type":0,"content":"How are you seeing that? Are there tasks showing up in the system for this?","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-11-14T19:46:28.042000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1438978410721579089","channel_id":"1438877030174425149","author":{"id":"1221732604806692884","username":"w_vandeun","avatar":"e9ac2093c5e49a4a05a41b375db9ac69","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Wim","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false},{"type":0,"content":"I am observing that infrahub keeps trying to run diff for old deleted branches and the task fails. Is there a way to stop this from happening ?\n\nI am on 1.4.12 currently.","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-11-14T13:03:37.036000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1438877030174425149","channel_id":"1438877030174425149","author":{"id":"655596743605485570","username":"overloadbit","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"overloadbit","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false}]}]