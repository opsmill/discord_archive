[{"thread":{"id":"1381101887272784032","type":11,"last_message_id":"1385198877837365248","flags":0,"guild_id":"1212332642801025064","name":"Mapping Infrahub attributes to Nornir host data{} dict","parent_id":"1301914405176475729","rate_limit_per_user":0,"bitrate":64000,"user_limit":0,"rtc_region":null,"owner_id":"402535819904155659","thread_metadata":{"archived":true,"archive_timestamp":"2025-07-19T10:12:32.443000+00:00","auto_archive_duration":4320,"locked":false,"create_timestamp":"2025-06-08T02:45:49.558000+00:00"},"message_count":18,"member_count":4,"total_message_sent":18,"applied_tags":["1301915943663960064","1322475882421555200"]},"messages":[{"type":0,"content":"I understand your point of view. \nAnsible and Nornir work differently in that way and I wouldn't try to use them in the exact same way. Personally I like the approach above, where things need to be explicit.\n\nFor sure you could implement a single filter parameter and have it like `--filter host=xyz,group=role__spine`","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-06-19T10:05:48.227000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1385198877837365248","channel_id":"1381101887272784032","author":{"id":"1221732604806692884","username":"w_vandeun","avatar":"e9ac2093c5e49a4a05a41b375db9ac69","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Wim","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false,"position":17},{"type":0,"content":"mabye there is a better way that I'm overlooking üôÇ","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-06-18T23:48:45.754000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1385043594330505316","channel_id":"1381101887272784032","author":{"id":"402535819904155659","username":"dhoutz","avatar":"42d146479ee847fb003481fd78a7311f","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Dan Houtz","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":16},{"type":0,"content":"So instead of:\n\n```\n$ deploy_config.py --filter spine1.ord0,edge1.ord0\n$ deploy_config.py --filter role__spine\n```\n\nI am currently doing: \n\n```\n$ deploy_config.py --groups role__spine\n$ deploy_config.py --hosts spine1.ord0,edge1.ord0\n```\n\nwhere I need to manage two different cli parameters\n\nWith code looking like:\n\n```\n@cli.command()\n@click.option(\"--groups\", default=\"\")\n@click.option(\"--hosts\", default=\"\")\n@click.option(\"--commit/--no-commit\", default=False)\ndef deploy(groups: str, hosts: str, commit) -> None:\n  nr = InitNornir(config_file=\"config.yml\")\n\n  if len(hosts) > 1 :\n    inventory = nr.filter(lambda host: host.name in hosts)\n  else:\n    if filter == \"\":\n      inventory = nr\n    else:\n      inventory = filter_inventory(nr, groups)\n\n  results = inventory.run(task=deploy_config, commit=commit)\n  print_result(results)\n```","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-06-18T23:48:28.293000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1385043521094029375","channel_id":"1381101887272784032","author":{"id":"402535819904155659","username":"dhoutz","avatar":"42d146479ee847fb003481fd78a7311f","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Dan Houtz","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":15},{"type":0,"content":"To aadd some more details on what I'm thinking.... I'm using https://mayuresh82.github.io/2020/12/25/nornir_inventories/ as inspiration for filtering with click based nornir tool.  The idea with creating a group for each unique device is that a single cli parameter can then be used to filter by host or group.","mentions":[],"mention_roles":[],"attachments":[],"embeds":[{"type":"link","url":"https://mayuresh82.github.io/2020/12/25/nornir_inventories/","title":"Building Dynamic Inventories in Nornir","description":"Network Automation Blog with a focus on real world problems","provider":{"name":"NRE-Bytes"},"thumbnail":{"url":"https://mayuresh82.github.io/img/banner-main.jpg","proxy_url":"https://images-ext-1.discordapp.net/external/CXejnwsn-Mv_PVKV6YHr1O5VDt_1NPFUBzI41uhYvoE/https/mayuresh82.github.io/img/banner-main.jpg","width":1280,"height":853,"content_type":"image/jpeg","placeholder":"DscNFYRmd3iAiHiIh3eIeJpvuvqW","placeholder_version":1,"flags":0},"content_scan_version":2}],"timestamp":"2025-06-18T23:06:38.971000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1385032996234592360","channel_id":"1381101887272784032","author":{"id":"402535819904155659","username":"dhoutz","avatar":"42d146479ee847fb003481fd78a7311f","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Dan Houtz","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":14},{"type":0,"content":"Intention was so that I could pass a single filter parameter to nornir and it would work regardless of weather I‚Äôm trying to filter on a group(s) or list of hosts. Sort of how ‚Äîlimit works with Ansible.","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-06-18T10:12:36.552000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1384838202610810901","channel_id":"1381101887272784032","author":{"id":"402535819904155659","username":"dhoutz","avatar":"42d146479ee847fb003481fd78a7311f","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Dan Houtz","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":13},{"type":0,"content":"That is intended behaviour. Typically we would see it more used for relationships though. \n\nFor example the `site.name` would create a group for every site relationship that we find in all the hosts and use the site's name attribute for the name. Given the demo environment schema and data it would for example create a group `site__atl1` and add all the devices in that site to that group. The group names will be of form `<relationship_name>__<relationship_attribute_value>`\n\nIt works with attributes as well, and then you get the exact same behaviour, for name it might not make a lot of sense, but it would when you have a roll attribute.\n\nNot sure why you would want to create a group for each device name though?","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-06-18T04:42:38.563000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1384755163826487296","channel_id":"1381101887272784032","author":{"id":"1221732604806692884","username":"w_vandeun","avatar":"e9ac2093c5e49a4a05a41b375db9ac69","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Wim","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false,"position":12},{"type":0,"content":"Another infrahub-nornir plugin question.... is is possible to create a group match the namog of the device (similar to how Ansible grouns bahave. I added a mapping for name.value. but that results in a group named, for example, \"name__edge1-ord0\" where I'd the group to simple be \"edge1.ord0\"","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-06-17T14:57:30.454000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1384547511766880330","channel_id":"1381101887272784032","author":{"id":"402535819904155659","username":"dhoutz","avatar":"42d146479ee847fb003481fd78a7311f","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Dan Houtz","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":11},{"type":0,"content":"That did the trick <@1221732604806692884> !! Many thanks. It would probably be good do add an exampe of this to the documentation","mentions":[{"id":"1221732604806692884","username":"w_vandeun","avatar":"e9ac2093c5e49a4a05a41b375db9ac69","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Wim","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}}],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-06-13T14:22:24.071000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1383089125493837917","channel_id":"1381101887272784032","author":{"id":"402535819904155659","username":"dhoutz","avatar":"42d146479ee847fb003481fd78a7311f","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Dan Houtz","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":10,"reactions":[{"emoji":{"id":null,"name":"‚ù§Ô∏è"},"count":1,"count_details":{"burst":0,"normal":1},"burst_colors":[],"me_burst":false,"burst_me":false,"me":false,"burst_count":0},{"emoji":{"id":null,"name":"üëç"},"count":1,"count_details":{"burst":0,"normal":1},"burst_colors":[],"me_burst":false,"burst_me":false,"me":false,"burst_count":0}]},{"type":0,"content":"This are great questions and answers--thanks Dan and Wim.  I remember struggling with Nornir inventories in nautobot as well, I think it's counterintuitive at first.","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-06-11T14:44:24.080000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1382369886281531404","channel_id":"1381101887272784032","author":{"id":"582311094438199328","username":"bellastr","avatar":"f12d5817933fd159ad8026ffc22ceadc","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"BellaStr","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":9},{"type":0,"content":"Groups are an option.\n\nFilter functions also work, here's an example:\n```python\nfrom nornir import InitNornir\n\nnr = InitNornir(\n    inventory={\n        \"plugin\": \"InfrahubInventory\",\n        \"options\": {\n            \"address\": \"https://demo.infrahub.app\",\n            \"token\": \"06438eb2-8019-4776-878c-0941b1f1d1ec\",\n            \"host_node\": {\"kind\": \"InfraDevice\"},\n            \"schema_mappings\": [\n                {\"name\": \"hostname\", \"mapping\": \"primary_address.address\"},\n                {\"name\": \"platform\", \"mapping\": \"platform.nornir_platform\"},\n            ],\n            \"group_mappings\": [\"site.name\"],\n        },\n    }\n)\n\natl_devices = nr.filter(filter_func=lambda host: host.data[\"InfrahubNode\"].site.peer.name.value == \"atl1\")\nprint(atl_devices.inventory.hosts)\n```","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-06-11T06:03:34.672000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1382238816764690463","channel_id":"1381101887272784032","author":{"id":"1221732604806692884","username":"w_vandeun","avatar":"e9ac2093c5e49a4a05a41b375db9ac69","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Wim","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false,"position":8},{"type":0,"content":"or I guess I'd just have to map any attributes to a group and filter on that","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-06-11T03:02:50.560000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1382193333262356590","channel_id":"1381101887272784032","author":{"id":"402535819904155659","username":"dhoutz","avatar":"42d146479ee847fb003481fd78a7311f","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Dan Houtz","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":7},{"type":0,"content":"Interesting. So if only available using a task, I guess that means none of that data would be available to built an inventory filter?","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-06-11T03:01:46.746000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1382193065606910003","channel_id":"1381101887272784032","author":{"id":"402535819904155659","username":"dhoutz","avatar":"42d146479ee847fb003481fd78a7311f","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Dan Houtz","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":6},{"type":0,"content":"No, you can map Infrahub node attributes to the Nornir's host properties:\nhttps://github.com/nornir-automation/nornir/blob/6888a6344732291508ce6d9081181865fd945126/nornir/core/inventory.py#L239 This only works for the properties that exist on the Nornir host class.\n\nSo for example you can map the Nornir host \"platform\" property to the `nornir_platform` attribute value of the `platform` relationship of the node in Infrahub in question\n(https://docs.infrahub.app/nornir/references/plugins/infrahub_inventory#examples) \n\nWe also store the Infrahub Node in the data property of the Nornir Host instance usiing the \"InfrahubNode\" key.\n\nSo in your case, if you want to access the site you could do the following in a task\n```python\ntask.host.get(\"InfrahubNode\").site.fetch()\nprint(task.host.get(\"InfrahubNode\").site.peer.name.value)\n```","mentions":[],"mention_roles":[],"attachments":[],"embeds":[{"type":"article","url":"https://docs.infrahub.app/nornir/references/plugins/infrahub_inventory","title":"Inventory plugin | Infrahub Documentation","description":"InfrahubInventory","content_scan_version":2},{"type":"article","url":"https://github.com/nornir-automation/nornir/blob/6888a6344732291508ce6d9081181865fd945126/nornir/core/inventory.py","title":"nornir/nornir/core/inventory.py at 6888a6344732291508ce6d9081181865...","description":"Pluggable multi-threaded framework with inventory management to help operate collections of devices - nornir-automation/nornir","color":1975079,"provider":{"name":"GitHub"},"thumbnail":{"url":"https://opengraph.githubassets.com/c0b59b53b8bf656f83fb9a96addffab32b75bea3d88c149d09f07224655b8593/nornir-automation/nornir","proxy_url":"https://images-ext-1.discordapp.net/external/pwTFbVd-ci2NeEAr1MAa4R8RN80AY6JsuSMI3D3NqME/https/opengraph.githubassets.com/c0b59b53b8bf656f83fb9a96addffab32b75bea3d88c149d09f07224655b8593/nornir-automation/nornir","width":1200,"height":600,"description":"Pluggable multi-threaded framework with inventory management to help operate collections of devices - nornir-automation/nornir","flags":0},"content_scan_version":2}],"timestamp":"2025-06-10T05:45:56.105000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1381871988947161130","channel_id":"1381101887272784032","author":{"id":"1221732604806692884","username":"w_vandeun","avatar":"e9ac2093c5e49a4a05a41b375db9ac69","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Wim","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false,"position":5},{"type":0,"content":"I can see that the data dict contains an Infrahub object:\n\n```nr = InitNornir(config_file=\"config.yml\")\nhost = nr.inventory.hosts[\"edge1.ord0\"]\nprint(host.dict()['data']['InfrahubNode'])\nprint(type(host.dict()['data']['InfrahubNode']))\n\n----------------------------------------------------\n\n$ python test.py\nedge1.ord0\n<class 'infrahub_sdk.node.InfraDeviceInfrahubNodeSync'>```","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-06-09T16:32:17.722000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1381672262972739655","channel_id":"1381101887272784032","author":{"id":"402535819904155659","username":"dhoutz","avatar":"42d146479ee847fb003481fd78a7311f","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Dan Houtz","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":4},{"type":0,"content":"<@1221732604806692884> What you are saying is that I should be able to map any Infrahub properties/attributes to the  data{} dict of the nornir host correct?","mentions":[{"id":"1221732604806692884","username":"w_vandeun","avatar":"e9ac2093c5e49a4a05a41b375db9ac69","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Wim","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}}],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-06-09T14:55:10.286000+00:00","edited_timestamp":"2025-06-09T14:57:25.953000+00:00","flags":0,"components":[],"id":"1381647820934877408","channel_id":"1381101887272784032","author":{"id":"402535819904155659","username":"dhoutz","avatar":"42d146479ee847fb003481fd78a7311f","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Dan Houtz","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":3},{"type":0,"content":"We can only map to properties that Nornir implements on it‚Äôs Host. But the complete SDK object is available under the data property of the Nornir Host object.","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-06-09T07:10:41.871000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1381530932330369125","channel_id":"1381101887272784032","author":{"id":"1221732604806692884","username":"w_vandeun","avatar":"e9ac2093c5e49a4a05a41b375db9ac69","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Wim","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false,"position":2},{"type":0,"content":"Should be the pretty mcuh the same as from the base schema that ships with Infrahub: aside from I added a DeviceType relationship","mentions":[],"mention_roles":[],"attachments":[{"id":"1381384783464235109","filename":"Device.yml","size":3756,"url":"https://cdn.discordapp.com/attachments/1381101887272784032/1381384783464235109/Device.yml?ex=6933f795&is=6932a615&hm=cf046175e027df9c451be3b97666cbef2890f6b550c6fa7182c2779003356627&","proxy_url":"https://media.discordapp.net/attachments/1381101887272784032/1381384783464235109/Device.yml?ex=6933f795&is=6932a615&hm=cf046175e027df9c451be3b97666cbef2890f6b550c6fa7182c2779003356627&","content_type":"text/plain; charset=utf-8","content_scan_version":0}],"embeds":[],"timestamp":"2025-06-08T21:29:57.345000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1381384783795454073","channel_id":"1381101887272784032","author":{"id":"402535819904155659","username":"dhoutz","avatar":"42d146479ee847fb003481fd78a7311f","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Dan Houtz","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":1},{"type":0,"content":"Hi, Can you show us the schema of your device?","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-06-08T19:50:21.604000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1381359719720947793","channel_id":"1381101887272784032","author":{"id":"1221732604806692884","username":"w_vandeun","avatar":"e9ac2093c5e49a4a05a41b375db9ac69","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Wim","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false},{"type":0,"content":"Just digging into the Infrahub Nornir plugin and trying to pull Inventory data. I am able to get devices and groups but am hung up on mapping additional attributes to nornir's host data.\n\nI believe I need to use `schema_mappings` in the Inventory config but it only seems to to map top to top-level nornir host properties:\n\nFor example I have the following schema map:\n\n```schema_mappings:\n  - name: hostname\n    mapping: primary_address.address\n  - name: platform\n    mapping: platform.napalm_driver\n  - name: site\n    mapping: site\n  - name: role\n    mapping: role\n```\n\nIf I output the host's dict with Nornir it only has hostname and platform mapped:\n\n```$ python test.py\n{'connection_options': {},\n 'data': {'InfrahubNode': edge1.ord0},\n 'groups': ['juniper_devices', 'platform__junos', 'site__ord0', 'role__edge'],\n 'hostname': '172.16.50.1',\n 'name': 'edge1.ord0',\n 'password': None,\n 'platform': 'junos',\n 'port': None,\n 'username': None}\n```\n\nI was expecting to see `role` and `site` under `'data': {}` but must be misunderstanding something.","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-06-08T02:45:49.558000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1381101887272784032","channel_id":"1381101887272784032","author":{"id":"402535819904155659","username":"dhoutz","avatar":"42d146479ee847fb003481fd78a7311f","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Dan Houtz","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false}]}]