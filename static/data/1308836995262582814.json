[{"thread":{"id":"1308836995262582814","type":11,"last_message_id":"1320817166106230894","flags":0,"guild_id":"1212332642801025064","name":"Is there a way to dump schema to YAML?","parent_id":"1301914405176475729","rate_limit_per_user":0,"bitrate":64000,"user_limit":0,"rtc_region":null,"owner_id":"1268206427810435166","thread_metadata":{"archived":true,"archive_timestamp":"2025-01-22T18:18:42.594000+00:00","auto_archive_duration":4320,"locked":false,"create_timestamp":"2024-11-20T16:50:56.686000+00:00"},"message_count":8,"member_count":5,"total_message_sent":8,"applied_tags":["1301914864339648552"]},"messages":[{"type":0,"content":"and I need to add some filtering for my usecase","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-23T18:15:51.996000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1320817166106230894","channel_id":"1308836995262582814","author":{"id":"867799355921268767","username":"ubaumann","avatar":"6246a4fdf0eec315ad7d2a830626dc94","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"ubaumann","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":7},{"type":0,"content":"For now, I am doing something like this:\n\n```\nimport yaml\nfrom infrahub_sdk import InfrahubClient, Config\n\nfrom infrahub_sdk.schema import SchemaRoot, NodeSchema, GenericSchema, ProfileSchema\n\nasync def pull_infrahub_info(branch: str = \"main\"):\n    config = Config(address=\"https://demo.infrahub.app\", username=\"otto\", password=\"infrahub\")\n    schema = await InfrahubClient(config=config).schema.all(branch=branch)\n\n    sr = SchemaRoot(\n        version=\"1.0\",\n        generics=[x for x in schema.values() if isinstance(x, GenericSchema)],\n        nodes=[x for x in schema.values() if isinstance(x, NodeSchema)],\n        profiles=[x for x in schema.values() if isinstance(x, ProfileSchema)],\n    )\n    data = sr.model_dump(mode=\"json\", exclude_defaults=True, exclude_none=True)\n    print(yaml.safe_dump(data))\n```\nIt is not looking really pretty yet, but it can be optimised","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-23T18:14:47.159000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1320816894160408646","channel_id":"1308836995262582814","author":{"id":"867799355921268767","username":"ubaumann","avatar":"6246a4fdf0eec315ad7d2a830626dc94","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"ubaumann","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":6,"reactions":[{"emoji":{"id":null,"name":"üëç"},"count":1,"count_details":{"burst":0,"normal":1},"burst_colors":[],"me_burst":false,"burst_me":false,"me":false,"burst_count":0}]},{"type":0,"content":"FYI I opened this issue if you want to track it: https://github.com/opsmill/infrahub-sdk-python/issues/151","mentions":[],"mention_roles":[],"attachments":[],"embeds":[{"type":"article","url":"https://github.com/opsmill/infrahub-sdk-python/issues/151","title":"feature: Ability to export the schema in YAML format using infrahub...","description":"Component infrahubctl CLI Describe the Feature Request It would be good if infrahubctl could export the schema of a given Infrahub server in YAML format. The command should support filtering option...","color":1975079,"provider":{"name":"GitHub"},"content_scan_version":2}],"timestamp":"2024-11-25T15:32:46.981000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1310629264542007326","channel_id":"1308836995262582814","author":{"id":"947196486624624671","username":"ogenstad","avatar":"e70a46e717089dbdb89d232d636b761a","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Patrick Ogenstad","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":5,"reactions":[{"emoji":{"id":null,"name":"üôè"},"count":2,"count_details":{"burst":0,"normal":2},"burst_colors":[],"me_burst":false,"burst_me":false,"me":false,"burst_count":0}]},{"type":19,"content":"For me that would be desireable","mentions":[{"id":"947196486624624671","username":"ogenstad","avatar":"e70a46e717089dbdb89d232d636b761a","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Patrick Ogenstad","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null}],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-11-21T14:55:51.345000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1309170420028674099","channel_id":"1308836995262582814","author":{"id":"123965055434883073","username":"themar4321","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Themar","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"message_reference":{"type":0,"channel_id":"1308836995262582814","message_id":"1309066966002303017","guild_id":"1212332642801025064"},"position":4,"reactions":[{"emoji":{"id":null,"name":"üëç"},"count":1,"count_details":{"burst":0,"normal":1},"burst_colors":[],"me_burst":false,"burst_me":false,"me":false,"burst_count":0}],"referenced_message":{"type":0,"content":"There's nothing to dump it to Yaml but the /api/schema can be used to get the data and you can use a `branch` query param to indicate the desired branch. We could perhaps add something to infrahubctl that would save the result to yaml if that's desireable.","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-11-21T08:04:45.983000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1309066966002303017","channel_id":"1308836995262582814","author":{"id":"947196486624624671","username":"ogenstad","avatar":"e70a46e717089dbdb89d232d636b761a","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Patrick Ogenstad","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":3}},{"type":0,"content":"There's nothing to dump it to Yaml but the /api/schema can be used to get the data and you can use a `branch` query param to indicate the desired branch. We could perhaps add something to infrahubctl that would save the result to yaml if that's desireable.","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-11-21T08:04:45.983000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1309066966002303017","channel_id":"1308836995262582814","author":{"id":"947196486624624671","username":"ogenstad","avatar":"e70a46e717089dbdb89d232d636b761a","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Patrick Ogenstad","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":3,"reactions":[{"emoji":{"id":null,"name":"üôå"},"count":2,"count_details":{"burst":0,"normal":2},"burst_colors":[],"me_burst":false,"burst_me":false,"me":false,"burst_count":0}]},{"type":0,"content":"Good point - I would like that feature!","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-11-21T00:39:30.135000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1308954911613911121","channel_id":"1308836995262582814","author":{"id":"1268206427810435166","username":"scotho3","avatar":"90c6511092222bc6f42f2614fb0ebef7","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"scotho3","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false,"position":2},{"type":0,"content":"To add to this is there a way to dump the entire current schema for a branch to a YAML file?","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-11-20T20:32:21.605000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1308892716251349067","channel_id":"1308836995262582814","author":{"id":"123965055434883073","username":"themar4321","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Themar","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":1},{"type":0,"content":"nevermind - found it in the demo repo ü§ï","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-11-20T17:39:20.956000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1308849176653860934","channel_id":"1308836995262582814","author":{"id":"1268206427810435166","username":"scotho3","avatar":"90c6511092222bc6f42f2614fb0ebef7","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"scotho3","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false,"reactions":[{"emoji":{"id":null,"name":"üôå"},"count":1,"count_details":{"burst":0,"normal":1},"burst_colors":[],"me_burst":false,"burst_me":false,"me":false,"burst_count":0}]},{"type":0,"content":"I've loaded the demo schema, but I'm attempting to make changes via yaml. is there a way to dump that schema to git so that it can be modified?","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-11-20T16:50:56.686000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1308836995262582814","channel_id":"1308836995262582814","author":{"id":"1268206427810435166","username":"scotho3","avatar":"90c6511092222bc6f42f2614fb0ebef7","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"scotho3","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false}]}]