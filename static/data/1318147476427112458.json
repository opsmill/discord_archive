[{"thread":{"id":"1318147476427112458","type":11,"last_message_id":"1318164005256167496","flags":0,"guild_id":"1212332642801025064","name":"Upgrade Infrahub","parent_id":"1301914405176475729","rate_limit_per_user":0,"bitrate":64000,"user_limit":0,"rtc_region":null,"owner_id":"1303043080634630154","thread_metadata":{"archived":true,"archive_timestamp":"2025-01-15T10:41:51.662000+00:00","auto_archive_duration":4320,"locked":false,"create_timestamp":"2024-12-16T09:27:28.376000+00:00"},"message_count":12,"member_count":2,"total_message_sent":12,"applied_tags":["1301915235380363266"]},"messages":[{"type":0,"content":"Ok thanks - I currently have only a few devices and a basic schema so blew away all the containers, updated the image version in docker-compose to 1.0.9 and pulled and up and now running 1.0.9 - will look at the upgrade steps for the next time - thanks","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-16T10:33:09.156000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1318164005256167496","channel_id":"1318147476427112458","author":{"id":"1303043080634630154","username":"roger_59670","avatar":"339b471b2381d72ed3fc7392ed5b701d","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Roger","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":11},{"type":0,"content":"For the \"update version step\" you have a few different options:\n- export VERSION=\"1.0.9\"\n- add variable to docker compose","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-16T10:23:19.878000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1318161533645361173","channel_id":"1318147476427112458","author":{"id":"1259824777879752785","username":"baptiste_pro_38742","avatar":"6270c0e83569e285aefb7d8f0535f392","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Baptiste","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false,"position":10},{"type":0,"content":"Usually I go like this for upgrade:\n\n```shell\ndocker compose down \n\n# update version in docker-compose.yml\n\ndocker compose run infrahub-server infrahub db migrate \ndocker compose run infrahub-server infrahub db update-core-schema \ndocker compose up -d\n```","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-16T10:21:59.375000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1318161195991044098","channel_id":"1318147476427112458","author":{"id":"1259824777879752785","username":"baptiste_pro_38742","avatar":"6270c0e83569e285aefb7d8f0535f392","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Baptiste","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false,"position":9},{"type":0,"content":"Also rebooted and still seem to be on 1.0.7 ? 5d6f3b785d59   registry.opsmill.io/opsmill/infrahub:1.0.7   \"prefect worker starâ€¦\"   9 days ago       Up 32 seconds","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-16T10:08:20.179000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1318157760034242561","channel_id":"1318147476427112458","author":{"id":"1303043080634630154","username":"roger_59670","avatar":"339b471b2381d72ed3fc7392ed5b701d","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Roger","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":8},{"type":0,"content":"Thanks also getting my head around docker at the same time - getting this error - Error response from daemon: driver failed programming external connectivity on endpoint infrahub-database-1 (861ee7cb103bfc7b9d5079749af11c5616e29a6339f6ad2d7bf640a5631c5b30): Bind for 0.0.0.0:6362 failed: port is already allocated","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-16T10:04:11.138000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1318156715480322080","channel_id":"1318147476427112458","author":{"id":"1303043080634630154","username":"roger_59670","avatar":"339b471b2381d72ed3fc7392ed5b701d","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Roger","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":7},{"type":0,"content":"adding `docker compose run infrahub-server ` allows you to run the command within the container","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-16T10:02:08.488000+00:00","edited_timestamp":"2024-12-16T10:02:18.601000+00:00","flags":0,"components":[],"id":"1318156201048936479","channel_id":"1318147476427112458","author":{"id":"1259824777879752785","username":"baptiste_pro_38742","avatar":"6270c0e83569e285aefb7d8f0535f392","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Baptiste","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false,"position":6},{"type":0,"content":"humm indeed it's maybe not clear, so using `docker compose` commands would look like this:\n\n```\ndocker compose run infrahub-server infrahub db migrate \ndocker compose run infrahub-server infrahub db update-core-schema\n```","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-16T10:01:40.452000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1318156083457560606","channel_id":"1318147476427112458","author":{"id":"1259824777879752785","username":"baptiste_pro_38742","avatar":"6270c0e83569e285aefb7d8f0535f392","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Baptiste","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false,"position":5},{"type":0,"content":"Guide says to run the command from a container where Infrahub is installed - Im not exactly sure what that means - thanks","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-16T09:55:31.640000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1318154536547782739","channel_id":"1318147476427112458","author":{"id":"1303043080634630154","username":"roger_59670","avatar":"339b471b2381d72ed3fc7392ed5b701d","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Roger","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":4},{"type":0,"content":"What am I doing wrong here?","mentions":[],"mention_roles":[],"attachments":[{"id":"1318153228021530664","filename":"image.png","size":42629,"url":"https://cdn.discordapp.com/attachments/1318147476427112458/1318153228021530664/image.png?ex=6933fc5b&is=6932aadb&hm=d7361e8836d15345e63e53e71389d6180b6802ccd5d164b8143939f7145887c9&","proxy_url":"https://media.discordapp.net/attachments/1318147476427112458/1318153228021530664/image.png?ex=6933fc5b&is=6932aadb&hm=d7361e8836d15345e63e53e71389d6180b6802ccd5d164b8143939f7145887c9&","width":812,"height":170,"content_type":"image/png","content_scan_version":1,"placeholder":"iecFAYJvdYh6hnh39ZkKlJk=","placeholder_version":1}],"embeds":[],"timestamp":"2024-12-16T09:50:19.693000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1318153228147490898","channel_id":"1318147476427112458","author":{"id":"1303043080634630154","username":"roger_59670","avatar":"339b471b2381d72ed3fc7392ed5b701d","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Roger","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":3},{"type":0,"content":"Thanks will give it a go later!","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-16T09:35:48.590000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1318149574476431361","channel_id":"1318147476427112458","author":{"id":"1303043080634630154","username":"roger_59670","avatar":"339b471b2381d72ed3fc7392ed5b701d","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Roger","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":2,"reactions":[{"emoji":{"id":null,"name":"ðŸ™Œ"},"count":1,"count_details":{"burst":0,"normal":1},"burst_colors":[],"me_burst":false,"burst_me":false,"me":false,"burst_count":0}]},{"type":0,"content":"Ping me if there is any doubt ðŸ˜‰","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-16T09:31:29.028000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1318148485794627655","channel_id":"1318147476427112458","author":{"id":"1259824777879752785","username":"baptiste_pro_38742","avatar":"6270c0e83569e285aefb7d8f0535f392","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Baptiste","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false,"position":1},{"type":0,"content":"Morning Roger,\nYou can find the commands in the second half of the release note on Github: https://github.com/opsmill/infrahub/releases/tag/infrahub-v1.0.9\nIn a nutshell you need to update the version in docker-compose, then run the appropriate migration commands and finally reboot","mentions":[],"mention_roles":[],"attachments":[],"embeds":[{"type":"article","url":"https://github.com/opsmill/infrahub/releases/tag/infrahub-v1.0.9","title":"Release Infrahub - v1.0.9 Â· opsmill/infrahub","description":"Release 1.0.9\nThis release is a bug-fix release to resolve issues found in Infrahub v1.0.8 and prior.\nMain changes\nThe complete list of changes can always be found in the CHANGELOG.md file in the I...","color":1975079,"provider":{"name":"GitHub"},"thumbnail":{"url":"https://opengraph.githubassets.com/f6f903c8cd0c7d9a8052fc2f0d7e6feea7abcc721952e73764abc9c4fafbec05/opsmill/infrahub/releases/tag/infrahub-v1.0.9","proxy_url":"https://images-ext-1.discordapp.net/external/V-EBbheCmfYs5scvlk7HKJk5coMYg1OIBlyMEYChZA4/https/opengraph.githubassets.com/f6f903c8cd0c7d9a8052fc2f0d7e6feea7abcc721952e73764abc9c4fafbec05/opsmill/infrahub/releases/tag/infrahub-v1.0.9","width":1200,"height":600,"content_type":"image/png","placeholder":"/PcFDIJmiaiLh3iFeI+VX3L4Fw==","placeholder_version":1,"flags":0},"content_scan_version":2}],"timestamp":"2024-12-16T09:30:56.696000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1318148350184394802","channel_id":"1318147476427112458","author":{"id":"1259824777879752785","username":"baptiste_pro_38742","avatar":"6270c0e83569e285aefb7d8f0535f392","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Baptiste","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false},{"type":0,"content":"With V 1.0.9 out now, what is the correct procedure to upgrade? I am currently running 1.0.8","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-16T09:27:28.376000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1318147476427112458","channel_id":"1318147476427112458","author":{"id":"1303043080634630154","username":"roger_59670","avatar":"339b471b2381d72ed3fc7392ed5b701d","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Roger","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"reactions":[{"emoji":{"id":null,"name":"ðŸ‘‹"},"count":1,"count_details":{"burst":0,"normal":1},"burst_colors":[],"me_burst":false,"burst_me":false,"me":false,"burst_count":0}]}]}]