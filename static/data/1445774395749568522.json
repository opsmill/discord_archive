[{"thread":{"id":"1445774395749568522","type":11,"last_message_id":"1445837012379762822","flags":0,"guild_id":"1212332642801025064","name":"Unique constraint not reflected correctly in the schema","parent_id":"1301914405176475729","rate_limit_per_user":0,"bitrate":64000,"user_limit":0,"rtc_region":null,"owner_id":"918504524610695168","thread_metadata":{"archived":false,"archive_timestamp":"2025-12-03T13:51:17.136000+00:00","auto_archive_duration":4320,"locked":false,"create_timestamp":"2025-12-03T13:51:17.136000+00:00"},"message_count":10,"member_count":2,"total_message_sent":10,"applied_tags":["1301915943663960064"]},"messages":[{"type":0,"content":"Mmmh will have to try that I dont have more idea for now. \n3/ does sound like a huge to be others are more limitations than anything else ðŸ˜…","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-12-03T18:00:06.104000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1445837012379762822","channel_id":"1445774395749568522","author":{"id":"1133022375051542558","username":"shabear_dis","avatar":"e5046d674427373d76e2dde9dc74feb5","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Benito","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":9},{"type":0,"content":"by that I mean, explicitly setting it to `human_friendly_id: []` on the child doesn't remove it","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-12-03T16:48:32.115000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1445819002084393041","channel_id":"1445774395749568522","author":{"id":"918504524610695168","username":"dpeach44","avatar":"91d80b360d48938482b8a7e23147d057","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"dpeach","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":8},{"type":0,"content":"I also notice setting `human_friendly_id: []` on the generic works, it gets removed, but on the child it doesn't work, it is still present","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-12-03T16:38:05.320000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1445816373115879645","channel_id":"1445774395749568522","author":{"id":"918504524610695168","username":"dpeach44","avatar":"91d80b360d48938482b8a7e23147d057","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"dpeach","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":7},{"type":0,"content":"","mentions":[],"mention_roles":[],"attachments":[{"id":"1445814537767882895","filename":"Screenshot_2025-12-03_at_17.29.12.png","size":149098,"url":"https://cdn.discordapp.com/attachments/1445774395749568522/1445814537767882895/Screenshot_2025-12-03_at_17.29.12.png?ex=6933b177&is=69325ff7&hm=5e6eac4602403c250798cae95721934ba9ca4d74a84f5a06274f38c0fbb86f1a&","proxy_url":"https://media.discordapp.net/attachments/1445774395749568522/1445814537767882895/Screenshot_2025-12-03_at_17.29.12.png?ex=6933b177&is=69325ff7&hm=5e6eac4602403c250798cae95721934ba9ca4d74a84f5a06274f38c0fbb86f1a&","width":1050,"height":1292,"description":"Generic","content_type":"image/png","original_content_type":"image/png","content_scan_version":2,"placeholder":"+/cBBgAHd2d3iGd5iJd3iZhp5OEPD94=","placeholder_version":1,"title":"Screenshot 2025-12-03 at 17.29.12"},{"id":"1445814538384576583","filename":"Screenshot_2025-12-03_at_17.29.36.png","size":149932,"url":"https://cdn.discordapp.com/attachments/1445774395749568522/1445814538384576583/Screenshot_2025-12-03_at_17.29.36.png?ex=6933b177&is=69325ff7&hm=fd29814b4d508c0d74e403649e7e90f1bd73bffbbd87058b71f368c1cc5ebea0&","proxy_url":"https://media.discordapp.net/attachments/1445774395749568522/1445814538384576583/Screenshot_2025-12-03_at_17.29.36.png?ex=6933b177&is=69325ff7&hm=fd29814b4d508c0d74e403649e7e90f1bd73bffbbd87058b71f368c1cc5ebea0&","width":1062,"height":1404,"description":"child","content_type":"image/png","original_content_type":"image/png","content_scan_version":2,"placeholder":"+/cBBQAGdnaIWGl4h4iYiabgPgve","placeholder_version":1,"title":"Screenshot 2025-12-03 at 17.29.36"}],"embeds":[],"timestamp":"2025-12-03T16:30:48.004000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1445814538879631391","channel_id":"1445774395749568522","author":{"id":"918504524610695168","username":"dpeach44","avatar":"91d80b360d48938482b8a7e23147d057","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"dpeach","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":6},{"type":0,"content":"1 - you will need to properly remove the hfid, so `human_friendly_id: []` and not just remove the line and then update the uniqueness_constraint (in which case you will manage to it the issue #2 again \n\n2 -  You're encountering a known limitation with how properties are inherited from generics to nodes in Infrahub. The documentation explicitly states: \"Generic's properties are propagated to Nodes only during the first import\n\n3 - this is unexpected for me, I would expect to have the chil not update as well , could you check back in infrahub UI what is present in as HFID and uniqueness_constraint for both generic and node ?","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-12-03T15:46:33.110000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1445803403447107726","channel_id":"1445774395749568522","author":{"id":"1133022375051542558","username":"shabear_dis","avatar":"e5046d674427373d76e2dde9dc74feb5","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Benito","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":5},{"type":0,"content":"thanks for the info, I've tried:\n1. removing hfid, doesn't do anything (no diff)\n2. making hfid the same as unique constraint, that works for the generic but is not reflected on the child node\n3. making hfid the same as unique constraint on both generic and child node, still only the generic is updated","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-12-03T15:29:04.527000+00:00","edited_timestamp":"2025-12-03T15:30:07.654000+00:00","flags":0,"components":[],"id":"1445799005371236485","channel_id":"1445774395749568522","author":{"id":"918504524610695168","username":"dpeach44","avatar":"91d80b360d48938482b8a7e23147d057","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"dpeach","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":4},{"type":0,"content":"This is expected behavior in Infrahub. When you define a human_friendly_id on a node or generic, Infrahub automatically creates a corresponding uniqueness constraint if one doesn't already exist.\n\nFrom the documentation: \"If a human_friendly_id is defined on a node but no uniqueness_constraints are present, a uniqueness constraints matching the human_friendly_id will be automatically created.\"\n\nIn your case, you've defined:\n\n```yaml\nhuman_friendly_id:\n  - name__value\n```\n\nThis automatically creates a uniqueness constraint for name__value in addition to your explicitly defined constraint [\"topology\", \"name__value\"]\n\nThe documentation also notes: \"If at least one attribute is marked as unique, and human_friendly_id hasn't been defined, human_friendly_id will be automatically created.\"\n\nTo resolve this, you have two options:\n\nUpdate your human_friendly_id to match your desired uniqueness constraint:\n\n```yaml\nhuman_friendly_id:\n  - topology__name__value\n  - name__value\nuniqueness_constraints:\n  - [\"topology\", \"name__value\"]\n```\n\nRemove the human_friendly_id if you only want the multi-field uniqueness constraint and don't need a human-friendly identifier.\n\nThe unique: false setting on the name attribute won't override this behavior because the uniqueness constraint is being created at the schema level based on your human_friendly_id definition, not from the attribute's unique property.\n\nhttps://docs.infrahub.app/topics/schema","mentions":[],"mention_roles":[],"attachments":[],"embeds":[{"type":"article","url":"https://docs.infrahub.app/topics/schema","title":"Overview | Infrahub Documentation","description":"In Infrahub, the schema is at the center of most things and our goal is to provide as much flexibility as possible to allow users to extend and customize the schema.","content_scan_version":2}],"timestamp":"2025-12-03T14:35:29.694000+00:00","edited_timestamp":"2025-12-03T14:35:56.174000+00:00","flags":0,"components":[],"id":"1445785521384067092","channel_id":"1445774395749568522","author":{"id":"1133022375051542558","username":"shabear_dis","avatar":"e5046d674427373d76e2dde9dc74feb5","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Benito","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":3},{"type":0,"content":"it's link to your HFID  being `name__value`","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-12-03T14:32:09.504000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1445784681726345331","channel_id":"1445774395749568522","author":{"id":"1133022375051542558","username":"shabear_dis","avatar":"e5046d674427373d76e2dde9dc74feb5","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Benito","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":2},{"type":0,"content":"there was no uniqueness constraint before I added it, so I am wondering how it got there in the first place.","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-12-03T14:14:30.756000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1445780241015505028","channel_id":"1445774395749568522","author":{"id":"918504524610695168","username":"dpeach44","avatar":"91d80b360d48938482b8a7e23147d057","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"dpeach","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":1},{"type":0,"content":"Was the uniqueness constraint \n`uniqueness_constraint: [[name__value]]`\nbefore you update it to `toology, name__value` ?","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-12-03T14:10:35.218000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1445779253097402490","channel_id":"1445774395749568522","author":{"id":"1133022375051542558","username":"shabear_dis","avatar":"e5046d674427373d76e2dde9dc74feb5","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Benito","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false},{"type":0,"content":"Hey guys,\n\nNot sure if I'm hitting a bug here or missing something. I cannot get my unique constraint to reflect correctly in the schema. I have a generic configured like:\n\n```\n  - name: GenericElement\n    namespace: Design\n    description: \"Base model for elements\"\n    label: \"Generic Design Element\"\n    icon: \"carbon:network-3-reference\"\n    human_friendly_id:\n      - name__value\n    display_label: name__value\n    order_by: [name__value]\n    include_in_menu: false\n    uniqueness_constraints:\n      - [\"topology\", \"name__value\"]\n    attributes:\n      - name: name\n        kind: Text\n        order_weight: 1000\n```\n\nIn the schema I see that `topology, name__value` is there as the unique constraint but additionally I see `name__value` by itself. Even if I set the `name` attribute explicitly to `unique: false` it does not change. Could there be some other reason why `name__value` is considered unique?\n\nThanks.","mentions":[],"mention_roles":[],"attachments":[{"id":"1445774397024763935","filename":"Screenshot_2025-12-03_at_14.49.30.png","size":22548,"url":"https://cdn.discordapp.com/attachments/1445774395749568522/1445774397024763935/Screenshot_2025-12-03_at_14.49.30.png?ex=69338c15&is=69323a95&hm=772b91a643e4141c7cbc7c8ff3ae39985dcade4bc3daff6c8066d7671c2fc24b&","proxy_url":"https://media.discordapp.net/attachments/1445774395749568522/1445774397024763935/Screenshot_2025-12-03_at_14.49.30.png?ex=69338c15&is=69323a95&hm=772b91a643e4141c7cbc7c8ff3ae39985dcade4bc3daff6c8066d7671c2fc24b&","width":1046,"height":114,"content_type":"image/png","original_content_type":"image/png","content_scan_version":2,"placeholder":"OQgGCYILuqdxdcqX0GkFnVY=","placeholder_version":1,"title":"Screenshot 2025-12-03 at 14.49.30"}],"embeds":[],"timestamp":"2025-12-03T13:51:17.136000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1445774395749568522","channel_id":"1445774395749568522","author":{"id":"918504524610695168","username":"dpeach44","avatar":"91d80b360d48938482b8a7e23147d057","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"dpeach","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false}]}]