[{"thread":{"id":"1356704808005800147","type":11,"last_message_id":"1359238064823603502","flags":0,"guild_id":"1212332642801025064","name":"Enabling TLS on Infrahub","parent_id":"1301914405176475729","rate_limit_per_user":0,"bitrate":64000,"user_limit":0,"rtc_region":null,"owner_id":"1352654639522123826","thread_metadata":{"archived":true,"archive_timestamp":"2025-05-08T18:48:41.270000+00:00","auto_archive_duration":4320,"locked":false,"create_timestamp":"2025-04-01T19:00:32.585000+00:00"},"message_count":10,"member_count":4,"total_message_sent":12,"applied_tags":["1301915235380363266"]},"messages":[{"type":0,"content":"You should be able to set tls insecure with infrahubctl using the following environment variable: INFRAHUB_TLS_INSECURE=True\nhttps://docs.infrahub.app/python-sdk/reference/config#tls_insecure","mentions":[],"mention_roles":[],"attachments":[],"embeds":[{"type":"article","url":"https://docs.infrahub.app/python-sdk/reference/config","title":"Python SDK Configuration | Infrahub Documentation","description":"The Python SDK (Async or Sync) client can be configured using an instance of the Config class.","content_scan_version":2}],"timestamp":"2025-04-08T18:46:48.076000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1359238064823603502","channel_id":"1356704808005800147","author":{"id":"1220422159676084304","username":"fatih_10382_62805","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"fatih","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false,"position":11,"reactions":[{"emoji":{"id":null,"name":"üëç"},"count":1,"count_details":{"burst":0,"normal":1},"burst_colors":[],"me_burst":false,"burst_me":false,"me":false,"burst_count":0}]},{"type":0,"content":"I used a valid TLS cert (not self signed) with nginx and was able to get this to work in the end.","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-04-08T17:05:03.126000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1359212458807660615","channel_id":"1356704808005800147","author":{"id":"1352654639522123826","username":"thomas_72011","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Thomas","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":10},{"type":0,"content":"Specifically, I did a wireshark capture on my host machine when I didn't have \"tls_insecure=True\" set on infrahub_sdk, and my client was responding with a TLS Alert - Fatal - Unknown CA (self signed certificate obviously)","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-04-08T14:41:28.839000+00:00","edited_timestamp":"2025-04-08T14:46:54.514000+00:00","flags":0,"components":[],"id":"1359176327869235210","channel_id":"1356704808005800147","author":{"id":"1352654639522123826","username":"thomas_72011","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Thomas","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":9},{"type":0,"content":"Okay - I tracked this down. I think it's because I'm using a self-signed certificate on Infrahub. \n\nI tested using the Python SDK and was getting the same error as above. Adding \"tls_insecure=True\" to Config seems to have resolved it with infrahub_sdk.\n\nIs there a way to do the same thing with the infrahubctl? I can work on getting a trusted certificate assigned - just wondering if there's a workaround for this in the meantime.","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-04-08T14:38:48.442000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1359175655115329919","channel_id":"1356704808005800147","author":{"id":"1352654639522123826","username":"thomas_72011","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Thomas","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":8},{"type":0,"content":"No. This should work. Which IP are you using in this case? Is there any more information in the error message?","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-04-07T22:54:43.989000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1358938071059398938","channel_id":"1356704808005800147","author":{"id":"1221732604806692884","username":"w_vandeun","avatar":"e9ac2093c5e49a4a05a41b375db9ac69","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Wim","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false,"position":7},{"type":0,"content":"Am I going about this the completely wrong way (should I be trying to use infrahubctl from a computer other than the Infrahub Ubuntu server itself)?","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-04-07T20:49:25.674000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1358906536960721128","channel_id":"1356704808005800147","author":{"id":"1352654639522123826","username":"thomas_72011","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Thomas","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":6},{"type":0,"content":"Okay - nginx is set up as a reverse proxy for this setup. I've got an nginx container running on the same docker instance as infrahub that's listening on TCP/8000 with SSL.\n\nI edited the original docker-compose.yml file and removed\nports:\n      - 8000:8000\n\nfrom  infrahub-server:\n\nSo now TCP/8000 is exposed on the nginx container. From a client web browser, I can navigate to \"https://<local-infrahub-server-ip>:8000\" and log in with admin and all seems well.\n\nI am trying to run infrahubctl on the Ubuntu server hosting the docker containers, and it's giving me this error:\nUnable to connect to https://<ip>:8000\n Address:                        https://<ip>:8000\n Connection Status:    X\n Connection Error:       Unable to connect to 'https://<ip>:8000'. (ServerNotReachableError)\n Python Version:          3.10.12\n SDK Version:                1.9.2\n Infrahub Version:        N/A","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-04-07T20:48:57.162000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1358906417372860627","channel_id":"1356704808005800147","author":{"id":"1352654639522123826","username":"thomas_72011","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Thomas","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":5},{"type":0,"content":"Regarding your question for `http://<server-ip>:8000` and TLS, we recommend using a reverse proxy that would do TLS offloading so that Infrahub is exposed using HTTPS","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-04-01T20:39:20.282000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1356729670569164993","channel_id":"1356704808005800147","author":{"id":"1220422159676084304","username":"fatih_10382_62805","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"fatih","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false,"position":2},{"type":0,"content":"please let us know of that covers all your questions","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-04-01T19:08:26.583000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1356706796097634394","channel_id":"1356704808005800147","author":{"id":"695690467056025690","username":"dgarros","avatar":"67171294847dca2ce3ac938f5bca0443","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Damien","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false,"position":1},{"type":0,"content":"We have some documentaton for it here\nhttps://docs.infrahub.app/topics/architecture#tls-secured-connections","mentions":[],"mention_roles":[],"attachments":[],"embeds":[{"type":"article","url":"https://docs.infrahub.app/topics/architecture","title":"Architecture | Infrahub Documentation","description":"Infrahub is deployed as a container-based architecture, composed of multiple components. A minimum deployment consists of the following architecture:","content_scan_version":2}],"timestamp":"2025-04-01T19:08:10.096000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1356706726946275329","channel_id":"1356704808005800147","author":{"id":"695690467056025690","username":"dgarros","avatar":"67171294847dca2ce3ac938f5bca0443","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Damien","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false},{"type":0,"content":"I double checked the other questions in this channel, and I don't think I saw anything similar to this so hopefully this isn't an already answered question.\n\nI was wondering if there's a document out there that shows how to ensure that all the internal communications between the Infrahub containers / etc. are secured with TLS, and also ensuring that web interactions with Infrahub don't use HTTP. As in, the default URL for infrahub is http://<server-ip>:8000. How would this be changed to enable TLS? I understand that there are different configurations / environment variables that can be set:\n\nINFRAHUB_BROKER_TLS_CA_FILE\nINFRAHUB_BROKER_TLS_ENABLED\nINFRAHUB_CACHE_TLS_CA_FILE\nINFRAHUB_CACHE_TLS_ENABLED\nINFRAHUB_DB_TLS_CA_FILE\nINFRAHUB_DB_TLS_ENABLED\n\nAnd before I go off on a complete rabbit trail trying to set certain options, it would be cool if there was a tried and true process to get this done.","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-04-01T19:00:32.585000+00:00","edited_timestamp":"2025-04-01T19:03:10.400000+00:00","flags":0,"components":[],"id":"1356704808005800147","channel_id":"1356704808005800147","author":{"id":"1352654639522123826","username":"thomas_72011","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Thomas","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false}]}]