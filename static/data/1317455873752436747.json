[{"thread":{"id":"1317455873752436747","type":11,"last_message_id":"1323726771136237620","flags":0,"guild_id":"1212332642801025064","name":"infrahubctl stopped working with 1.0.9 upgrade","parent_id":"1301914405176475729","rate_limit_per_user":0,"bitrate":64000,"user_limit":0,"rtc_region":null,"owner_id":"123965055434883073","thread_metadata":{"archived":true,"archive_timestamp":"2025-04-06T20:01:43.698000+00:00","auto_archive_duration":4320,"locked":false,"create_timestamp":"2024-12-14T11:39:17.449000+00:00"},"message_count":28,"member_count":5,"total_message_sent":28,"applied_tags":["1322475882421555200","1301916056205656276"]},"messages":[{"type":0,"content":"1.1.0 and sdk 1.3.0 seem to have fixed this issue for me.","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-31T18:57:35.893000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1323726771136237620","channel_id":"1317455873752436747","author":{"id":"123965055434883073","username":"themar4321","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Themar","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":27,"reactions":[{"emoji":{"id":null,"name":"üëç"},"count":1,"count_details":{"burst":0,"normal":1},"burst_colors":[],"me_burst":false,"burst_me":false,"me":false,"burst_count":0}]},{"type":0,"content":"Thank you very much for the info y'all have provided.\n\nWe have opened an issue: https://github.com/opsmill/infrahub/issues/5235 and will be working with backend engineers to get this resolved.","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-17T13:27:03.758000+00:00","edited_timestamp":null,"flags":4,"components":[],"id":"1318570159014678610","channel_id":"1317455873752436747","author":{"id":"370964598284746752","username":"foolproofalibi","avatar":"51c8acd4dcd60cb1cea707612872daf5","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Foolproofalibi","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":26},{"type":0,"content":"Thanks <@1303043080634630154> and <@123965055434883073> I know that our team ( <@1221732604806692884> and <@1133022375051542558> ) are actively digging in to this to see what's going on, we'll update as soon as we can!","mentions":[{"id":"123965055434883073","username":"themar4321","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Themar","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},{"id":"1303043080634630154","username":"roger_59670","avatar":"339b471b2381d72ed3fc7392ed5b701d","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Roger","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},{"id":"1221732604806692884","username":"w_vandeun","avatar":"e9ac2093c5e49a4a05a41b375db9ac69","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Wim","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},{"id":"1133022375051542558","username":"shabear_dis","avatar":"e5046d674427373d76e2dde9dc74feb5","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Benito","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null}],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-17T11:40:26.098000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1318543325283745903","channel_id":"1317455873752436747","author":{"id":"1212726983944052798","username":"pete_crocker","avatar":"2ce15ce78115631a666e77b58952f91e","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Pete Crocker","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false,"position":25,"reactions":[{"emoji":{"id":null,"name":"üëç"},"count":1,"count_details":{"burst":0,"normal":1},"burst_colors":[],"me_burst":false,"burst_me":false,"me":false,"burst_count":0}]},{"type":0,"content":"Just to add I encountered exactly the same issue I installed a clean 1.0.9 and infrahubctl was unable to connect to server - rolled back to 1.0.8 all working","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-17T09:37:58.456000+00:00","edited_timestamp":"2024-12-17T09:40:34.692000+00:00","flags":0,"components":[],"id":"1318512507039645757","channel_id":"1317455873752436747","author":{"id":"1303043080634630154","username":"roger_59670","avatar":"339b471b2381d72ed3fc7392ed5b701d","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Roger","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":24},{"type":0,"content":"Ok thanks","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-17T09:37:02.712000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1318512273232232478","channel_id":"1317455873752436747","author":{"id":"1303043080634630154","username":"roger_59670","avatar":"339b471b2381d72ed3fc7392ed5b701d","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Roger","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":23},{"type":19,"content":"Use the docker commands to connect to the worker. Example: docker exec -it -u root <container> /bin/bash .\n\nOnce connected run the commands as they are listed on the release notes. \n\nYou can also run the commands one at a time in the container without connecting to it first. Example: docker exec <container> /bin/bash -c '<command>'\n\nOnce done restart all the containers.","mentions":[{"id":"1303043080634630154","username":"roger_59670","avatar":"339b471b2381d72ed3fc7392ed5b701d","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Roger","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null}],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-16T16:29:10.636000+00:00","edited_timestamp":"2024-12-16T16:34:51.929000+00:00","flags":0,"components":[],"id":"1318253601797443734","channel_id":"1317455873752436747","author":{"id":"123965055434883073","username":"themar4321","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Themar","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"message_reference":{"type":0,"channel_id":"1317455873752436747","message_id":"1318155865240502282","guild_id":"1212332642801025064"},"position":22,"referenced_message":{"type":19,"content":"Hi Themar, can you advise how to run the DB commands on a worker?","mentions":[{"id":"123965055434883073","username":"themar4321","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Themar","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null}],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-16T10:00:48.425000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1318155865240502282","channel_id":"1317455873752436747","author":{"id":"1303043080634630154","username":"roger_59670","avatar":"339b471b2381d72ed3fc7392ed5b701d","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Roger","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"message_reference":{"type":0,"channel_id":"1317455873752436747","message_id":"1317466044280868874","guild_id":"1212332642801025064"},"position":21}},{"type":19,"content":"Hi Themar, can you advise how to run the DB commands on a worker?","mentions":[{"id":"123965055434883073","username":"themar4321","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Themar","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null}],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-16T10:00:48.425000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1318155865240502282","channel_id":"1317455873752436747","author":{"id":"1303043080634630154","username":"roger_59670","avatar":"339b471b2381d72ed3fc7392ed5b701d","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Roger","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"message_reference":{"type":0,"channel_id":"1317455873752436747","message_id":"1317466044280868874","guild_id":"1212332642801025064"},"position":21,"referenced_message":{"type":0,"content":"I used the docker compose then ran the DB commands on a worker\n\ninfrahub db migrate\ninfrahub db update-core-schema","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-14T12:19:42.292000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1317466044280868874","channel_id":"1317455873752436747","author":{"id":"123965055434883073","username":"themar4321","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Themar","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":4}},{"type":0,"content":"All the yaml files I downloaded from your git repository and I have been using for testing.","mentions":[],"mention_roles":[],"attachments":[{"id":"1318104753300963478","filename":"schema.tar","size":163840,"url":"https://cdn.discordapp.com/attachments/1317455873752436747/1318104753300963478/schema.tar?ex=6933cf36&is=69327db6&hm=2fe042cd7551d2a8e73a492fd8a0a0c1cee9cec5f80303124577355bf1791800&","proxy_url":"https://media.discordapp.net/attachments/1317455873752436747/1318104753300963478/schema.tar?ex=6933cf36&is=69327db6&hm=2fe042cd7551d2a8e73a492fd8a0a0c1cee9cec5f80303124577355bf1791800&","content_type":"application/x-tar","content_scan_version":2}],"embeds":[],"timestamp":"2024-12-16T06:37:42.464000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1318104753615671386","channel_id":"1317455873752436747","author":{"id":"123965055434883073","username":"themar4321","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Themar","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":20,"reactions":[{"emoji":{"id":null,"name":"üôè"},"count":1,"count_details":{"burst":0,"normal":1},"burst_colors":[],"me_burst":false,"burst_me":false,"me":false,"burst_count":0}]},{"type":0,"content":"Thanks for the explanation. If you can send over all the schema files, then we can try to reproduce the issue on our side, which would make it easier for our backend engineering team to resolve it.","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-16T06:24:43.167000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1318101485007016027","channel_id":"1317455873752436747","author":{"id":"1221732604806692884","username":"w_vandeun","avatar":"e9ac2093c5e49a4a05a41b375db9ac69","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Wim","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false,"position":19},{"type":0,"content":"The schema files between the 2 branches are exactly the same and all came from your git repository. The only thing I have been testing is removing things from the schema so the cable.yml file has state: absent or I edit the file and remove that line to readd it to the schema. Was testing to see if this bug was resolved for me after 1.0.9.\n\nhttps://github.com/opsmill/infrahub/issues/4836","mentions":[],"mention_roles":[],"attachments":[],"embeds":[{"type":"article","url":"https://github.com/opsmill/infrahub/issues/4836","title":"bug: schema out of sync on workers after deleting a node from the s...","description":"Component API Server / GraphQL Infrahub version 1.0.1 Current Behavior The schema between different workers goes out of sync, when you delete an existing schema node from the schema. Expected Behav...","color":1975079,"provider":{"name":"GitHub"},"thumbnail":{"url":"https://opengraph.githubassets.com/b06c9eb3e3f5a995a3dcefe22a26d4ee26870565304dbcb82dd6bf557425b915/opsmill/infrahub/issues/4836","proxy_url":"https://images-ext-1.discordapp.net/external/6SAD8SdNj5r9t4trQx9PfZ2-aMbE_2rPe7IQhv6WeuE/https/opengraph.githubassets.com/b06c9eb3e3f5a995a3dcefe22a26d4ee26870565304dbcb82dd6bf557425b915/opsmill/infrahub/issues/4836","width":1200,"height":600,"content_type":"image/png","placeholder":"+vcFDICWiaiJiHiZdX+Hb/HBDQ==","placeholder_version":1,"flags":0},"content_scan_version":1}],"timestamp":"2024-12-16T03:58:10.926000+00:00","edited_timestamp":"2024-12-16T04:05:33.080000+00:00","flags":0,"components":[],"id":"1318064607675285637","channel_id":"1317455873752436747","author":{"id":"123965055434883073","username":"themar4321","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Themar","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":18},{"type":0,"content":"I tried both main and schema2 to make sure it wasn't a branch naming issue or something. Wasn't sure if something happened to the branch naming during the upgrade to 1.0.9. I might have given you the timestamp for when I ran the command against main.","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-16T03:56:38.538000+00:00","edited_timestamp":"2024-12-16T04:04:09.812000+00:00","flags":0,"components":[],"id":"1318064220172193884","channel_id":"1317455873752436747","author":{"id":"123965055434883073","username":"themar4321","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Themar","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":17},{"type":0,"content":"Thanks. Can you also send me the schema files that you used to load the schema in the main branch?\n\nAlso it's interesting that error message says branch main in this URL in the error message:  'http://192.168.22.10:8000/api/schema/load?branch=main\n\nWhereas the error message earlier clearly showed branch schema2 in the URL","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-15T20:37:18.362000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1317953657580421171","channel_id":"1317455873752436747","author":{"id":"1221732604806692884","username":"w_vandeun","avatar":"e9ac2093c5e49a4a05a41b375db9ac69","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Wim","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false,"position":16},{"type":0,"content":"(.venv) %infrahubctl version\nInfrahub: v1.0.9\nPython SDK: v1.1.0\n(.venv) %infrahubctl schema load --branch schema2 cable.yml\nHTTP communication failure: Server error '500 Internal Server Error' for url 'http://192.168.22.10:8000/api/schema/load?branch=main'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/500 on POST to http://192.168.22.10:8000/api/schema/load?branch=main","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-14T23:16:22.702000+00:00","edited_timestamp":"2024-12-14T23:29:34.331000+00:00","flags":4,"components":[],"id":"1317631301578395749","channel_id":"1317455873752436747","author":{"id":"123965055434883073","username":"themar4321","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Themar","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":15},{"type":0,"content":"ran the commands at 4:02:33 and 4:05:32 local time which is MST, but I believe the server time is still using UTC","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-14T23:15:33.910000+00:00","edited_timestamp":"2024-12-15T03:25:37.692000+00:00","flags":0,"components":[],"id":"1317631096929783859","channel_id":"1317455873752436747","author":{"id":"123965055434883073","username":"themar4321","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Themar","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":14},{"type":0,"content":"Attached the server log and the yaml file","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-14T23:12:08.441000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1317630235130462352","channel_id":"1317455873752436747","author":{"id":"123965055434883073","username":"themar4321","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Themar","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":13},{"type":0,"content":"infrahubctl version command connects fine","mentions":[],"mention_roles":[],"attachments":[{"id":"1317630145225560115","filename":"server.log","size":1437150,"url":"https://cdn.discordapp.com/attachments/1317455873752436747/1317630145225560115/server.log?ex=69340f73&is=6932bdf3&hm=cab25a6c48fc72c9137363353e79ee677fe0c096f9a5573bc7a641860d7a1718&","proxy_url":"https://media.discordapp.net/attachments/1317455873752436747/1317630145225560115/server.log?ex=69340f73&is=6932bdf3&hm=cab25a6c48fc72c9137363353e79ee677fe0c096f9a5573bc7a641860d7a1718&","content_scan_version":0},{"id":"1317630145682608179","filename":"cable.yml","size":1208,"url":"https://cdn.discordapp.com/attachments/1317455873752436747/1317630145682608179/cable.yml?ex=69340f73&is=6932bdf3&hm=c8831403dcf4616b44ea7f2834c75354537e843d586ff21920c9010f69f40a20&","proxy_url":"https://media.discordapp.net/attachments/1317455873752436747/1317630145682608179/cable.yml?ex=69340f73&is=6932bdf3&hm=c8831403dcf4616b44ea7f2834c75354537e843d586ff21920c9010f69f40a20&","content_type":"text/plain; charset=utf-8","content_scan_version":0}],"embeds":[],"timestamp":"2024-12-14T23:11:47.196000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1317630146022477875","channel_id":"1317455873752436747","author":{"id":"123965055434883073","username":"themar4321","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Themar","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":12},{"type":0,"content":"I don't think it is failing to connect, since the server is giving us a HTTP 500 response when you try loading the schema.\n\nCan you execute the following command?\n```\ninfrahubctl version\n```\nIf that command works, we are able to connect to the server successfully.\n\nAfter that can you capture the logs of the server and send them over? If you are using our invoke tasks to spin it up then you should be able to do it like this:\n```\ndocker logs infrahub-server-1 > server.log\n```\nIt would be good if you could give us a timestamp of when you execute the `infrahubctl schema load` so we now +- where to start looking in the log file.\n\nIt would also be useful if you send us the schema file that you are trying to load.","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-14T20:57:38.131000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1317596385796690002","channel_id":"1317455873752436747","author":{"id":"1221732604806692884","username":"w_vandeun","avatar":"e9ac2093c5e49a4a05a41b375db9ac69","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Wim","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false,"position":11},{"type":0,"content":"I even tried a full restart of the VM and it isn't working","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-14T20:42:41.634000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1317592625615999038","channel_id":"1317455873752436747","author":{"id":"123965055434883073","username":"themar4321","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Themar","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":10},{"type":0,"content":"restarted all the containers and get the same error message","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-14T19:58:43.473000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1317581560366760006","channel_id":"1317455873752436747","author":{"id":"123965055434883073","username":"themar4321","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Themar","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":9},{"type":0,"content":"As you did the db migrate and update in an exec , I would recommend to restart the docker after","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-14T12:54:27.609000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1317474790734434375","channel_id":"1317455873752436747","author":{"id":"1133022375051542558","username":"shabear_dis","avatar":"e5046d674427373d76e2dde9dc74feb5","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Benito","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":8},{"type":0,"content":"Reinstalled 1.0.9 with the same commands as the first time\n\n\nThen ran the below commands on my laptop running the SDK to make sure it still failed and it did:\n(.venv) %infrahubctl schema load --branch schema2 cable.yml\nHTTP communication failure: Server error '500 Internal Server Error' for url 'http://192.168.22.10:8000/api/schema/load?branch=schema2'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/500 on POST to http://192.168.22.10:8000/api/schema/load?branch=schema2\n\n\nGenerated a new API Token in Graphql using the command below to see if that would resolve the issue:\nmutation {\n  InfrahubAccountTokenCreate(data: {name: \"API\"}) {\n    object {\n      token {\n        value\n      }\n    }\n  }\n}\n\nThen ran the below commands on my laptop running the SDK to try the new API token and the infrahubctl command again:\n(.venv) %export INFRAHUB_API_TOKEN=181107b5-eae7-f1a3-35bb-c51c8c57c1ee\n(.venv) %infrahubctl schema load --branch schema2 cable.yml\nHTTP communication failure: Server error '500 Internal Server Error' for url 'http://192.168.22.10:8000/api/schema/load?branch=schema2'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/500 on POST to http://192.168.22.10:8000/api/schema/load?branch=schema2\n(.venv) %export INFRAHUB_API_TOKEN=06438eb2-8019-4776-878c-0941b1f1d1ec","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-14T12:36:22.847000+00:00","edited_timestamp":null,"flags":4,"components":[],"id":"1317470240912707595","channel_id":"1317455873752436747","author":{"id":"123965055434883073","username":"themar4321","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Themar","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":7},{"type":0,"content":"So then I knew I didn't have a connectivity issue between my laptop and the server because it worked on 1.0.8","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-14T12:34:07.825000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1317469674589651025","channel_id":"1317455873752436747","author":{"id":"123965055434883073","username":"themar4321","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Themar","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":6},{"type":0,"content":"after initial 1.0.9 upgrade on my server using the commands below:\ncurl https://infrahub.opsmill.io | sudo docker compose -f - up -d\ndocker exec -it -u root root-task-worker-1 /bin/bash\ninfrahub db migrate\ninfrahub db update-core-schema\n\n\nI then ran the commands below on my laptop running the SDK:\n(.venv) %pip3 install --upgrade infrahub-sdk\nSuccessfully installed infrahub-sdk-1.1.0\n(.venv) %export INFRAHUB_DEFAULT_BRANCH=main\n(.venv) %export INFRAHUB_ADDRESS=http://192.168.22.10:8000/\n(.venv) %export INFRAHUB_API_TOKEN=06438eb2-8019-4776-878c-0941b1f1d1ec\n(.venv) %infrahubctl schema load --branch schema2 cable.yml\nHTTP communication failure: Server error '500 Internal Server Error' for url 'http://192.168.22.10:8000/api/schema/load?branch=schema2'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/500 on POST to http://192.168.22.10:8000/api/schema/load?branch=schema2\n(.venv) %ping 192.168.22.10\nPING 192.168.22.10 (192.168.22.10): 56 data bytes\n64 bytes from 192.168.22.10: icmp_seq=0 ttl=61 time=8.015 ms\n64 bytes from 192.168.22.10: icmp_seq=1 ttl=61 time=3.855 ms\n^C\n--- 192.168.22.10 ping statistics ---\n2 packets transmitted, 2 packets received, 0.0% packet loss\nround-trip min/avg/max/stddev = 3.855/5.935/8.015/2.080 ms\n\n\n\nRolled back to 1.0.8 with the command below on the server:\ncurl https://infrahub.opsmill.io/1.0.8 | sudo docker compose -f - up -d\n\nI then ran the commands below on my laptop running the SDK:\n(.venv) %infrahubctl schema load --branch schema2 cable.yml\n schema 'cable.yml' loaded successfully\n 1 schema processed in 22.110 seconds.","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-14T12:33:30.637000+00:00","edited_timestamp":null,"flags":4,"components":[],"id":"1317469518611873822","channel_id":"1317455873752436747","author":{"id":"123965055434883073","username":"themar4321","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Themar","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":5},{"type":0,"content":"I used the docker compose then ran the DB commands on a worker\n\ninfrahub db migrate\ninfrahub db update-core-schema","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-14T12:19:42.292000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1317466044280868874","channel_id":"1317455873752436747","author":{"id":"123965055434883073","username":"themar4321","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Themar","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":4},{"type":0,"content":"And did you follow the migration procedure or did you rebuild everything ?","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-14T12:18:43.568000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1317465797974560768","channel_id":"1317455873752436747","author":{"id":"1133022375051542558","username":"shabear_dis","avatar":"e5046d674427373d76e2dde9dc74feb5","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Benito","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":3},{"type":0,"content":"I made sure to upgrade it as well","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-14T12:08:56.876000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1317463337210089532","channel_id":"1317455873752436747","author":{"id":"123965055434883073","username":"themar4321","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Themar","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":2},{"type":0,"content":"infrahub-sdk==1.1.0","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-14T12:07:56.702000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1317463084821905408","channel_id":"1317455873752436747","author":{"id":"123965055434883073","username":"themar4321","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Themar","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false,"position":1,"reactions":[{"emoji":{"id":null,"name":"üëç"},"count":1,"count_details":{"burst":0,"normal":1},"burst_colors":[],"me_burst":false,"burst_me":false,"me":false,"burst_count":0}]},{"type":0,"content":"With version of the SDK do you have ? You can do \n`pip freeze | grep infrahub` if you are using pip","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-14T12:00:08.385000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1317461120558174209","channel_id":"1317455873752436747","author":{"id":"1133022375051542558","username":"shabear_dis","avatar":"e5046d674427373d76e2dde9dc74feb5","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Benito","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false},{"type":0,"content":"I upgraded my installation to 1.0.9 and infrahubctl stopped being able to connect to the server. I rolled back to 1.0.8 and infrahubctl started working again. I then tried the upgrade again and still it failed to connect.\n\nHTTP communication failure: Server error '500 Internal Server Error' for url 'http://192.168.22.10:8000/api/schema/load?branch=schema2'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/500 on POST to http://192.168.22.10:8000/api/schema/load?branch=schema2","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2024-12-14T11:39:17.449000+00:00","edited_timestamp":null,"flags":4,"components":[],"id":"1317455873752436747","channel_id":"1317455873752436747","author":{"id":"123965055434883073","username":"themar4321","avatar":null,"discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Themar","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false}]}]