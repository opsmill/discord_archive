[{"thread":{"id":"1386270201670144101","type":11,"last_message_id":"1386612586245787762","flags":0,"guild_id":"1212332642801025064","name":"Mocking SDK client","parent_id":"1301914405176475729","rate_limit_per_user":0,"bitrate":64000,"user_limit":0,"rtc_region":null,"owner_id":"867799355921268767","thread_metadata":{"archived":true,"archive_timestamp":"2025-07-23T07:45:03.898000+00:00","auto_archive_duration":4320,"locked":false,"create_timestamp":"2025-06-22T09:02:51.733000+00:00"},"message_count":4,"member_count":3,"total_message_sent":4,"applied_tags":["1322475882421555200","1304062537364410420"]},"messages":[{"type":0,"content":"Having said that, I think there are some advanced use cases that we could managed better so I'm curious to better understand what you are trying to do","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-06-23T07:43:22.577000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1386612586245787762","channel_id":"1386270201670144101","author":{"id":"695690467056025690","username":"dgarros","avatar":"67171294847dca2ce3ac938f5bca0443","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Damien","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false,"position":3},{"type":0,"content":"<@867799355921268767> There are multiple options available depending on what you are trying to do.\nIn addition to the record & replay feature that Wim mentioned, you can mock a single call with `pytest_httpx`, we have implemented a system of marker to clearly identify which call to mock, you can see multiple examples in this file \nhttps://github.com/opsmill/infrahub-sdk-python/blob/stable/tests/unit/sdk/conftest.py#L2553","mentions":[{"id":"867799355921268767","username":"ubaumann","avatar":"6246a4fdf0eec315ad7d2a830626dc94","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"ubaumann","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null}],"mention_roles":[],"attachments":[],"embeds":[{"type":"article","url":"https://github.com/opsmill/infrahub-sdk-python/blob/stable/tests/unit/sdk/conftest.py","title":"infrahub-sdk-python/tests/unit/sdk/conftest.py at stable Â· opsmill...","description":"Python SDK to interact with Infrahub. Contribute to opsmill/infrahub-sdk-python development by creating an account on GitHub.","color":1975079,"provider":{"name":"GitHub"},"thumbnail":{"url":"https://repository-images.githubusercontent.com/854450553/d45e9de9-759c-4eda-bec9-a16767236566","proxy_url":"https://images-ext-1.discordapp.net/external/UiGUKAkP8BGeQp3VzGqvnUHvyJ3vEjunauFxuMk9EHo/https/repository-images.githubusercontent.com/854450553/d45e9de9-759c-4eda-bec9-a16767236566","width":1280,"height":640,"content_type":"image/png","placeholder":"z6YJHIh4d3h/iIdmiIiGcGUIVw==","placeholder_version":1,"flags":0},"content_scan_version":2}],"timestamp":"2025-06-23T07:42:33.332000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1386612379697287341","channel_id":"1386270201670144101","author":{"id":"695690467056025690","username":"dgarros","avatar":"67171294847dca2ce3ac938f5bca0443","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Damien","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false,"position":2},{"type":0,"content":"I'm assuming it's a transform/check you want to test, but some script?","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-06-23T06:29:59.946000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1386594120272711741","channel_id":"1386270201670144101","author":{"id":"1221732604806692884","username":"w_vandeun","avatar":"e9ac2093c5e49a4a05a41b375db9ac69","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Wim","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false,"position":1},{"type":0,"content":"There's a feature in the SDK that allows you to \"record\" a session, which you can then \"replay\" later on.\nUnfortunately it's not documented. I'll come back with an example later today.","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-06-23T06:29:19.170000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1386593949246034011","channel_id":"1386270201670144101","author":{"id":"1221732604806692884","username":"w_vandeun","avatar":"e9ac2093c5e49a4a05a41b375db9ac69","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"Wim","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"},"primary_guild":{"identity_guild_id":"1212332642801025064","identity_enabled":true,"tag":"OTTO","badge":"40122d86938d2a7824dfd9bd695abe81"}},"pinned":false,"mention_everyone":false,"tts":false},{"type":0,"content":"I would like to write unit tests in a project where the sdk is used. Is there a easy way to mock or patch the client? Maybe the cache can be used to avoid any calls to infrahub itself?","mentions":[],"mention_roles":[],"attachments":[],"embeds":[],"timestamp":"2025-06-22T09:02:51.733000+00:00","edited_timestamp":null,"flags":0,"components":[],"id":"1386270201670144101","channel_id":"1386270201670144101","author":{"id":"867799355921268767","username":"ubaumann","avatar":"6246a4fdf0eec315ad7d2a830626dc94","discriminator":"0","public_flags":0,"flags":0,"banner":null,"accent_color":null,"global_name":"ubaumann","avatar_decoration_data":null,"collectibles":null,"display_name_styles":null,"banner_color":null,"clan":null,"primary_guild":null},"pinned":false,"mention_everyone":false,"tts":false}]}]